{"result": {"Result": [{"Number": "CS2008848", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 24-Mar-2014  8:51AM PST\n---------------------------------------------\nI will advise customer to revert to 000B.  However, can you provide some brief responses to the four questions?  Customer still asks.  Also, it seems reasonable to ask (for internal only) for some description of our test procedure prior to releasing microcode, since we just pulled back two versions that clearly aren't ready.  Thanks.", "CreatedOn": "2017-04-06 03:22:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 13-May-2014  7:12PM PST\n---------------------------------------------\nHello Peter,\nchanging status to resolved, since I have already answered your query as per case 771589", "CreatedOn": "2017-04-06 03:22:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Mar-2014 10:48AM PST\n---------------------------------------------\nThank you for the detailed feedback.  I will review these with our factory expert.  In order to see if we can better pinpoint any problems associated with microcode changes, can you run the same tests with the 000C microcde?  It is a step back, but may help to isolate any inadvertent bugs introduced with the latest change.", "CreatedOn": "2017-04-06 03:22:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 21-Mar-2014  4:18PM PST\n---------------------------------------------\nHello Peter,\nI have been able to create some issues with 00D firmware in our lab. I have also removed all  firmware versions from Docsafe and only kept 00B.\n\nfor now we will be working with only 00B firmware. it does not include any fifo collison monitoring. I am now working on finding root cause with our later firmwares firmware and can then have discussion on your above questions. \n\nPlease request sandvine to focus testing with 00B.\n\nThanks\nNishant\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:22:30", "CreatedBy": "admin"}]}, {"Number": "CS1645223", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Jan-2015  2:55PM PST\n---------------------------------------------\nHappy New Year Mizo-san!!\nThe max force for Heat Sink attach is 1.9kg.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 05:51:15", "CreatedBy": "admin"}, {"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 05-Jan-2015  9:15PM PST\n---------------------------------------------\nNishant-san,\n\nThank you for the answer. Here is question for the reconfirmation from the customer.\n\nCan the customer understand that 1.9Kg is the max tolerable load which the pkg can accept continuously ?\nThe customer want to confirm that 1.9Kg is not instantaneous tolerable pressure.\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 05:51:15", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 06-Jan-2015 12:06PM PST\n---------------------------------------------\nMizo-san,\nWe only provide a single value for max force for continuous application.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 05:51:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 04-Jan-2015 11:31PM PST\n---------------------------------------------\nHi Nishant-san,\n\nA happy new year.\n\nThe customer is pushing us for this case. Please tell me the status on this.\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 05:51:15", "CreatedBy": "admin"}]}, {"Number": "CS1803375", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 16-Jun-2016  4:40PM PST\n---------------------------------------------\nHi Peter,\nBelow are my responses to your queries.\n\n\nQ1.  Based on 84794-DS05 Table 310, should bits [3:0] reflect any meaningful value when adaptive equalization is enabled (bit 4 is 0) ?\n\nNo\n\nQ2.  If the answer to Q1 is 'no', can adaptive equalizer results be read from any register?\n\nYes, you can read it from 0X822b.3:0\n\nQ3.  Is toggling of 0x821C.4 all that is needed to enable/disable adaptive equalization, or is some additional sequence required?\nYes, that\u2019s it.\n\nIf 821C.4 is set then forcing a value in 821c.3:0 would set manual eq values. But same manual eq value will not get reflected in 0x822B.3:0\n\nSimilarly if 821c.4 is set to 0, then adaptive EQ values will get updated in 0x822B. But 0x822b values will not get reflected in 0x821C.3:0\n\nIn better words\n821C.4 is used to enable /diable adaptive EQ  , 0 to disable, 1 to enable\n821C.3:0 is used to set and read manual EQ values if 821c.4 is set to 1\n822B.3:0 is used to read adaptive EQ values and 821C.4  is set to 0\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 11:31:27", "CreatedBy": "admin"}]}, {"Number": "CS1752531", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Kenny,\n\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function?     [Kenny] - We use GPIO to pull low 84794 RESETB pin to do HW reset .\n[Broadcom] OK. Could you please point out the code which is doing GPIO call to pull down.\nIs it done from Ezchip side and we don't see that code in PHY driver that you shared?\n\nFor now, we will assume that h/w reset is being done. However, could you please verify for sequence & timing correctness.\nAlso, is it possible that there is unintended reset being done by other parts of the code/system?\n\n\n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?   [Kenny] - This function doesn't use till now.\n[Broadcom] As we have not tested/run code without reset on our systems, it is hard to qualify your code changes.\nCould you please adjust your code to follow same sequence (including the reset) as SDK phy driver?\n\n\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d? [Kenny] - My code doesn't set TX parameters, I suspect microcode set TX parameters.\n[Broadcom] I think, PHY driver sets it to default preemphasis values. However, SDK exposes \"SOC_PHY_CONTROL_PREEMPHASIS\" to let customer tune the preemphasis values based on Board-design.\n\nEarlier, in the CSP log we observed that preemphasis values were read as zero in issue state. Value zero is not expected, and it will cause the amplitude to be low as sen on your TX captures.\n\nFYI, regardless this problem, I think you need to set correct preemphasis values suitable to the board by using above PHY_CONTROL.\n\n\nAdditionally, we have reviewed the driver code and preemphasis values are being set to zero if mode is PHY84793_MODE_10X10G_TO_4X25G. We have to make sure that on your system we are never hitting this mode. To be sure about this, could you please follow the same sequence that original PHY driver is following in _phy_84793_init_pass2() to set the speed. (you can change the configured mode later in code)\n\nRegards,\nRonen", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 02-Apr-2015  4:41PM PST\n---------------------------------------------\nHi Sri,\n\nThanks for meeting today!\n\n\nFew update from customer ticket:\n\nCustomer reported he made a mistake in the register dumps, and all the indirect access registers' values are wrong. \nHowever, they confirmed that if the ports link up and works well, Line Side nPPI TX registers value are: 8065=0x8800, 8066=0x48, 8067=0x19F8\nWhen link issue occurs these registers value are all zeroes, but after changing them to the values mentioned above, the problem is fixed.\n\nCustomer confirmed they only use PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode.\n\nThey also say the EZchip is responsible for the \u201cHW reset GearBox\u201d, and doing it by setting RESETB to 0 for 150mS.\n\n\nBest regards,\nRonen", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nThank you for your reminding! I answered your question on CSP directly this time. Please see my remark below.\n\n1. In _phy_84793_init_pass2(), in default SDK driver, we download-firmware & set speed based on interface-type. In your modified code, only firmware download is done. \nCould you please let us know if you observed any issues previously here & removed this code?\nIf not, Could you please try to set speed based on interface-type in your code as well?\n[Kenny] - We didn't use full BCM SDK to initialize 84794, I just ported phy84793.c to our code base. As I understand, set speed based on interface-type in _phy_84793_init_pass2() just for _phy_84793_speed_set() to select the 84794 mode. Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, so I just call _phy_84793_config_mode to configure 84794 as PHY84793_MODE_10X10G_TO_10X10G_ASYNC directly.  You can find my implementation RSphy_84793_init().\n\n2. Reson for following changes?\n    if (data16 == 0x600D) {\n        //interface = &(INTERFACE(pc));\n        //interface->type = SOC_PORT_IF_SR4; \n        //interface->speed = PHY84793_MODE1_SPD;\n    }\n[Kenny] \u2013 Reason is same as above, Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, don\u2019t need these codes at all. \n\n3. Reason for changes in following?\nphy_84793_speed_set()\n[Kenny] \u2013 Reason is same as above, Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, don\u2019t need these codes at all. \n\n\n4. While reviewing the code we observed that you re-wrote some code for PHY-initialization. As per our understanding, only register-read & write and additional functions, where PHY-driver is trying to get configured mode, should be provided instead of rewriting the init code. It will be difficult for us to validate these additional changes.\n[Kenny] \u2013 I didn\u2019t implement API to get configured mode, just call your API _phy_84793_config_mode to set mode.\n\n5. On the failing case, do you get any error messages from SDK?\n[Kenny] - We didn't use full BCM SDK to initialize 84794, I just ported phy84793.c to our code base. So didn't find any error message.\n\n\n[Kenny] - Because my wrong operatoin last time, I think you didn't see my answers last time, so I do again.\n\n4. What does \u201cSW reset\u201d do?\n[Kenny] - Actually this \"SW reset\" exists in function _phy_84793_rom_firmware_download, we call _phy_84793_rom_firmware_download to download microcode, this \"SW reset\" will be executed automatically. \n\n5. Could you send us the flow/order of API calls/command used on this initialization process?\n\n[Kenny] \u2013 Here is the API calls sequence.\n\n\uf0d8\tHW reset GearBox;\n\uf0d8\tdelay about 1 second;\n\uf0d8\tCall _phy_84793_rom_firmware_download to download micrcode;\n\uf0d8\tDelay 100 ms;\n\uf0d8\tCall _phy_84793_config_mode to set mode as PHY84793_MODE_10X10G_TO_10X10G_ASYNC;\n\uf0d8\tDelay 100 ms;\n\uf0d8\tCall _phy_84793_line_polarity_flip to set polarity swap;\n\uf0d8\tCall _phy_84793_sys_enable_set to enable system side;\n\uf0d8\tCall _phy_84793_line_enable_set to enable line side.\nYou can find this implementation in function RSphy_84793_init().\n\n6. Are you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n[Kenny] \u2013 Yes, we call _phy_84793_rom_firmware_download to download microcode.\n\n7. Important, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n[Kenny] \u2013 Yes, we call _phy_84793_rom_firmware_download to download microcode.", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nHere is the more detailed flow of initialization of the BCM84794:\n    HW reset\n    SW reset\n    delay 200ms\n    Load micro-code\n    delay 100ms (This is the key point)\n    Configure Gearbox mode\n    Check port link status\n\nRegards\nEdison", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nWe have some founds today. When QSFP down issue occur, nPPI related registers below are abnormal.\n      nPPI Analog Control Registers\n      TX: IA.8065, IA.8066, IA.8067\n\nIf the ports link up and work well, these registers value:\n      8065: 0x8800\n      8066: 0x48\n      8067: 0x19F8\n\nBut when link issue occur these registers value:\n      8065:  0x0\n      8066:  0x0\n      8067:  0x0\n\nIf we write these three registers to 0x8800,0x48,0x19F8, the down ports can link up.\n\nWe have question below:\n1. How to configure these three registers value? Registers default setting or write them by microcode?\n2. What could trigger the registers value zero?\n\nFor reset of your questions, those codes are directly copy from the BCM SDK 6.4.3. We have no any change in the APIs. Just make those APIs can work and calling them in the order same as BCM SDK initialization.\n\nRegards\nEdison", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function?     [Kenny] - We use GPIO to pull low 84794 RESETB pin to do HW reset .\n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?   [Kenny] - This function doesn't use till now.\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d? [Kenny] - My code doesn't set TX parameters, I suspect microcode set TX parameters.\n4. Could you add some break points in you SW to track if/when these TX registers are modified? [Kenny] - Again, My code doesn't set TX parameters, I suspect microcode set TX parameters.  But I found a phenomenon that the step 4 (Delay 100ms) affects TX parameters initialization. Please refer below API calls sequence for detail.\n5. Hoe does your board\u2019s connector looks like? Is it one board for 2x40G(QSFP) and another board for 100G, or single board with adapter/converter? Please provide the I/F details.\n [Kyle] - For link up and link down verification, we only verified it on one board,  there have 8 40G QSFP fiber modules on our board, we connect them each two ports, for performance test, we did snake chain and connected two ports to IXIA 40G ports.\n\n84794 API calls sequence: \n\n1.\tHW reset GearBox;\n2.\tdelay about 1 second;\n3.\tCall _phy_84793_rom_firmware_download to download micrcode;\n4.\tDelay 100 ms;   ---  If this delay exists,   TX parameters (Register 0x8065, 0x8066, 0x8067) will be 0. If remove this delay, TX parameters seems right.  Reg 0x8065 value: 0x8800,   0x8066: 0x48,  0x8067: 0x19f8\n5.\tCall _phy_84793_config_mode to set mode as PHY84793_MODE_10X10G_TO_10X10G_ASYNC;\n6.\tDelay 100 ms;\n7.\tCall _phy_84793_line_polarity_flip to set polarity swap;\n8.\tCall _phy_84793_sys_enable_set to enable system side;\n9.\tCall _phy_84793_line_enable_set to enable line side.\n\n\n\nBest regards.\nKenny Xuan", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nI can give you an easy way to reproduce this issue. Only add 10 ms delay to phy84793.c line 4838, this issue will happen. You can try it.\nI also share my modification to you.\n\nBest regards.\nKenny Xuan", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Kenny,\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function? \n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d?\n4. Could you add some break points in you SW to track if/when these TX registers are modified?\n5. Hoe does your board\u2019s connector looks like? Is it one board for 2x40G(QSFP) and another board for 100G, or single board with adapter/converter? Please provide the I/F details.\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Edison,\n\nThe 8066-8067 registers configure the TX pre-emphasis parameters. Their values depend on the configured mode. I believe zero value means not configured (cleared after reset).\nIn both the \u201csuccess\u201d and \u201cfail\u201d register dumps these registers are Zero, yet the success case got link\u2026!\nBottom line: writing to these registers is not a reliable solution, and should be done by the SDK/API calls or micro-controller at the right timing.\n\nI understand you copied the code from SDK 6.4.3, but I still want to see it, especially to review the order they are called.\n\nPlease answer my questions from yesterday:\n4. What does \u201cSW reset\u201d do?\n5. Could you send us the flow/order of API calls/command used on this initialization process?\n6. Are you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n7. Important, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Kenny, \n\n\nFirst, your message on \"26-Mar-2015 08:20:07 PM\" did not go through. When you reply by email, inline comments do not work well, or sometimes do not work at all. The best way to answer is to log-in tho the CSP system and reply (\"Modify\").\nPlease log-in to see how your answer looked like, then reply with the correct answer.\n\n\nWe did a comparison between SDK and your modified code, and have the following questions:\n\n1. In _phy_84793_init_pass2(), in default SDK driver, we download-firmware & set speed based on interface-type. In your modified code, only firmware download is done. \nCould you please let us know if you observed any issues previously here & removed this code?\nIf not, Could you please try to set speed based on interface-type in your code as well?\n\n2. Reson for following changes?\n    if (data16 == 0x600D) {\n        //interface = &(INTERFACE(pc));\n        //interface->type = SOC_PORT_IF_SR4; \n        //interface->speed = PHY84793_MODE1_SPD;\n    }\n\n3. Reason for changes in following?\nphy_84793_speed_set()\n\n4. While reviewing the code we observed that you re-wrote some code for PHY-initialization. As per our understanding, only register-read & write and additional functions, where PHY-driver is trying to get configured mode, should be provided instead of rewriting the init code. It will be difficult for us to validate these additional changes.\n\n5. On the failing case, do you get any error messages from SDK?\n\n\nRegards,\nRonen", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 18-May-2015  3:55PM PST\n---------------------------------------------\nmoving to resolved since no follow up questions.", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 01-Apr-2015  2:09PM PST\n---------------------------------------------\nHi Ronen,\njust as we spoke earlier about this, here are my suggestions:\n1. On the ports that fail, keep them in that state. Are the Pre-emphasis registers 0x0? These are 1.99X4 for VSR, 1.8066, 1.8067 for HEXACORE? \n2. If they are 0x0, set them to a proper value and see if things improve.\n3. Try PRBS generators from these bad lanes. Can the receiver get them? Do you get a scope plot?\n\nBeyond that, most of the debug will have to come from the SDK team at this point as they're in control.\nThanks,\nKK", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Edison,\n\nI am still not clear with questions #3 & #6:\n1. You say with 100mS delay 1-2/300 loops failed, right?  \n    What happens when you do NOT have this 100mS delay, does it fail? How frequent?\n2. You say \u201cEven without QSFP module, the output signal is still low when it fails.\u201d, how can it link without QSFP? Are you using DAC cable in loopback instead?\n3. You say \u201cWe suppose even link is up with other vender QSFP module, there should be many FCS error too\u201d, have you tried it with different vendor\u2019s QSFP? Does it fail in the same frequency (1-2/300)?\n\nAs for the \u201cdetailed flow of initialization\u201d:\n4.\tWhat does \u201cSW reset\u201d do?\n5.\tCould you send us the list of API calls/command used on this flow?\n6.\tAre you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n7.\tImportant, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n\nFYI, here are my comparison's key findings between the files:\nRegister  Pass   Fail       Description\n-----------   ------    ------      -------------------------------------------------------------------------------------\n0x0001     0006 0082     PMA/PMD RX Link is up [2]\n0x0008     B3C1 B7C1   PMA/PMD receive fault [10]\n0x000A    001F  0000     PMD receive signal is detected for Lane3:0=[4:1], [0] AND of Lane [3:0]\n0x9486     0014  0015     Lane 0, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9586     0014  0015     Lane 1, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9686     0014  0015     Lane 2, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9786     0014  0015     Lane 3, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9800     00FF  0000     RX Line side, 25G/10G CDR lock for lane 3:0 [7:4]\n0xF45F     0297  029A    PVTMON Status, VT Monitor data output[9:0]\n\nWe can do a conference call tomorrow if you like, when is a good (California) time for that?\n\nRegards, \nRonen", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\n\n\nPlease see below.\n\n\n\nBest regards.\n\nKenny Xuan", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Edison,\n\nFew questions:\n\n1. What are these 1/300 cases? Power cycle/hard reset? Please elaborate on the failing scenario?\n\n2. Which link is down, system side, line side or both?\n\n3. How much delay you have without adding the 100mS? How many times of 300 it fails with the delay?\n\n4. Which side are these files show: System side or Line side? (TX lines right?)\n\n5. Do you see this low amplitude signal on all 4 lanes?\n\n6. Can you try different QSFP vendor module and let me know if it fails?\n\n7. How do you load the microcode? (SPI/I2C, EEPROM)\n \n8. Do you verify that the microcode load is successfully completed before setting the mode? If not, it is recommended to do it by checking part or all of the following registers: 0xF415, 0xF416, 0xF417, and 0xF41B\n\n9. Please provide register dump for a good and bad case?\n\n10. Do you see the problem in both Gearboxes? In more than one board?\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Joe Uemura[Broadcom Corporation]\nUpdate date: 02-Apr-2015  6:47PM PST\n---------------------------------------------\nHi David:\n\nThis is a standalone driver outside the SDK based on the driver developed by the HSIP software development\nengineers. I believe your team is better qualified to address link issues as well as work with the HSIP\ndevelopment engineers on the standalone driver itself.\n\nThanks!\n\nJoe", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015  2:48PM PST\n---------------------------------------------\nHi Kai,\n\nThank for the call.\n\nThe answers for the first two questions are somewhere below.\nI will ask the customer to provide two new \"fail\" and \"success\" dumps, as well as the PRBS test.\n\nI agree we need some SDK help here, and therefore assign the CSP to Sri.\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 07:04:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\n\n\nSee my comment below. And for initialization related I\u2019d like leave to my software colleague comment.\n\n\n\nI am still not clear with questions #3 & #6:\n\n1. You say with 100mS delay 1-2/300 loops failed, right?  ----100% fail rate with delay\n\n    What happens when you do NOT have this 100mS delay, does it fail? How frequent?---1/300 fail rate\n\n2. You say \u201cEven without QSFP module, the output signal is still low when it fails.\u201d, how can it link without QSFP? Are you using DAC cable in loopback instead?---- We can capture signal in system loopback mode, lane 0-3 are OK, but lane4-7 output is much lower, if no delay between microcode download and GB mode setting, lane0-7 output are all OK.\n\n\n\n3. You say \u201cWe suppose even link is up with other vender QSFP module, there should be many FCS error too\u201d, have you tried it with different vendor\u2019s QSFP? Does it fail in the same frequency (1-2/300)?----other vendor's QSFP TX los threshold is much lower(no SQ function support), so they can link up, performance did not test yet.\n\n\n\n-----\u90ae\u4ef6\u539f\u4ef6-----\n\u53d1\u4ef6\u4eba: BRCM Support - Ronen Joseph [mailto:support@broadcom.com]\n\u53d1\u9001\u65f6\u95f4: Thursday, March 26, 2015 09:56\n\u6536\u4ef6\u4eba: Anny Wang\n\u6284\u9001: andy@questrep.com; Edison Liu; gmobbs@stratustechnical.com; Jacken Zhang (Zhang Jiankeng); jshattuck@stratustechnical.com; Kenny Xuan; Kent Li; kim.kempf@radisys.com; Kyle Fu (Fu Hongming); Matt StPeter; Xiao Yong\n\u4e3b\u9898: [RadiSys] [CASE#903671]: Updated - Critical link failure of BCM84794", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nAttached original/modified codes, please review my modification, thanks!\n\nphy84793_orignal.c   --- From BCM SDK 6.4.3\nphy84793_modified_by_Rsys.c  --- Ported by me based on phy84793_orignal.c. We call function GbBcm84793_Init() to initialize 84794.\n\nBest regards.\nKenny Xuan\n\nFrom: Kenny Xuan\nSent: Friday, March 27, 2015 11:19\nTo: 'BRCM Support - Ronen Joseph'; Anny Wang\nCc: andy@questrep.com; Edison Liu; gmobbs@stratustechnical.com; Jacken Zhang (Zhang Jiankeng); jshattuck@stratustechnical.com; Kent Li; kim.kempf@radisys.com; Kyle Fu (Fu Hongming); Matt StPeter; Xiao Yong\nSubject: RE: [RadiSys] [CASE#903671]: Updated - Critical link failure of BCM84794\n\n\nHi Ronen,\n\n\n\nPlease see below.\n\n\n\nBest regards.\n\nKenny Xuan", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 01-Apr-2015 10:54AM PST\n---------------------------------------------\nHi Ronen,\n\nPlease check my answers blow.\n1. What are these 1/300 cases? Power cycle/hard reset? Please elaborate on the failing scenario?\n[Edison] BCM84794 is HW reset in the case. Two ports(named 1/1, 1/2) on the single Gearbox are connected with each other. When the issue happens, 1/1 shows down while 1/2 is up. Measure signals, output of 1/1 is correct while 1/2 is wrong.\n\n2. Which link is down, system side, line side or both?\n[Edison] Through link status register line side is showing up, but signal is wrong. Setting system loopback on the Gearbox, link is up on the NP5.\n\n3. How much delay you have without adding the 100mS? How many times of 300 it fails with the delay?\n[Edison] There is no delay added in the code without that 100ms. One or two in 300 loops failed in our test.\n\n4. Which side are these files show: System side or Line side? (TX lines right?)\n[Edison] Tx line on Line side.\n\n5. Do you see this low amplitude signal on all 4 lanes?\n[Edison] All 4 lanes.\n\n6. Can you try different QSFP vendor module and let me know if it fails?\n[Edison] Even without QSFP module, the output signal is still low when it fails. Furthermore, there is a register setting(Squelch Function) in the QSFP module. It is a standard register per SFF-8436 implemented in the QSFP module. When this function is disabled, the link does come up, but there will be many FCS error. We suppose even link is up with other vender QSFP module, there should be many FCS error too.\n\n7. How do you load the microcode? (SPI/I2C, EEPROM)\n[Edison] Through MDIO in software.\n \n8. Do you verify that the microcode load is successfully completed before setting the mode? If not, it is recommended to do it by checking part or all of the following registers: 0xF415, 0xF416, 0xF417, and 0xF41B\n9. Please provide register dump for a good and bad case?\n[Edison] Please check register dump as attached. There is no difference regarding these registers.\n\n10. Do you see the problem in both Gearboxes? In more than one board?\n[Edison] Yes we see this issue on all the Gearboxes on all boards.\n\nThanks\nEdison", "CreatedOn": "2017-04-06 07:04:19", "CreatedBy": "admin"}]}, {"Number": "CS2262306", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 12/10/2013 12:59:00 PM PST\n---------------------------------------------\nJason\n\nI am  opening an internal CSP case on this issue.\n\nHad you received any per rail 84794 power \nnumbers earlier?\nI have attached the latest power numbers for the\nBCM84794.  It is from a84794 case even though the it mentions\nthe 84793..\n\nWhat mode or modes are you using the device in?\nThere is mention in the CSP cases that power requirements\nvary based on the mode selected.\n\nThere is a mention of the new requirement for the DVDD supply\nfilter, but the underlying reason is not mentioned.\n\nthanks\n\nsteve", "CreatedOn": "2017-04-09 16:43:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 1/23/2014 12:45:00 PM PST\n---------------------------------------------\n>>Are these transients affecting other parts of your power distribution?\n\nNo these transients are just part of the filtered rail, the main supplies are protected (scope capture attached showing this)\n\n>> Are you using isolated planes for the locally isolated supplies?\n\nYes, I attached a picture showing our layout around the gearbox and the filtered rails. All the filtered rails have planes, we didn't use traces here.\n\nI've attached a pdf of the schematic page for the filtered rails going to gearbox. We\u2019re aware that DVDD (1.0V) and DVDD_IO are required to be filtered now. This update was introduced recently and we did not have it in place during the first rev of our design. \n\nIf it's an option, please have the factory review the scope shots to verify whether there is any concern. The undershoot and ringing is pretty substantial at the time when the gearbox is coming out of reset. The recommended operating voltage for a few of the filtered rails is getting violated here and there are no notes about anything special during device initialization. \n\nWe followed the recommended filtering pretty closely here so I would expect this to be showing up on reference designs on your end as well.", "CreatedOn": "2017-04-09 16:43:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 12/10/2013 2:18:00 PM PST\n---------------------------------------------\nI haven't seen the broken-down power numbers yet, so that file helps a lot.  Thanks.  Up until now, all we had was the max power of 3W for the whole chip.\n\nWe're currently using Mode 1 (100GBASE-LR4) and Mode 3 (100GBASE-SR10).  We also intend to support Mode 4 (10x 10GBASE-SR) but we haven't tested it yet.  \n\nWe're not using any OTN modes (obvious, since we're using the '794).\n\nLet me know if you need anything else.\n\nJason.", "CreatedOn": "2017-04-09 16:43:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/13/2014 1:09:00 PM PST\n---------------------------------------------\nFactory did respond that no such transients are observed on evaluation boards.  They further stated that as long as power sequencing guidelines  were followed they would not expect any problems to be observed on customer designs.  I have challenged factory to point me to power sequencing guidelines since there are none according to data sheets and design guides (unless I've missed something).  Because I still await that factory response, this case is left in its current state, but essentially there is nothing more to add.", "CreatedOn": "2017-04-09 16:43:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 8:09:00 AM PST\n---------------------------------------------\nIt's not surprising there is a lot of trauma when the device is first brought out of reset.  Are these transients affecting other parts of your power distribution, or are the filter circuits adequately protecting the main supplies?  If the phenomena is localized to the isolated supplies, and the device is otherwise OK, there should not be a problem.  That said, we can have the factory review these scope shots to see if the are cause for concern.  There can be a lot that goes into this, such as board layout.  Are you using isolated planes for the locally isolated supplies? Hopefully you are not just routing these in etch.  For completeness, can you add a picture to illustrate whether the transients are finding their way back through the filters to the supplies feeding the filters?  It should be sufficient to use the worst one, which looks like the avdd_rx overshoot on 1v.\n\nPlease fill-in the Customer Project field and Software Version (possibly n/a) on your next update.", "CreatedOn": "2017-04-09 16:43:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/26/2014 5:24:00 AM PST\n---------------------------------------------\nThe folllwing information was provided by our factory.  None of this is actually found in the product data sheet, but these are guidelines that have been used in our own reference designs.  The only suggestion we can offer is that you see how your own board design performs relative to these guidelines.\n---\nThe only power on sequence which we require is that the external RESETb pin should be de-asserted only after the power rails ramp up and has stabilized. We also have an internal POR circuit which will monitor the power rails and keep the chip in reset, this internal POR reset time is set at 8ms after all the power supplies are at known value (i.e. above VT levels). As a general guideline, if we keep the external RESETb pin low for 10ms after the power stabilizes then we will not have any issues.\n---", "CreatedOn": "2017-04-09 16:43:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 8:17:00 AM PST\n---------------------------------------------\nPlease also attach the schematic page(s) that show the filtering circuits implemented for each supply in the pictures.", "CreatedOn": "2017-04-09 16:43:30", "CreatedBy": "admin"}]}, {"Number": "CS2272545", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Apr-2014 12:42PM PST\n---------------------------------------------\nTrying to put your last post into a more complete context.  I believe your response had to do with my suggestion to look for another failure indication besides PRBS failure. Here is how I am interpreting the information.  Please confirm or correct.\n\n> We observe that System Side CDR lock are down for all the lanes in case of failure.\nPerform microcode load.  Check for success.  Do *not* add additional delay.\nSet 0x80B1=0x7\nRead 0x80B0.12=0\n\n> So the link is not up before we can send a packet.\nWhere do you observe link-down?\nDo you observe link-down as high-level status, perhaps through IEEE_PMA_PMD_STATUS_1 bit 2, or does this show link-up since it uses line-side CDR lock?\nWhat is in CDR Control (Register Address: 0x9800) ?\n\nIt's also been asked if this problem repeats on multiple boards/chips.  How large is your sample size?", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 09-Apr-2014  3:31PM PST\n---------------------------------------------\nIs there no other indication of failure other than through PRBS testing?  If you try to pass normal traffic rather than test patterns, how does that go?  Just trying to isolate whether there is some specific mode of operation that is not ready to go, or if it a more general problem.  Please attach the PRBS test sequence as well.", "CreatedOn": "2017-04-09 18:07:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Apr-2014  6:39AM PST\n---------------------------------------------\nCan't type this morning.  Replace \"CFR clock\" with \"CDR lock\" in prior post.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 25-Apr-2014  5:58AM PST\n---------------------------------------------\nI think we may want to shift our focus to 0x8050 as we mentioned early. \n\nWe have found a easy to reproduce this:\n1. Reset through pin\n2. Do the hard reset through register then download microcode (same procedure in the early attached file)\n3. Set 0xF403 to 0xa (mode 3)\n\nExpected to see:\n1. When in reset, 0xf454 reads 0xffff as expected. After reset is cleared, 0xf454 reads 0\n2. Right after microcode download, 0xf454 reads 0x821e. We do not know the timing when this happened. It could during or right after download it finish.\n3. After mode 3 is being configured, constantly read 0xf454 you will eventually see 0xf454 becomes 0x8050\n\nI believe we have briefly discussed about this in the meeting. We would love to see if there is a way to know that the micro controller is using these indirect control registers. The fact that when writing 0xa to 0xF403 triggers \"something\" in the indirect control registers raises the concern this could happen at any time. We have no insight when this will happen again (and we don't want to know every single case). Reproducing the PRBS failure does not guarantee similar race condition does not occur in some other way. \n\nWe couldn't find 0x8050 in the SDK, but it was used several places in the scripts in the eval kit (version 8 for example, deca_hexa_utils, dc_check_status):\n\n 'check pll lock\n         rddata = dc_pcb_read( device, Get_32bit_val(lane,&H8050&), 0)", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 10-Apr-2014  9:17AM PST\n---------------------------------------------\nWe haven't tried out packet test when the failure happens. We will run a packet test shortly. When the failure happens, what information can be gathered that will help this investigation? Any registers that may provide valuable information?", "CreatedOn": "2017-04-09 18:07:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 15-Apr-2014  1:36PM PST\n---------------------------------------------\n1. Yes. For each lane on System Side. Observed all lanes on the system side have no CDR lock.\nSet 0x80B1=0x7\nRead 0x80B0.12=0\n\n2. We have found the line side are good. The CDR is locked on all lanes (including 0x9800). PRBS on line side has no failures.\n\nWe observed about 5 failures in 100 runs.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 07-Apr-2014 12:48PM PST\n---------------------------------------------\nWe haven't really made any progress looking for this phantom delay.  In order to possibly zero-in better, please augment the initial description with a register-by-register list of what's done during your bring-up sequence.  If there are any chip resets, let us know how long they are active and how long before code proceeds again.  We want to emulate your sequence as closely as possible.  Note for us where you find that delay(s) are required.  We should be able to recreate something very close to your sequence using a test board.  Thanks.", "CreatedOn": "2017-04-09 18:07:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Apr-2014  6:33AM PST\n---------------------------------------------\nThis is another situation where we need to try to divide-and-conquer the paths involved.  Please repeat the test using loopback (register 0xF457 = 0x03FF).  If there is still a CFR clock problem we may need to look at switch settings.\n\n(Note that I have filled-in the missing Customer Project field.  Please verify.)", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 10-Apr-2014  9:43AM PST\n---------------------------------------------\nNo obvious registers, but maybe if we can try this ourselves we will have more ideas.  Checking now with factory AE on how we can best proceed on this.  We don't have this hardware in the field to try it locally.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Jun-2014  9:20AM PST\n---------------------------------------------\nWe haven't talked about this one in a while.  Can you add an update and if applicable make a note that it can be resolved?", "CreatedOn": "2017-04-09 18:07:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 11-Dec-2014  7:10AM PST\n---------------------------------------------\nResolving due to inactivity.  Also acknowledge we were unable to recreate the same behavior.", "CreatedOn": "2017-04-09 18:07:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Mar-2014  9:30AM PST\n---------------------------------------------\nBased on review of the phy_84793_init() code in /src/soc/phy/phy84793.c, there is no explicit delay I could find coded after the microcode download, but there is quite a bit of additional work being done.  It may just be that the delay you require is normally consumed by more complete initialization code.  You should review this code to see if you might be skipping a step or if it otherwise explains the scenario.  Since you are not using the SDK driver you could easily run into something not otherwise observed.  If they delay is not otherwise a problem for you, leave it in place.  If problems still persist we'll need to investigate further.", "CreatedOn": "2017-04-09 18:07:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 15-Apr-2014  6:51AM PST\n---------------------------------------------\nWe observe that System Side CDR lock are down for all the lanes in case of failure. So the link is not up before we can send a packet.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 09-Apr-2014  2:10PM PST\n---------------------------------------------\nUploaded our initialization sequence. \n\nThere are comments in the log of different blocks/steps for the initialization. You may find our address all have 0x10000 in addition to the address, that's pmd/pma device id used in MDIO access. Please ignore.\n\nWe think the race condition happens after \"Verify MCODE version and checksum\" and during \"Setting to Mode 3\". \n\nI give an example how we apply our tx settings. When apply that right after Verify MCODE version and checksum\" with no delay, the initialization will fail with 5% (verified by running prbs afterwards).\n\nSimilarly, we've found we need a delay after we set the mode in 0x1f403.", "CreatedOn": "2017-04-09 18:07:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 16-Apr-2014 11:25AM PST\n---------------------------------------------\nWill try with the loopback shortly.\n\nIf the factory has not been able to reproduce any problem, in the log attached, there is a section of \n--------- Apply Our Tx Settings ------------------\n\nAs I mentioned early, doing this section right after microcode download may also reproduce some failure. \n\nAfter the initialization, we suggest to check CDR locks on all lanes. Then try system side PRBS.\n\nWhen we last mentioned link check failed, we refer to the system side CDR locks are lost.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 29-Apr-2014  5:46AM PST\n---------------------------------------------\nAs suspected/discussed earlier, 0x8050 is related to checks of the system-side PLL lock status.  It is accessed by firmware onlly when the mode is changes, as through register 0xF403 (COMMON_USER_MODESEL_REG).  During normal operation there is no chance of a race condition with indirect accesses, as firmware will not intervene with any indirect register access from the application code.", "CreatedOn": "2017-04-09 18:07:30", "CreatedBy": "admin"}]}, {"Number": "CS1695568", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 09-Jun-2015 11:18AM PST\n---------------------------------------------\nHi KaiMing,\nI would pull it up. Having it connect to the 56640 makes NO sense as you'd be measuring it's Signal Detect rather than the PHY's.\n\nTo check incoming link and signal status, your software will need to poll register 1.9800 and 1.980A or CDR lock and LOS respectively. Please see DS for more details.\nThanks,\nKK", "CreatedOn": "2017-04-06 07:43:44", "CreatedBy": "admin"}]}, {"Number": "CS1699231", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 28-Jul-2015 10:34AM PST\n---------------------------------------------\nHi David,\nThere is a clock requirement for BCM84794, where system side clock needs to be in sync with PHy reference clock.\n\nCOuld you please make sure NPU and PHY are running on same 156.25Mhz clock and that might help us not seeing alignnment errors on the IXIA recieve.\n\nDetails of this clocking requirement are mentioned in HWUM and SWUM.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 30-Jul-2015 11:40AM PST\n---------------------------------------------\nHi David,\n\n84794 does NOT have the capability to use Egress system side recovered clock to retime out on line side TX.\nif this was available, we'd have suggested it as well as note it in collaterals.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 04-Aug-2015  6:45AM PST\n---------------------------------------------\nLeaving resolved.  Customer now reports that using a copy of the NPU clock fixes all issues and they are fine.\n\nDavid", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015 10:01AM PST\n---------------------------------------------\nSo Cisco is basically screwed right now.  I don't think they can get the NPU clock up to this module.  They are asking this question but I think if we could have done this we would have done it a long time ago to remove this limitation.  My guess is that is in the metal layers and not programable but here goes\n\n------------------------------------------------------------------------------\n\nI am wondering if Broadcom can do some changes in the microcode to use the\nrecovered clock from the system-side incoming data to clock out data in\nthe line-side transmitter, instead of using the RelClk.\n\nCan you please discuss this request with the factory to see if it is\npossible?", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 04-Aug-2015  6:46AM PST\n---------------------------------------------\nre marking resolved because CSP is stupid", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: Al Kozloski[Broadcom Corporation]\nUpdate date: 30-Jul-2015 12:07PM PST\n---------------------------------------------\nJust FYI, Nishant's statement:\n\nDetails of this clocking requirement are mentioned in HWUM and SWUM.\n\nis incorrect. The 84793 SWUM (I am looking at pg 24) does not mention this.\n\nAlso, I would recommend that these documents be \"copied\" with titles appropriately reflecting that they apply to 84794.\n\nThanks,\nAl", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 30-Jul-2015 10:20AM PST\n---------------------------------------------\nHey David,\n\nplease provide a block diagram of customer setup.\nwe need to understand how data is routed from source to tester.\nthis is a request for test w/ IXIA only correct?\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015  1:05PM PST\n---------------------------------------------\nThat is exactly what I figured but I had to ask so that I left no \"Stoenner\" unturned\n\nThanks\n\nDavid", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 28-Jul-2015 10:17AM PST\n---------------------------------------------\nAdded picture of IXIA with errors on screen", "CreatedOn": "2017-04-06 08:13:33", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015 11:25AM PST\n---------------------------------------------\nThe layout is simple.\n\nNPU with its own clock drives this module with 84794 with its 156.25 XTAL oscillator which drives a SR10 fiber module which then goes over fiber to the IXIA (in this case).\n\n100GSR10 mode\n\nIXIA is recording the BIP8 and sync framing errors.  NPU is not showing any errors.\n\nThey are clearly violating the statement in our HWUM page 18 about not having a synchronous to NPU clock because the REFCLK is used for the Line side CMU to clock out the FIFO to the TX drivers.  They are asking that we use the recovered system clock to clock the line side transmit CMU instead.\n\nDavid", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 31-Jul-2015  4:14AM PST\n---------------------------------------------\nOK, I got this email with a lot of assertions.  I have told them about the special FIFOs for loopback but I am unsure about the clock usage.  My guess is that in loopback the RX recovered clock on the line side is used to clock the Line side TX not REFCLK hence no errors.\n\nCan somebody list the answers that I need to return\n\nThanks\n\nDavid\n\n--------------------------------------------------------------------------------------------\n\nHi David,\n\nI have digested the information that we have so far for our PCS link\nstatus on our card more deeply by combining the information that you have\ngiven to us.  My conclusion is that the RefClk synchronization issue with\nsystem-side incoming data on our card simply can not be the root cause for\nour PCS link status issue, it is simply technically impossible and it\ncontradicts with the evidences we have collected during our investigations.\n\nAs I have told you in the previous emails, we have done line-side loopback\ntests, and the system-side loopback tests for the investigation.\n\nIn our line-side loopback tests, we have seen no PCS link status issue, no\nBIP-8 errors, no PCS synch errors. Every ethernet I sent from the ixia\ninto BCM84794 gets perfectly looped back into ixia 100G port with no CRC\nerror. \nThe RefClk synchronization issue has impacts on the line-side transmitter\ndata clocking out as it is documented in the HW user manual. But I don\u00b9t\nsee any effect from it on my line-side loopback tests. Can you explain to\nme why it behaves this way in the loopback tests?\n\n\nIn our system-side loopback tests, the line-side transmitter has zero\nroles in it, but I still see the link status failure on the NPU\u00b9s 100G\nport which is directly connected to the BCM84794 system-side. Can you\nexplain to me why the link status is still down in the system-side\nloopback when the line-side transmitter has zero role?\n\n\nLabelling the RefClk synchronization issue as the root cause for our link\nstatus issue just simply contradicts with the evidences in our line-side\nand system-side loopback tests, and we are not convinced by that based\nupon the evidence we collected.\n\n\nCan you please help us to tightly engage with your R&D to resolve this\nlink status issue?\n\nI made a suggestion to have a webex conference call with you to present\nall of evidences we have collected during our investigation so that you\ncan accurately have all of information. But we never get response from you\nfor this suggestion, why is that?", "CreatedOn": "2017-04-06 08:13:34", "CreatedBy": "admin"}]}, {"Number": "CS1806933", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015  1:10PM PST\n---------------------------------------------\nRich,\n\nAre you working with Hongwei Li as I thought he said his loader was working fine and getting checksum and REV level? \n\nDavid", "CreatedOn": "2017-04-06 08:15:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 12-Aug-2015  8:57AM PST\n---------------------------------------------\nDave,\n\nCisco attached a psuedo code version of what they are doing in this test code for download.  I have attached it for you to look at.  I have seen the following:\n\n-------------------------------------------------------------------------\n\nRich,\n\nI see at least 1 issue.  In your routine\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\nroutine polls for micro message out\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\nsn_diag_rc bcm84794_poll_msgout (void)\n{\n    uint16_t value;\n    int timeout = 1000000; /*us*/\n\n\n    /* POLL EISR FOR MSGOUT */\n    status = SN_DIAG_TIMEOUT;\n    while (--timeout > 0)\n    {\n        dapi_delay (US_SCALE, 1);\n        rc = phy_read (port_addr, 1.F409, &value);\n        if ((value & bit-5) != 0)\n        {\n            status = SN_DIAG_SUCCESS;\n            break;\n        }\n    }\n\n    /* CLEAR MSGOUT INT STATUS */\n    rc = phy_write (port_addr, 1.F409, (value | bit-5));\n    return status;\n\nbetween the success of see bit 5 =1 you are supposed to have another read of f409.  So it should look like\n\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\nroutine polls for micro message out\n///////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////\nsn_diag_rc bcm84794_poll_msgout (void)\n{\n    uint16_t value;\n    int timeout = 1000000; /*us*/\n\n\n    /* POLL EISR FOR MSGOUT */\n    status = SN_DIAG_TIMEOUT;\n    while (--timeout > 0)\n    {\n        dapi_delay (US_SCALE, 1);\n        rc = phy_read (port_addr, 1.F409, &value);\n        if ((value & bit-5) != 0)\n        {\n            status = SN_DIAG_SUCCESS;\n            break;\n        }\n    }\n\n rc = phy_read (port_addr, 1.F409, &value);  <---inserted\n\n    /* CLEAR MSGOUT INT STATUS */\n    rc = phy_write (port_addr, 1.F409, (value | bit-5));\n    return status;\n\nAlso since this is psuedo code you might have this correct but\n\n /* LOAD UCODE */\n    for (idx=0; idx<size; idx+=2)\n    {\n        status = bcm84794_micro_ready_next_msg ();\n        value = (ucode[idx] << 8) | ucode[idx+1];\n        rc = phy_write (port_addr, 1.F414, wr_value);\n    }\n\nSB \n\nwr_value = (ucode[idx] << 8) | ucode[idx+1];\n\nI could not see anything else but will send this to the factory to see if they see anything\n\nDavid\n\n-----------------------------------------------------------------------------------------------\n\nThen outside of this they read 1.f417 and 1.f41b.  Checksum is correct, also not that chip ID registers are correct after the download.  When the y use the SDK driver REV comes back at 11.  Strange\n\nDavid", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015  1:10PM PST\n---------------------------------------------\nHi David,\n\nBased on reading the chip id register(0xF400) and the rev id register (0xF401), I believe the firmware is loaded.\nReg(0xF400)=0x4794\nReg(0xF401)=0x08/0xA1\n\nI am questing the microcode version that based on the spec is supposed to be accessed via the general-purpose scratch-pad register 0 (0xF417).\nbcm84794_edc_ucode_load(): Reg(0xF41B)=0x600D\nbcm84794_edc_ucode_load(): Reg(0xF417)=0x0000\n\nAs you can see the checksum is correct.\n\nRegards,\n\nRich....", "CreatedOn": "2017-04-06 08:15:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 17-Aug-2015  5:57AM PST\n---------------------------------------------\nCisco added the extra read and it didn't make any difference.  The other point was a typo\n\nWe need something here but not sure why it is broken.\n\nDavid", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 10-Aug-2015 11:41AM PST\n---------------------------------------------\nHi David,\n\nHow is FW loaded in to 84794? are they using external SPI or via MDIO?\ninternal checksum is a simple XOR function. it can return a good checksum under certain condidtions so customer needs to check for correct version ID to ensure FW loaded correctly.\n\nif customer is reading back 1.F417=0, it's likely FW loaded is just a file of \"0\"s.\nplease make sure external SPI is correctly programmed if used.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015  1:10PM PST\n---------------------------------------------\nRich,\n\nYou finished the message out section and at the end of the code load you got 0x4321 in 1.f413?  I agree that with the 3 out of the 4 registers being loaded up with correct values it seems correct but once you think you have loaded all bytes you have to go through the wait for message out sequence one more time.\n\nDavid", "CreatedOn": "2017-04-06 08:15:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 20-Aug-2015  7:54AM PST\n---------------------------------------------\nWell we finally got a MDIO trace on what was going on.  Found a few little issues.  Once we got over that then I saw that he was byte reversed in his data download.  That would get the same correct byte checksum.  He loaded the correct number of 16 bit words so he gets 4321 at the end but once the 8051 jumped to the code, it would never come up with the REV.\n\nI keep learning :-)\n\nThanks for helping\n\nDavid", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Jul-2015  1:10PM PST\n---------------------------------------------\nHi David,\n\nSorry for the delay....\n\nTo your question on register 1.F413, yes I am reading this register and verifying that it contains 0x4321.\nThis is performed after a wait for the message out status (Reg:1.F409 - Bit 5 is detected as set).\nThe following is a register dump performed after the done check:\nReg(1.F410) = 0x0000\n Reg(1.F411) = 0x0000\n Reg(1.F412) = 0x8004\n Reg(1.F413) = 0x0000\n Reg(1.F414) = 0x0016\n Reg(1.F415) = 0x0005\n Reg(1.F416) = 0x60FF\n Reg(1.F417) = 0x0000\n Reg(1.F418) = 0x0000\n Reg(1.F419) = 0x0000\n Reg(1.F41A) = 0x0000\n Reg(1.F41B) = 0x600D\n Reg(1.F41C) = 0x0000\n Reg(1.F41D) = 0x0000\n Reg(1.F41E) = 0x0000\n Reg(1.F41F) = 0x0000\n Reg(1.F420) = 0x0000\n Reg(1.F421) = 0x0000\n Reg(1.F422) = 0x0000\n Reg(1.F423) = 0x0000\n Reg(1.F424) = 0x0000\n Reg(1.F425) = 0x0000\n Reg(1.F426) = 0x0000\n Port 10 BCM84794_CHIP_ID_REG(0) = 0x4794\n Port 10 BCM84794_REV_ID_REG(0) = 0x08/0xA1\n\nI also tried clearing/setting bit 3 of 1.F402 (common control 1 register) which reboots the microcontroller and got the same results.\nIn addition, I am seeing the results on three-(3) different 84794 devices, and I also confirmed that both Hongwei and I are using the same ucode file.\n\nRegards,\n\nRich...", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 10-Aug-2015 12:25PM PST\n---------------------------------------------\nThey are using MDIO.  Based on your comments about a file of all 0's, I have asked that they get a MDIO probe and lets capture the sequence of transactions to load a few 16 bit words and see what we get.\n\nI thought the checksum was programmatically calculated by the 8051.\n\nDavid", "CreatedOn": "2017-04-06 08:15:08", "CreatedBy": "admin"}]}, {"Number": "CS2438972", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/24/2015 4:18:00 PM PST\n---------------------------------------------\nHi Edison,\n\nFew questions:\n\n1. What are these 1/300 cases? Power cycle/hard reset? Please elaborate on the failing scenario?\n\n2. Which link is down, system side, line side or both?\n\n3. How much delay you have without adding the 100mS? How many times of 300 it fails with the delay?\n\n4. Which side are these files show: System side or Line side? (TX lines right?)\n\n5. Do you see this low amplitude signal on all 4 lanes?\n\n6. Can you try different QSFP vendor module and let me know if it fails?\n\n7. How do you load the microcode? (SPI/I2C, EEPROM)\n \n8. Do you verify that the microcode load is successfully completed before setting the mode? If not, it is recommended to do it by checking part or all of the following registers: 0xF415, 0xF416, 0xF417, and 0xF41B\n\n9. Please provide register dump for a good and bad case?\n\n10. Do you see the problem in both Gearboxes? In more than one board?\n\nThanks,\nRonen", "CreatedOn": "2017-03-31 01:38:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Xiao Yong[Radisys Corporation]\nUpdate date: 3/25/2015 7:15:00 PM PST\n---------------------------------------------\nHi Ronen,\n\n\n\nSee my comment below. And for initialization related I\u2019d like leave to my software colleague comment.\n\n\n\nI am still not clear with questions #3 & #6:\n\n1. You say with 100mS delay 1-2/300 loops failed, right?  ----100% fail rate with delay\n\n    What happens when you do NOT have this 100mS delay, does it fail? How frequent?---1/300 fail rate\n\n2. You say \u201cEven without QSFP module, the output signal is still low when it fails.\u201d, how can it link without QSFP? Are you using DAC cable in loopback instead?---- We can capture signal in system loopback mode, lane 0-3 are OK, but lane4-7 output is much lower, if no delay between microcode download and GB mode setting, lane0-7 output are all OK.\n\n\n\n3. You say \u201cWe suppose even link is up with other vender QSFP module, there should be many FCS error too\u201d, have you tried it with different vendor\u2019s QSFP? Does it fail in the same frequency (1-2/300)?----other vendor's QSFP TX los threshold is much lower(no SQ function support), so they can link up, performance did not test yet.\n\n\n\n-----\u90ae\u4ef6\u539f\u4ef6-----\n\u53d1\u4ef6\u4eba: BRCM Support - Ronen Joseph [mailto:support@broadcom.com]\n\u53d1\u9001\u65f6\u95f4: Thursday, March 26, 2015 09:56\n\u6536\u4ef6\u4eba: Anny Wang\n\u6284\u9001: andy@questrep.com; Edison Liu; gmobbs@stratustechnical.com; Jacken Zhang (Zhang Jiankeng); jshattuck@stratustechnical.com; Kenny Xuan; Kent Li; kim.kempf@radisys.com; Kyle Fu (Fu Hongming); Matt StPeter; Xiao Yong\n\u4e3b\u9898: [RadiSys] [CASE#903671]: Updated - Critical link failure of BCM84794", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/27/2015 4:07:00 PM PST\n---------------------------------------------\nHi Kenny, \n\n\nFirst, your message on \"26-Mar-2015 08:20:07 PM\" did not go through. When you reply by email, inline comments do not work well, or sometimes do not work at all. The best way to answer is to log-in tho the CSP system and reply (\"Modify\").\nPlease log-in to see how your answer looked like, then reply with the correct answer.\n\n\nWe did a comparison between SDK and your modified code, and have the following questions:\n\n1. In _phy_84793_init_pass2(), in default SDK driver, we download-firmware & set speed based on interface-type. In your modified code, only firmware download is done. \nCould you please let us know if you observed any issues previously here & removed this code?\nIf not, Could you please try to set speed based on interface-type in your code as well?\n\n2. Reson for following changes?\n    if (data16 == 0x600D) {\n        //interface = &(INTERFACE(pc));\n        //interface->type = SOC_PORT_IF_SR4; \n        //interface->speed = PHY84793_MODE1_SPD;\n    }\n\n3. Reason for changes in following?\nphy_84793_speed_set()\n\n4. While reviewing the code we observed that you re-wrote some code for PHY-initialization. As per our understanding, only register-read & write and additional functions, where PHY-driver is trying to get configured mode, should be provided instead of rewriting the init code. It will be difficult for us to validate these additional changes.\n\n5. On the failing case, do you get any error messages from SDK?\n\n\nRegards,\nRonen", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/31/2015 7:07:00 PM PST\n---------------------------------------------\nHi Kenny,\n\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function?     [Kenny] - We use GPIO to pull low 84794 RESETB pin to do HW reset .\n[Broadcom] OK. Could you please point out the code which is doing GPIO call to pull down.\nIs it done from Ezchip side and we don't see that code in PHY driver that you shared?\n\nFor now, we will assume that h/w reset is being done. However, could you please verify for sequence & timing correctness.\nAlso, is it possible that there is unintended reset being done by other parts of the code/system?\n\n\n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?   [Kenny] - This function doesn't use till now.\n[Broadcom] As we have not tested/run code without reset on our systems, it is hard to qualify your code changes.\nCould you please adjust your code to follow same sequence (including the reset) as SDK phy driver?\n\n\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d? [Kenny] - My code doesn't set TX parameters, I suspect microcode set TX parameters.\n[Broadcom] I think, PHY driver sets it to default preemphasis values. However, SDK exposes \"SOC_PHY_CONTROL_PREEMPHASIS\" to let customer tune the preemphasis values based on Board-design.\n\nEarlier, in the CSP log we observed that preemphasis values were read as zero in issue state. Value zero is not expected, and it will cause the amplitude to be low as sen on your TX captures.\n\nFYI, regardless this problem, I think you need to set correct preemphasis values suitable to the board by using above PHY_CONTROL.\n\n\nAdditionally, we have reviewed the driver code and preemphasis values are being set to zero if mode is PHY84793_MODE_10X10G_TO_4X25G. We have to make sure that on your system we are never hitting this mode. To be sure about this, could you please follow the same sequence that original PHY driver is following in _phy_84793_init_pass2() to set the speed. (you can change the configured mode later in code)\n\nRegards,\nRonen", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Edison Liu[Radisys Corporation]\nUpdate date: 3/24/2015 10:10:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nPlease check my answers blow.\n1. What are these 1/300 cases? Power cycle/hard reset? Please elaborate on the failing scenario?\n[Edison] BCM84794 is HW reset in the case. Two ports(named 1/1, 1/2) on the single Gearbox are connected with each other. When the issue happens, 1/1 shows down while 1/2 is up. Measure signals, output of 1/1 is correct while 1/2 is wrong.\n\n2. Which link is down, system side, line side or both?\n[Edison] Through link status register line side is showing up, but signal is wrong. Setting system loopback on the Gearbox, link is up on the NP5.\n\n3. How much delay you have without adding the 100mS? How many times of 300 it fails with the delay?\n[Edison] There is no delay added in the code without that 100ms. One or two in 300 loops failed in our test.\n\n4. Which side are these files show: System side or Line side? (TX lines right?)\n[Edison] Tx line on Line side.\n\n5. Do you see this low amplitude signal on all 4 lanes?\n[Edison] All 4 lanes.\n\n6. Can you try different QSFP vendor module and let me know if it fails?\n[Edison] Even without QSFP module, the output signal is still low when it fails. Furthermore, there is a register setting(Squelch Function) in the QSFP module. It is a standard register per SFF-8436 implemented in the QSFP module. When this function is disabled, the link does come up, but there will be many FCS error. We suppose even link is up with other vender QSFP module, there should be many FCS error too.\n\n7. How do you load the microcode? (SPI/I2C, EEPROM)\n[Edison] Through MDIO in software.\n \n8. Do you verify that the microcode load is successfully completed before setting the mode? If not, it is recommended to do it by checking part or all of the following registers: 0xF415, 0xF416, 0xF417, and 0xF41B\n9. Please provide register dump for a good and bad case?\n[Edison] Please check register dump as attached. There is no difference regarding these registers.\n\n10. Do you see the problem in both Gearboxes? In more than one board?\n[Edison] Yes we see this issue on all the Gearboxes on all boards.\n\nThanks\nEdison", "CreatedOn": "2017-03-31 01:38:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/26/2015 4:12:00 PM PST\n---------------------------------------------\nHi Edison,\n\nThe 8066-8067 registers configure the TX pre-emphasis parameters. Their values depend on the configured mode. I believe zero value means not configured (cleared after reset).\nIn both the \u201csuccess\u201d and \u201cfail\u201d register dumps these registers are Zero, yet the success case got link\u2026!\nBottom line: writing to these registers is not a reliable solution, and should be done by the SDK/API calls or micro-controller at the right timing.\n\nI understand you copied the code from SDK 6.4.3, but I still want to see it, especially to review the order they are called.\n\nPlease answer my questions from yesterday:\n4. What does \u201cSW reset\u201d do?\n5. Could you send us the flow/order of API calls/command used on this initialization process?\n6. Are you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n7. Important, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n\nThanks,\nRonen", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Anny Wang[Radisys Corporation]\nUpdate date: 3/29/2015 7:40:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nThank you for your reminding! I answered your question on CSP directly this time. Please see my remark below.\n\n1. In _phy_84793_init_pass2(), in default SDK driver, we download-firmware & set speed based on interface-type. In your modified code, only firmware download is done. \nCould you please let us know if you observed any issues previously here & removed this code?\nIf not, Could you please try to set speed based on interface-type in your code as well?\n[Kenny] - We didn't use full BCM SDK to initialize 84794, I just ported phy84793.c to our code base. As I understand, set speed based on interface-type in _phy_84793_init_pass2() just for _phy_84793_speed_set() to select the 84794 mode. Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, so I just call _phy_84793_config_mode to configure 84794 as PHY84793_MODE_10X10G_TO_10X10G_ASYNC directly.  You can find my implementation RSphy_84793_init().\n\n2. Reson for following changes?\n    if (data16 == 0x600D) {\n        //interface = &(INTERFACE(pc));\n        //interface->type = SOC_PORT_IF_SR4; \n        //interface->speed = PHY84793_MODE1_SPD;\n    }\n[Kenny] \u2013 Reason is same as above, Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, don\u2019t need these codes at all. \n\n3. Reason for changes in following?\nphy_84793_speed_set()\n[Kenny] \u2013 Reason is same as above, Because I know we should configure 84794 to PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode, don\u2019t need these codes at all. \n\n\n4. While reviewing the code we observed that you re-wrote some code for PHY-initialization. As per our understanding, only register-read & write and additional functions, where PHY-driver is trying to get configured mode, should be provided instead of rewriting the init code. It will be difficult for us to validate these additional changes.\n[Kenny] \u2013 I didn\u2019t implement API to get configured mode, just call your API _phy_84793_config_mode to set mode.\n\n5. On the failing case, do you get any error messages from SDK?\n[Kenny] - We didn't use full BCM SDK to initialize 84794, I just ported phy84793.c to our code base. So didn't find any error message.\n\n\n[Kenny] - Because my wrong operatoin last time, I think you didn't see my answers last time, so I do again.\n\n4. What does \u201cSW reset\u201d do?\n[Kenny] - Actually this \"SW reset\" exists in function _phy_84793_rom_firmware_download, we call _phy_84793_rom_firmware_download to download microcode, this \"SW reset\" will be executed automatically. \n\n5. Could you send us the flow/order of API calls/command used on this initialization process?\n\n[Kenny] \u2013 Here is the API calls sequence.\n\n\uf0d8\tHW reset GearBox;\n\uf0d8\tdelay about 1 second;\n\uf0d8\tCall _phy_84793_rom_firmware_download to download micrcode;\n\uf0d8\tDelay 100 ms;\n\uf0d8\tCall _phy_84793_config_mode to set mode as PHY84793_MODE_10X10G_TO_10X10G_ASYNC;\n\uf0d8\tDelay 100 ms;\n\uf0d8\tCall _phy_84793_line_polarity_flip to set polarity swap;\n\uf0d8\tCall _phy_84793_sys_enable_set to enable system side;\n\uf0d8\tCall _phy_84793_line_enable_set to enable line side.\nYou can find this implementation in function RSphy_84793_init().\n\n6. Are you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n[Kenny] \u2013 Yes, we call _phy_84793_rom_firmware_download to download microcode.\n\n7. Important, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n[Kenny] \u2013 Yes, we call _phy_84793_rom_firmware_download to download microcode.", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 3/31/2015 10:35:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nI can give you an easy way to reproduce this issue. Only add 10 ms delay to phy84793.c line 4838, this issue will happen. You can try it.\nI also share my modification to you.\n\nBest regards.\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 4/1/2015 10:35:00 PM PST\n---------------------------------------------\nHi Ronen,\n\n\n\nI do not have a system with TDxx, BCM84794, and QSFP modules. I submitted a request for our engineering team to test your suggestion to reproduce this, but this will take some time...\n\n[Kenny] - Thanks!\n\n\n\nCould you please answer my questions from \"31-Mar-2015 07:07:28 PM\"?\n\n[Kenny] - Sure, please see below.\n\n\n\nThe \"GearBox1_success.txt\" dump you uploaded on 3/24 shows the pre-emphasis registers as zero, which does not make sense. Please redo and upload the register dump of a \"fail\" and \"success\" cases?\n\n[Kenny] - I am very sorry I made a mistake. All registers values in GearBox1_success.txt and GearBox1_fail.txt are just for directly registers, indirectly registers' values are wrong. Because I didn't port API for indirectly register that time.\n\nFor now I can tell you that if the ports link up and work well, Line Side nPPI TX registers value:\n\n      8065: 0x8800\n\n      8066: 0x48\n\n      8067: 0x19F8\n\n\n\nBut when link issue occur these registers value:\n\n      8065:  0x0\n\n      8066:  0x0\n\n      8067:  0x0\n\nAt this time, if I changed these registers value as the right case, this issue will be fixed.\n\n\n\nOn the ports that fail, keep them in that state, and try PRBS generators from these bad lanes. Can the receiver get them? Do you get a scope plot?\n\n[Kenny] \u2013 Yes, if I changed nPPI TX registers value as the right case, this issue will be fixed.\n\n\n\nYour questions from \"31-Mar-2015 07:07:28 PM\":\n\n\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function?     [Kenny] - We use GPIO to pull low 84794 RESETB pin to do HW reset .\n\n[Broadcom] OK. Could you please point out the code which is doing GPIO call to pull down.\n\nIs it done from Ezchip side and we don't see that code in PHY driver that you shared?\n\n[Kenny] - Yes, it is done by EZchip, the codes in other file. Please see the detailed codes.  We pull down 84794 RESETB pin 150 ms, then pull it up.\n\n\n\n    /* ---> to pull down the reset pin */\n\n    result = file->f_op->write(file, buf_wr, 1, &file->f_pos);\n\n    if(result < 0)\n\n    {\n\n        EZdev_LOG( EZdev_LOG_ERR, \"EZdevSplitK, write %s failed.\\n\", np_dev);\n\n    }\n\n\n\n    result = file->f_op->read(file, buf_rd, 1, &file->f_pos);\n\n    if(result < 0)\n\n    {\n\n        EZdev_LOG( EZdev_LOG_ERR, \"EZdevSplitK, write reset %s failed.\\n\", np_dev);\n\n    }\n\n    /* EZdev_LOG( EZdev_LOG_ERR, \"buf2-->%d\\n\", buf_rd[0]); */\n\n\n\n    msleep(150);\n\n\n\n    /* ---> to pull up the reset pin */\n\n    sprintf(buf_wr,\"%s\", RS_NP_UNRESET);\n\n    result = file->f_op->write(file, buf_wr, sizeof(buf_wr), &file->f_pos);\n\n    if(result < 0)\n\n    {\n\n        EZdev_LOG( EZdev_LOG_ERR, \"EZdevSplitK, write %s failed.\\n\", np_dev);\n\n    }\n\n\n\nFor now, we will assume that h/w reset is being done. However, could you please verify for sequence & timing correctness.\n\n[Kenny] \u2013 HW engineer has verified, it is good.\n\n\n\nAlso, is it possible that there is unintended reset being done by other parts of the code/system?\n\n[Kenny] \u2013 I think no.\n\n\n\n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?   [Kenny] - This function doesn't use till now.\n\n[Broadcom] As we have not tested/run code without reset on our systems, it is hard to qualify your code changes.\n\nCould you please adjust your code to follow same sequence (including the reset) as SDK phy driver?\n\n\n\n[Kenny] - Actually there is a soft reset in _phy_84793_rom_firmware_download().  When call _phy_84793_rom_firmware_download to download microcode, it will reset 84794 automatically.\n\n    SOC_IF_ERROR_RETURN(\n\n            READ_PHY84793_PMA_PMD_REG(unit, port, pc, COMMON_POR_REGS_BOOT_POR, &data16));\n\n    if ((data16 & 0x2000) == 0x2000) {\n\n        //printf(\"FW already downloaded,\"\n\n        //\"Please do Hard reset to dload ucode again\\n\");\n\n        return SOC_E_NONE;\n\n    }\n\n    data16 = 0;\n\n\n\n    SOC_IF_ERROR_RETURN\n\n         (WRITE_PHY84793_PMA_PMD_REG(unit, port, pc, CTL_REGS_COMMON_CTRL1, 0xFFFE));\n\n\n\n\n\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d? [Kenny] - My code doesn't set TX parameters, I suspect microcode set TX parameters.\n\n[Broadcom] I think, PHY driver sets it to default preemphasis values. However, SDK exposes \"SOC_PHY_CONTROL_PREEMPHASIS\" to let customer tune the preemphasis values based on Board-design.\n\n[Kenny] \u2013 I saw these APIs, does your mean I should not use default preemphasis values, but re-configure them anyway?\n\n\n\nEarlier, in the CSP log we observed that preemphasis values were read as zero in issue state. Value zero is not expected, and it will cause the amplitude to be low as sen on your TX captures.\n\n\n\nFYI, regardless this problem, I think you need to set correct preemphasis values suitable to the board by using above PHY_CONTROL.\n\n[Kenny] \u2013 I am sorry! As I said above, Indirectly registers\u2019 values in GearBox1_success.txt and GearBox1_fail.txt we provided are wrong. Preemphasis values are zero only when issue happened.\n\n\n\nAdditionally, we have reviewed the driver code and preemphasis values are being set to zero if mode is PHY84793_MODE_10X10G_TO_4X25G. We have to make sure that on your system we are never hitting this mode. To be sure about this, could you please follow the same sequence that original PHY driver is following in _phy_84793_init_pass2() to set the speed. (you can change the configured mode later in code)\n\n[Kenny] \u2013 We only use PHY84793_MODE_10X10G_TO_10X10G_ASYNC mode.\n\nI can change codes as original PHY driver, but I think it is meaningless. You can read _phy_84793_init_pass2(), it just does two things. First, calls _phy_84793_rom_firmware_download to download microcode. Second, calls _phy_84793_speed_set to set speed. About _phy_84793_speed_set, it just configures different mode according to the different speed.\n\nActually my sequence is same as _phy_84793_init_pass2(), but leave out set speed step.\n\n\n\nBest regards.\n\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Edison Liu[Radisys Corporation]\nUpdate date: 3/25/2015 12:30:00 AM PST\n---------------------------------------------\nHi Ronen,\n\nHere is the more detailed flow of initialization of the BCM84794:\n    HW reset\n    SW reset\n    delay 200ms\n    Load micro-code\n    delay 100ms (This is the key point)\n    Configure Gearbox mode\n    Check port link status\n\nRegards\nEdison", "CreatedOn": "2017-03-31 01:38:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/30/2015 7:14:00 PM PST\n---------------------------------------------\nHi Kenny,\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function? \n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d?\n4. Could you add some break points in you SW to track if/when these TX registers are modified?\n5. Hoe does your board\u2019s connector looks like? Is it one board for 2x40G(QSFP) and another board for 100G, or single board with adapter/converter? Please provide the I/F details.\n\nThanks,\nRonen", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 4/1/2015 5:09:00 PM PST\n---------------------------------------------\nHi Kenny,\n\nI do not have a system with TDxx, BCM84794, and QSFP modules. I submitted a request for our engineering team to test your suggestion to reproduce this, but this will take some time...\n\nCould you please answer my questions from \"31-Mar-2015 07:07:28 PM\"?\n\nThe \"GearBox1_success.txt\" dump you uploaded on 3/24 shows the pre-emphasis registers as zero, which does not make sense. Please redo and upload the register dump of a \"fail\" and \"success\" cases?\n\nOn the ports that fail, keep them in that state, and try PRBS generators from these bad lanes. Can the receiver get them? Do you get a scope plot?\n\nThanks,\nRonen", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 4/2/2015 5:01:00 PM PST\n---------------------------------------------\nHi Kenny,\n\nThanks for the information!\n\n\nYes, you should not use default preemphasis values unless they fit your HW/PCB. You need to re-configure these registers with new values according to you HW/PCB.\n\n\nWhile we are waiting for our engineering team to debug the driver, I would like to suggest a temporary workaround:\n\n1. HW reset GearBox\n2. Delay about 1 second\n3. Call _phy_84793_rom_firmware_download to download micrcode\n4. Call _phy_84793_config_mode to set mode as PHY84793_MODE_10X10G_TO_10X10G_ASYNC\n5. [New] Read registers 8066, 8067\n6. [New] if (8066==0 or 8067==0) -> step 1, else -> step 7\n7. [New] write the correct value (per your HW/PCB) to 8066, 8067\n8. Check for link status\n\nAgain, this is not a solution, just a temporary workaround.\n\n\nRegards,\nRonen", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 3/26/2015 8:20:00 PM PST\n---------------------------------------------\nHi Ronen,\n\n\n\nPlease see below.\n\n\n\nBest regards.\n\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Case automatically closed priority 1 cases after 2 Weeks in the Resolved state.", "CreatedOn": "2017-05-20 14:43:29", "CreatedBy": "system"}, {"Notes": "Updated by: Venkatram Yarlagadda[Broadcom Corporation]\nUpdate date: 10/25/2015 6:15:00 PM PST\n---------------------------------------------\nHello Kenny Xuan,\n\nCould you please try to recreate this issue with SDK 6.4.8?\nThere are multiple fixes in PHY drivers for BCM84794 & we can try to work on latest code to make progress.\n\nCould you please help by reopening the case if issue is reproducible on SDK-6.4.8?\n\nThanks,\nVenkatram", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 3/25/2015 6:55:00 PM PST\n---------------------------------------------\nHi Edison,\n\nI am still not clear with questions #3 & #6:\n1. You say with 100mS delay 1-2/300 loops failed, right?  \n    What happens when you do NOT have this 100mS delay, does it fail? How frequent?\n2. You say \u201cEven without QSFP module, the output signal is still low when it fails.\u201d, how can it link without QSFP? Are you using DAC cable in loopback instead?\n3. You say \u201cWe suppose even link is up with other vender QSFP module, there should be many FCS error too\u201d, have you tried it with different vendor\u2019s QSFP? Does it fail in the same frequency (1-2/300)?\n\nAs for the \u201cdetailed flow of initialization\u201d:\n4.\tWhat does \u201cSW reset\u201d do?\n5.\tCould you send us the list of API calls/command used on this flow?\n6.\tAre you following the \u201cMicrocode Download Path\u201d section in the \u201c84793-SWUM102-R\u201d application note?\n7.\tImportant, in particular are you following the \u201cMicrocode Download Flowchart\u201d on pages 19 & 20? (Critical!)\n\nFYI, here are my comparison's key findings between the files:\nRegister  Pass   Fail       Description\n-----------   ------    ------      -------------------------------------------------------------------------------------\n0x0001     0006 0082     PMA/PMD RX Link is up [2]\n0x0008     B3C1 B7C1   PMA/PMD receive fault [10]\n0x000A    001F  0000     PMD receive signal is detected for Lane3:0=[4:1], [0] AND of Lane [3:0]\n0x9486     0014  0015     Lane 0, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9586     0014  0015     Lane 1, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9686     0014  0015     Lane 2, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9786     0014  0015     Lane 3, Line side (VSR28), RX LOS Threshold hysteresis [1]=Disabled\n0x9800     00FF  0000     RX Line side, 25G/10G CDR lock for lane 3:0 [7:4]\n0xF45F     0297  029A    PVTMON Status, VT Monitor data output[9:0]\n\nWe can do a conference call tomorrow if you like, when is a good (California) time for that?\n\nRegards, \nRonen", "CreatedOn": "2017-03-31 01:38:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Edison Liu[Radisys Corporation]\nUpdate date: 3/25/2015 10:50:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nWe have some founds today. When QSFP down issue occur, nPPI related registers below are abnormal.\n      nPPI Analog Control Registers\n      TX: IA.8065, IA.8066, IA.8067\n\nIf the ports link up and work well, these registers value:\n      8065: 0x8800\n      8066: 0x48\n      8067: 0x19F8\n\nBut when link issue occur these registers value:\n      8065:  0x0\n      8066:  0x0\n      8067:  0x0\n\nIf we write these three registers to 0x8800,0x48,0x19F8, the down ports can link up.\n\nWe have question below:\n1. How to configure these three registers value? Registers default setting or write them by microcode?\n2. What could trigger the registers value zero?\n\nFor reset of your questions, those codes are directly copy from the BCM SDK 6.4.3. We have no any change in the APIs. Just make those APIs can work and calling them in the order same as BCM SDK initialization.\n\nRegards\nEdison", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 3/30/2015 9:25:00 PM PST\n---------------------------------------------\nHi Ronen\n\n1. The first step in your \u201cAPI calls sequence\u201d is \u201cHW reset GearBox\u201d, but I don\u2019t see it in RSphy_84793_init function?     [Kenny] - We use GPIO to pull low 84794 RESETB pin to do HW reset .\n2. I also don\u2019t see \u201cGbBcm84793_Reset\u201d called anywhere in your code?   [Kenny] - This function doesn't use till now.\n3. I would expect your code to set the TX parameters (pre-emphasis, drive, etc.), according to your PCB simulation, but it\u2019s not shown on your \u201cAPI calls sequence\u201d? [Kenny] - My code doesn't set TX parameters, I suspect microcode set TX parameters.\n4. Could you add some break points in you SW to track if/when these TX registers are modified? [Kenny] - Again, My code doesn't set TX parameters, I suspect microcode set TX parameters.  But I found a phenomenon that the step 4 (Delay 100ms) affects TX parameters initialization. Please refer below API calls sequence for detail.\n5. Hoe does your board\u2019s connector looks like? Is it one board for 2x40G(QSFP) and another board for 100G, or single board with adapter/converter? Please provide the I/F details.\n [Kyle] - For link up and link down verification, we only verified it on one board,  there have 8 40G QSFP fiber modules on our board, we connect them each two ports, for performance test, we did snake chain and connected two ports to IXIA 40G ports.\n\n84794 API calls sequence: \n\n1.\tHW reset GearBox;\n2.\tdelay about 1 second;\n3.\tCall _phy_84793_rom_firmware_download to download micrcode;\n4.\tDelay 100 ms;   ---  If this delay exists,   TX parameters (Register 0x8065, 0x8066, 0x8067) will be 0. If remove this delay, TX parameters seems right.  Reg 0x8065 value: 0x8800,   0x8066: 0x48,  0x8067: 0x19f8\n5.\tCall _phy_84793_config_mode to set mode as PHY84793_MODE_10X10G_TO_10X10G_ASYNC;\n6.\tDelay 100 ms;\n7.\tCall _phy_84793_line_polarity_flip to set polarity swap;\n8.\tCall _phy_84793_sys_enable_set to enable system side;\n9.\tCall _phy_84793_line_enable_set to enable line side.\n\n\n\nBest regards.\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 3/26/2015 11:05:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nAttached original/modified codes, please review my modification, thanks!\n\nphy84793_orignal.c   --- From BCM SDK 6.4.3\nphy84793_modified_by_Rsys.c  --- Ported by me based on phy84793_orignal.c. We call function GbBcm84793_Init() to initialize 84794.\n\nBest regards.\nKenny Xuan\n\nFrom: Kenny Xuan\nSent: Friday, March 27, 2015 11:19\nTo: 'BRCM Support - Ronen Joseph'; Anny Wang\nCc: andy@questrep.com; Edison Liu; gmobbs@stratustechnical.com; Jacken Zhang (Zhang Jiankeng); jshattuck@stratustechnical.com; Kent Li; kim.kempf@radisys.com; Kyle Fu (Fu Hongming); Matt StPeter; Xiao Yong\nSubject: RE: [RadiSys] [CASE#903671]: Updated - Critical link failure of BCM84794\n\n\nHi Ronen,\n\n\n\nPlease see below.\n\n\n\nBest regards.\n\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Kenny Xuan[]\nUpdate date: 4/7/2015 7:30:00 PM PST\n---------------------------------------------\nHi Ronen,\n\nThanks! I will take your temporary workaround. Once you found the root cause, please inform me.\n\nBest regards.\nKenny Xuan", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Kent Li[Radisys Corporation]\nUpdate date: 10/25/2015 8:14:00 PM PST\n---------------------------------------------\nHi Venkatram,\n\nCan you please tell us what bug fix has been done in new version ?\nThe bug fix information is very helpful to us.\n\nThanks\nKent", "CreatedOn": "2017-03-31 01:38:22", "CreatedBy": "admin"}]}, {"Number": "CS4546138", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Done!!\r\nall three have access now. Please re-open this case if you still the issue.\r\n\r\nthanks\r\nNishant\r\n", "CreatedOn": "2018-02-09 19:07:04", "CreatedBy": "00939913"}, {"Notes": "Thanks for your support. customer is pleased. \r\n\r\nBr Anders ", "CreatedOn": "2018-02-12 23:23:37", "CreatedBy": "N6022215"}, {"Notes": "Hi Nishant\r\n\r\nCorriant tried the new firmware and it did not make a difference. Corriant still see the same issue. \r\n\r\nCan you confirm that they have bit 1 set correctly? This is how it's configured. Is bit 2 with a reference to 1 or 0? Should it be 0x2 or 0x4?\r\n\r\nhw gearbox 1 r 0xf427\r\nGearbox read data             = 0x2\r\n\r\nBr Anders ", "CreatedOn": "2018-02-09 23:33:37", "CreatedBy": "N6022215"}, {"Notes": "New external attachment had been added to case CS4546138:\ndebug_hgtms.png", "CreatedOn": "2018-02-08 22:47:44", "CreatedBy": "N6022215"}, {"Notes": "use firmware 0011 and set f427.2", "CreatedOn": "2018-02-08 23:16:06", "CreatedBy": "00939913"}, {"Notes": "System automatically closed this priority 2 case after 3 weeks in the Resolved state.", "CreatedOn": "2018-03-06 16:00:11", "CreatedBy": "system"}, {"Notes": "Hi Anders,\r\nI am setting this case to resolved.\r\nfor the problem statement you presentedm 0x4 setting should suffice.\r\n\r\nthanks\r\nNishant\r\n", "CreatedOn": "2018-02-12 19:09:41", "CreatedBy": "00939913"}, {"Notes": "Hi Nishant \r\n\r\nBit 1 and bit 2 seem relevant to this situation.\r\n\r\nShould they  set the register to 0x4, or should they set it to 0x6, so that bit 1 and 2 are set?\r\n\r\nINFO from release note \r\nDate: 2013-11-22\r\nRelease Version: 000C \r\nCode size: 8192 bytes\r\nCRC32 checksum: 0x7B05EEF4 calculated in a 32k-byte buffer with unused space filled by 0xFF.\r\nApplicable chip revisions: Broadcom BCM84790, BCM84793 and BCM84795\r\nFeature added\r\n1. BCM 84795 support\r\n2. Performance enhancement upon short optical LOS on RX\r\n   (1) F427[1] is used to control whether FIFO collision latched status register\r\n    gb_rx_collide_lh@F52A is used to trigger system side data path reset.\r\n    With the default value of 0, this status register is read regularly\r\n    and if any of the bit is set, the data path reset is performed. The latched\r\n    status register is also mapped to GPReg14@F425.\r\n    When F427[1] is set to 1, the collision latched status register is not\r\n    checked, nor is GPReg14@F425 updated.\r\n\r\n   (2) The FIFO collision latached status register gb_rx_collide_lh@F52A is mapped to\r\n    GPReg14@F425 when F427[1] is set to 0. Each time the status register\r\n    is read, the value is ORed to the existing value of GPReg14@F425. The user\r\n    is responsible for clearing GPReg14 after it is read.\r\n\r\nrelease note 0011\r\nDate: 2015 - 05 - 26\r\nCRC32 checksum: 0x6DA7FBA2 calculated with 32k-byte buffer with unused space filled by 0xFF.\r\nApplicable chip revisions: Broadcom BCM84790, BCM84793 and BCM84794\r\nThe following changes are included in release 0011, compared to release 0010. \r\nFunctionality:\r\nThe following changes are included in release E011, compared to release 0010. \r\n(1) Add an option to bypass sys Tx reset when line Rx CDR or FIFO status change.\r\n    This feature must be enabled by setting FW_enable register (0xF427) bit 2 to 1.\r\n\r\n Br Anders ", "CreatedOn": "2018-02-12 17:54:36", "CreatedBy": "N6022215"}, {"Notes": "Gearbox chipId             = 0x84794\r\nGearbox revId              = 0xa1\r\nGearbox uCode version      = 0xd\r\n\r\nhw gearbox 1 r 0xf427\r\nGearbox read data             = 0x2\r\n", "CreatedOn": "2018-02-08 22:37:01", "CreatedBy": "N6022215"}, {"Notes": "New external attachment had been added to case CS4546138:\nsetup_Gearbox_84794.png", "CreatedOn": "2018-02-08 22:47:27", "CreatedBy": "N6022215"}, {"Notes": "We tried the new firmware and it did not make a difference. We still see the same issue. \r\n\r\nCan you confirm that we have bit 1 set correctly? This is how it's configured. Is bit 2 with a reference to 1 or 0? Should it be 0x2 or 0x4?\r\n\r\nhw gearbox 1 r 0xf427\r\nGearbox read data             = 0x2\r\n", "CreatedOn": "2018-02-09 23:32:36", "CreatedBy": "N6022215"}]}, {"Number": "CS1842857", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 20-Jul-2015  8:01AM PST\n---------------------------------------------\nCustomer found a missing resistor on ball R10 so it is working now.\n\nDavid", "CreatedOn": "2017-04-06 08:07:15", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-Jul-2015  3:55PM PST\n---------------------------------------------\nIs mdio/vac configuration pin pulled high?\n\nDavid\n\n Sent from my iPhone\n\n> On Jul 16, 2015, at 3:52 PM, BRCM Support - Marc Sanfacon <support@broadcom.com> wrote:\n> \n>", "CreatedOn": "2017-04-06 08:07:15", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-Jul-2015  3:55PM PST\n---------------------------------------------\nI am not aware of an mdio/vac configuration pin and do not see it in the datasheet.\nWhat pin is this and where is it documented?", "CreatedOn": "2017-04-06 08:07:15", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-Jul-2015  3:55PM PST\n---------------------------------------------\nHi David,\nI will be out on vacation next week starting this afternoon so I was hoping to have this resolved by this morning.\nI have added my HW colleagues Kent and Werner to the cc list as they will be covering for me in my absence.\nRich and Hongwei are also cc'd as they are the diagnostics and software driver engineers respectively.\nThanks,\nMarc", "CreatedOn": "2017-04-06 08:07:15", "CreatedBy": "admin"}]}, {"Number": "CS2229351", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 10/21/2013 8:17:00 AM PST\n---------------------------------------------\nUpdate: We have turned on PRBS while running the livelink error mode and now have a valid eye for both the CAUI and VSR line-side lanes. (Unfortunately we don't have the ability to loop-back the PRBS traffic on the system side lanes yet to test it there). This resolves all of the above issues.\n\nThe only remaining question is some confusion about the number of horizontal steps for the Gearbox lanes. The software manual says at 10G the horizontal offset has 127 steps and at 25G it has 63 steps, however the sdk indicates 63 steps for both. Which is correct?", "CreatedOn": "2017-04-09 15:55:27", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 10/31/2013 10:09:00 AM PST\n---------------------------------------------\nAfter we enable prbs traffic before starting the eye tool, we start getting very good eye diagrams.", "CreatedOn": "2017-04-09 15:55:27", "CreatedBy": "admin"}]}, {"Number": "CS1704122", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Yogish Kumar[Broadcom Corporation]\nUpdate date: 25-Feb-2015  8:39PM PST\n---------------------------------------------\nHi Matt and Nishant,\n\nI had a 2.5 hour debug session with Brent. This issue is getting hot and escalated and Cisco wants to talk to the Enzo CDR designers to understand the issue better. I am setting up a meeting with Cisco tomorrow afternoon.\n\nIssue Summary:\n1. They have 8 ports (with 8 gearboxes). In each gearbox, only Lane 7 shows bit errors with PRBS 31 data. I looked at the trace lengths, some are long and some are short. The failing lane\u2019s trace is in between on the board under test\n2. In this test we have a CPAK optical module looped back to itself\n3. The issue becomes worse at high temp (70C) but can be reproduced at room temp\n4. They way to reproduce the issue is to toggle the laser on and off on the CPAK and lane 7 starts seeing incrementing PRBS bit errors\n5. CDR lock status and LOS are both good for lane 7\n\nWhat makes the PRBS errors go away:\n1. Toggling the cal_rstb on RX lane 7\n2. Toggling  the lkdt_rstb on RX lane 7\n3. Adding TX pre-emphasis on TX lane 7 (cannot use this as a workaround as they cannot control the far end TX)\n4. Adding TX pre-emphasis on the CPAK module TX lane 7 (maybe an alternate workaround)\n\nAction items and questions for Broadcom:\n1. Is there a register to read the CDR phase steps manually as we suspect the CDR is sampling the eye on the edge?\n2. Why does toggling cal_rstb, lkdt_rstb (basically resetting the CDR) make the PRBS bit errors go away\n3. What does cal_rstb  and lkdt_rstb do at a circuit level? Can this reset be used anytime? Is this a production workaround or are there any side effects to doing this out of sequence reset?\n4. We changed the CTLE setting using register 0x821C. Is this the right register. If yes, it did not fix the bit errors.\n5. Is there an App note on how to run the eyescan on this lane?\n\n\nPCB layout of the 8 ports. Navy blue trace is channel 7 on all the ports is attached.", "CreatedOn": "2017-04-06 06:41:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Yogish Kumar[Broadcom Corporation]\nUpdate date: 27-Feb-2015  7:26PM PST\n---------------------------------------------\nHi All,\n\nOutstanding questions for BRCM: \n1.\tIs it absolutely necessary for Cisco to move to the 000F FW from 000D. The release notes doesn\u2019t say anything about the line side CDR glitches being take care by the 000F FW. Is this documented elsewhere or do we have any test results to show what was tested?\n2.\tProvide an eval board\n\nThese were some of the ideas and theories that came up BRCM brainstorming and the results of those experiments:\n1.\tIncrease the laser ON/OFF time \u2013 We waited 2 minutes between trials. Did not resolve PRBS errors\n2.\tSquelch the CPAK TX output \u2013 CPAK already does that. Did not resolve PRBS errors\n3.\tChange CTLE boost setting \u2013 Tried all the different CTLE settings. Did not resolve PRBS errors\n4.\tCheck if the ref clock pins are close to RX7 just like CFP2 \u2013 Brent confirmed that there are no ref clock pins close to RX7 in the CPAK module\n5.\tTurn off adjacent lanes to improve crosstalk - Did not resolve PRBS errors\n\nStill the only three solutions to make the dribbling PRBS errors go away on lane RX7 are:\n1.\tRedo the RX VCO calibration\n2.\tBump up the CPAK TX pre-emphasis slightly\n3.\tBump up the GB TX pre-emphasis \u2013 Good for debug but not possible in production with a far end transmitter\n\n\nFirmware Release Notes\n\nDate: 2014 - 07 - 28\n\nRelease Version: 000F \n\nCode size: 8192 bytes\n\nCRC32 checksum: 0xB60B3EB0 calculated with 32k-byte buffer with unused space filled by 0xFF.\n\n\nApplicable chip revisions: Broadcom BCM84790, BCM84793, BCM84794 and BCM84795\n\nThe following changes are included in release 000F, compared to release 000D. \n\nFunctionality:\n(1) Change the order of resets in system side data path reset.\n\n(2) Add an optional feature to turn on PRBS traffic at the system side with\nCDR goes through the transient from lock to loss of lock, and turn off PRBS\nwhen CDR regains lock.\n\nUser Interface:\n\nThe new feature in (2) is not enabled by default. The user needs to set F417[4]\nto 1 in order to enable it.\n\n\nRegards,\nYogish", "CreatedOn": "2017-04-06 06:41:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-May-2015  4:00PM PST\n---------------------------------------------\nHey Yogish,\nthis was resolved after series of debug call we had with cisco and concluded the issue was with their NPU CDR setting.\n\nI am changing this to resolved.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 06:41:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Yogish Kumar[Broadcom Corporation]\nUpdate date: 26-Feb-2015 11:22AM PST\n---------------------------------------------\nResponses from Nishant\n1.\tIs there a register to read the CDR phase steps manually as we suspect the CDR is sampling the eye on the edge?\n\n\nNishant: not for HEXACORE lanes, registers are only available for VSR lanes\n\n2.\tWhy does toggling cal_rstb, lkdt_rstb (basically resetting the CDR) make the PRBS bit errors go away\n\nNishant: Did you check CDR latch low status registers. Is CDR momentarily losing lock with burst of errors CPAK module is throwing in ? \n\n3.\tWhat does cal_rstb  and lkdt_rstb do at a circuit level? Can this reset be used anytime? Is this a production workaround or are there any side effects to doing this out of sequence reset?\n\nNishant: I don\u2019t see any issue, it is basically flushing the datapath with garabage coming out from CPAK module lane 7.  If you are constantly pulling and pushing the module, you will need to reset. \n\n4.\tWe changed the CTLE setting using register 0x821C. Is this the right register. If yes, it did not fix the bit errors.\n\nNishant: this is correct, just make sure you are performing INDIRECT register access for this.\n\n5.\tIs there an App note on how to run the eyescan on this lane?\n\nNishant: EYE_SCAN_ALL.vbs is the reference script we have in the eval kit.", "CreatedOn": "2017-04-06 06:41:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 25-Feb-2015 10:37AM PST\n---------------------------------------------\nHi Yogish,\nlets' get them to try out 000F firmware first and then we can take it from there.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 06:41:36", "CreatedBy": "admin"}]}, {"Number": "CS1799659", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kalevi Ratschunas[Broadcom Corporation]\nUpdate date: 19-Aug-2016  3:49AM PST\n---------------------------------------------\nHi Nishant\n\nThe customer doesn't believe this is the answer what they were looking for.\n\nThe question is not related to the P/N pair tolerance. This is related to lane-to-lane tolerance and if there is some compensation FIFOs inside our device. So the question is if the lane skew is d\nirectly let trough our device while adding some extra skew. \n\nThe customer is aware of the lane skew tolerance of the receiving ASIC, but what does the gearbox add to that, or if it does compensation then the tolerance is defined by the gearbox performance.\n \nBest regards,\nKalevi", "CreatedOn": "2017-04-06 11:24:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 22-Aug-2016 11:45AM PST\n---------------------------------------------\nHi kalevi,\n\nBCM84794 does not perform any skew removal in 100G mode \n\nIf the device is put in a normal gearbox mode (or even just pass thru) we will pass the data as such without any skew compensation. \nOur device will add to the incoming skew and like I said before is that we will be well within the spec.\n\n\nJust for your information,\nOur 28nm Gearbox devices does have CL91 FEC functionality\nNone of our gearbox devices like 40nm Enzo (BCM84790,93,94), 28nm Sesto (BCM 82790,92)  or 28nm Dino(BCm82793) do any skew removal in 100G mode if CL91 FEC is not enabled. \nCL91 will be the only time were we will remove the skew in order to decode the FEC data (after alignment of physical lane). \n\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 11:24:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Kalevi Ratschunas[Broadcom Corporation]\nUpdate date: 07-Jul-2016  9:08AM PST\n---------------------------------------------\nHi Nishant,\n\nPlease let me know if I need to refine the question.\n\nBest regards,\nKalevi", "CreatedOn": "2017-04-06 11:24:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 18-Aug-2016  2:53PM PST\n---------------------------------------------\nYes kalevi, as per the specrequirment , BCM84794 does beat the skew numbers mentioned in 802.3-2012-82.2.12 Table 82-5.\nfurther any P/N mismatch of all our high speed lines are well controlled in package. There are no skew compensation needed on customer's board", "CreatedOn": "2017-04-06 11:24:23", "CreatedBy": "admin"}]}, {"Number": "CS1748539", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Aug-2016  2:54PM PST\n---------------------------------------------\nmoving this to Resolved since no follow up questions.", "CreatedOn": "2017-04-06 11:31:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Shiv Gupta[Broadcom Corporation]\nUpdate date: 14-Jun-2016 10:06AM PST\n---------------------------------------------\nHI Shiv,\n\nCan we have someone to look into this urgently? This is sev1 issue reported by customer.\n\nThanks & Regards,\nPiyush Jaju\nCONFIDENTIALITY NOTICE: The contents of this message (including any attachments) are Cisco confidential information, protected by law.", "CreatedOn": "2017-04-06 11:31:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Shiv Gupta[Broadcom Corporation]\nUpdate date: 15-Jun-2016  8:03PM PST\n---------------------------------------------\nThanks David,\nI don't have access to the fw in docsafe, please enable all fw access for me in docsafe.\n\nRegards\nShiv", "CreatedOn": "2017-04-06 11:31:28", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Jun-2016 11:44AM PST\n---------------------------------------------\nHi Shiv,\n\ncatching up from email thread:\ni'm not sure why customer is using an old FW (looks like D007 from their register dump).\nif they can update FW in the field they should use the latest FW.\n\nlatest FW (E0CA40A1FFFF4790_0011.zip) is available on docSAFE.\ncustomers should have access to it.\nlet me know if they don't and i'll get them access.\n\nregards,\nDave", "CreatedOn": "2017-04-06 11:31:28", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 16-Jun-2016  9:42AM PST\n---------------------------------------------\nHi Shiv,\n\nYou have been given access to latest 84794 FW.\nAlthough it is ok for you to forward the FW to customer, you should get customer access to FW so they can download for themselves. That way they will be notified if there are any future FW updates.\n\nIt\u2019s not that trivial to enable access for all product FWs. Please request access on products you are interested in using SW request portal in CSP.\nhttp://support.broadcom.com/docSAFE/SD/RequestStep1.aspx \n\nRegards,\nDave", "CreatedOn": "2017-04-06 11:31:29", "CreatedBy": "admin"}]}, {"Number": "CS1904342", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Carina Thomas[Broadcom Corporation]\nUpdate date: 25-Nov-2014  9:14PM PST\n---------------------------------------------\nHi Nishant,\nThanks for your rapid feedback. I have shared the relevant portions with the customer.\n\nIn the course of the debugging I also saw that the content of their register 0xf417 is '0' after downloading the microcode. (i.e. not 000F). So I have asked them to:\na.) Ensure that they have followed the guidelines provided in 84793-SWUM102-R (& 84794-DS03-R) regarding how to download the microcode.\nb.) Referenced download scripts in the scripts/uCode folder in the bcm84793_cfp2_cxp_evalKit_rev2.zip on DocSafe.\n\nI will update the ticket after I received further feedback from them. Until then I will leave it Pending.\n\nThanks & Best Regards,\nCarina", "CreatedOn": "2017-04-06 05:36:00", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Feb-2015  4:14PM PST\n---------------------------------------------\nHi Carina, \nchanging this to resolved, please re-open if you still have any questions.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:36:00", "CreatedBy": "admin"}, {"Notes": "Updated by: Carina Thomas[Broadcom Corporation]\nUpdate date: 24-Feb-2015 12:37AM PST\n---------------------------------------------\nHi Nishant,\nApologies for forgetting to close this ticket.\n\nI am doing so now.\n\nThanks for your support.\n\nBest Regards,\nCarina", "CreatedOn": "2017-04-06 05:36:00", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 24-Nov-2014  2:46PM PST\n---------------------------------------------\nHI Carina,\nI am not able to view the CSP860186, I have requested for access.\n\nAnyways, MODE3 is basically 10x10 to 10x10, so LR4 mode actually doesn't fit here. CFP2 can support both SR10 and LR4.\n\nFor SR10 - you need to program Gearbox in MODE3\nFor LR4 - you need to program Gearbox in MODE1\n\nif you have access to GUI and eval board, finding out register settings is pretty straightforward using record macro function in the GUI.  F403 and F404 registers are explained in SWUM and Datasheet as well.\n\nCould you please confirm the reference clock you are using for SR10 mode.\n\nif it is 161 MHZ, then below is the sequence after you have loaded the microcode successfully.\n\nwrite 1.F403, 0002\nwrite 1.F404, 0005\nWrite 0xF439  0x1D\nWrite 0xF439 0x19\nWrite 0xF439 0x1D\nWrite 0xF439 0x15\n\nif you are using 156.25Mhz clock in SR10 mode which appears to be the case from the schematic, then use the attached script.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 05:36:00", "CreatedBy": "admin"}]}, {"Number": "CS1643632", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Yongfei Feng[Broadcom Corporation]\nUpdate date: 16-Dec-2015  2:34AM PST\n---------------------------------------------\nResolve since the script has been provided.\n\nRegards,\nYongfei", "CreatedOn": "2017-04-07 13:25:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Yongfei Feng[Broadcom Corporation]\nUpdate date: 14-Dec-2015  9:47PM PST\n---------------------------------------------\nHi, Chris,\nPlease check the following script:\n\n/********** READ ME ************/\n/* BCM8479x has default polairty setting. To invert polarity, please read the default polarity setting first, then invert the setting. */\n/* We take ce0 as example */\n\nlinkscan off\n\n/* RX polarity swap */\nLane 0 ~ Lane 3\nphy ce0 0x9811 /* bit[3:0] represent current rx polarity state of lane 3 ~ 0 */\nphy ce0 0x9811 #### /* Invert the corresponding bit of the lane with polarity inversion */\n\n/* Lane 4 ~ Lane 9 */\n/* Read */\nphy ce0 0xf453 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 0x80BA /* Set the register address to read */\nphy ce0 0xf452 0x12 /* Issue a read to 0x80BA for lane 4 */\nphy ce0 0xf456 /* The read back value resid in 0xf456, bit[3:2] is current state of rx polarity */\nphy ce0 0xf452 0x0 /* Deassert read */\n  \n/* Write */\nphy ce0 0xf453 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 0x80BA /* Set the register address to read */\nphy ce0 0xf455 #### /* Invert bit[3:2] of the readback value to swap rx polarity */\nphy ce0 0xf452 0xa /* Issue a write to register 0x80BA */\nphy ce0 0xf452 0x0 /* Deassert write */\n  \n\n/* TX polarity swap */\nLane 0 ~ Lane 3\nphy ce0 0xf633 /* bit[3:0] represent current tx polarity state of lane 3 ~ 0 */\nphy ce0 0xf633 #### /* Invert the corresponding bit of the lane with polarity inversion */\n\n/* Lane 4 ~ Lane 9 */\n/* Read */\nphy ce0 0xf453 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 0x8061 /* Set the register address to read */\nphy ce0 0xf452 0x14 /* Issue a read to 0x8061 for lane 4 */\nphy ce0 0xf456 /* The read back value resid in 0xf456, bit[5] is current state of tx polarity */\nphy ce0 0xf452 0x0 /* Deassert read */\n\n/* Write */\nphy ce0 0xf453 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 0x8061 /* Set the register address to read */\nphy ce0 0xf455 #### /* Invert bit[5] of the readback value to swap tx polarity */\nphy ce0 0xf452 0xc /* Issue a write to register 0x80BA */\nphy ce0 0xf452 0x0 /* Deassert write */\n\nRegards,\nYongfei", "CreatedOn": "2017-04-07 13:25:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Yongfei Feng[Broadcom Corporation]\nUpdate date: 14-Dec-2015 10:17PM PST\n---------------------------------------------\nHi, Chris,\nWe need to appoint devid == 1 in the script, please use the following script instead:\n\n/********** READ ME ************/\n/* BCM8479x has default polairty setting. To invert polarity, please read the default polarity setting first, then invert the setting. */\n/* We take ce0 as example */\n\nlinkscan off\n\n/* RX polarity swap */\n/* Lane 0 ~ Lane 3 */\nphy ce0 0x9811 1 /* bit[3:0] represent current rx polarity state of lane 3 ~ 0 */\nphy ce0 0x9811 1 #### /* Invert the corresponding bit of the lane with polarity inversion */\n\n/* Lane 4 ~ Lane 9 */\n/* Read */\nphy ce0 0xf453 1 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 1 0x80BA /* Set the register address to read */\nphy ce0 0xf452 1 0x12 /* Issue a read to 0x80BA for lane 4 */\nphy ce0 0xf456 1 /* The read back value resid in 0xf456, bit[3:2] is current state of rx polarity */\nphy ce0 0xf452 1 0x0 /* Deassert read */\n  \n/* Write */\nphy ce0 0xf453 1 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 1 0x80BA /* Set the register address to read */\nphy ce0 0xf455 1 #### /* Invert bit[3:2] of the readback value to swap rx polarity */\nphy ce0 0xf452 1 0xa /* Issue a write to register 0x80BA */\nphy ce0 0xf452 1 0x0 /* Deassert write */\n  \n\n/* TX polarity swap */\nLane 0 ~ Lane 3\nphy ce0 0xf633 1 /* bit[3:0] represent current tx polarity state of lane 3 ~ 0 */\nphy ce0 0xf633 1 #### /* Invert the corresponding bit of the lane with polarity inversion */\n\n/* Lane 4 ~ Lane 9 */\n/* Read */\nphy ce0 0xf453 1 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 1 0x8061 /* Set the register address to read */\nphy ce0 0xf452 1 0x14 /* Issue a read to 0x8061 for lane 4 */\nphy ce0 0xf456 1 /* The read back value resid in 0xf456, bit[5] is current state of tx polarity */\nphy ce0 0xf452 1 0x0 /* Deassert read */\n\n/* Write */\nphy ce0 0xf453 1 0x4    /* Set the lane to set, lane 0 = 0, lane 1 = 1 ... lane 9 = 9, 0x1FF to represent lane 4 ~ lane 9 */\nphy ce0 0xf454 1 0x8061 /* Set the register address to read */\nphy ce0 0xf455 1 #### /* Invert bit[5] of the readback value to swap tx polarity */\nphy ce0 0xf452 1 0xc /* Issue a write to register 0x80BA */\nphy ce0 0xf452 1 0x0 /* Deassert write */", "CreatedOn": "2017-04-07 13:25:30", "CreatedBy": "admin"}]}, {"Number": "CS2268182", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/10/2014 12:55:00 PM PST\n---------------------------------------------\nPlease fill-in the Customer Project field.  I don\u2019 t have any hardware to try this locally, so I will be gathering a little more information before submitting this to the factory for their input.\n\n1.  If the line-side transmitter is initially enabled when you setup PRBS, what is the behavior?  Is it similar to when you do not observe errors after re-enabling the line-side transmitter?\n2.  What is the behavior if you use 0x0009 bit 0 to globally disable all lanes rather than using all 10 individual lane-disable bits?  Try using 0x001 and 0x7FF in register 0x0009 just to make sure we cover all combinations.\n3.  Is the line-side receiver input quiet during this test (no signal from CFP2) ?", "CreatedOn": "2017-04-09 17:43:51", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/12/2014 1:28:00 PM PST\n---------------------------------------------\nNo longer reproducible with Microcode Version 000D", "CreatedOn": "2017-04-09 17:43:51", "CreatedBy": "admin"}]}, {"Number": "CS2030277", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 19-Jun-2015 10:10AM PST\n---------------------------------------------\nHi Kai,\n\nI'll have them try register 1.9 bit 0.  I was confused when looking at that register initially since it referred to 10 lanes instead of 4, so I assumed it was referencing the system side.\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 07:48:44", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 18-Jun-2015  3:08PM PST\n---------------------------------------------\nHi Steve,\nis 1.9 not working? \n\nI'd rather not the customer use 1.F405 14/13 (force pin/force value) and 1.806A.0 for VSR/Hexacore, but you can try those as well.\n\nThanks,\nKK", "CreatedOn": "2017-04-06 07:48:44", "CreatedBy": "admin"}]}, {"Number": "CS1904346", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 24-Feb-2014  5:33PM PST\n---------------------------------------------\nThe customer case is in Pending AE Team for Clarification or Assistance per my request that we compare our test board startup measurements with the customer's.  If you want to say you are unable to reproduce the problem I will simply close the customer case.  Please advise.", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 23-Jan-2014  8:16AM PST\n---------------------------------------------\nI haven't seen the broken-down power numbers yet, so that file helps a lot.  Thanks.  Up until now, all we had was the max power of 3W for the whole chip.\n\nWe're currently using Mode 1 (100GBASE-LR4) and Mode 3 (100GBASE-SR10).  We also intend to support Mode 4 (10x 10GBASE-SR) but we haven't tested it yet.  \n\nWe're not using any OTN modes (obvious, since we're using the '794).\n\nLet me know if you need anything else.\n\nJason.", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 23-Jan-2014  8:16AM PST\n---------------------------------------------\nIt's not surprising there is a lot of trauma when the device is first brought out of reset.  Are these transients affecting other parts of your power distribution, or are the filter circuits adequately protecting the main supplies?  If the phenomena is localized to the isolated supplies, and the device is otherwise OK, there should not be a problem.  That said, we can have the factory review these scope shots to see if the are cause for concern.  There can be a lot that goes into this, such as board layout.  Are you using isolated planes for the locally isolated supplies? Hopefully you are not just routing these in etch.  For completeness, can you add a picture to illustrate whether the transients are finding their way back through the filters to the supplies feeding the filters?  It should be sufficient to use the worst one, which looks like the avdd_rx overshoot on 1v.\n\nPlease fill-in the Customer Project field and Software Version (possibly n/a) on your next update.", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Mar-2014  3:13PM PST\n---------------------------------------------\nHello Peter,\n yes we wont be able to perform these tests, if the ringing is right when you power off or power ON, then why do you say \n\" I would expect lots of turmoil when the chip comes out of reset\"\n\nif the proper power on reset sequence is followed, i dont think you will see any turmoil of any sorts.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 06-Mar-2014  1:22PM PST\n---------------------------------------------\nNishant, I neglected to follow-up on this one, so have re-opened it.  If you can be a little more specific about any power-up requirements to which I should draw the customer's attention, I will have them do one more system check.  The 84793/94 data sheets don't say much, other than no power sequence is required and reset should be held for 50us after power becomes stable.", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 23-Jan-2014  1:19PM PST\n---------------------------------------------\nNote that some of the orignal postings to this case were from another FAE, no longer here.  For unedited version please refer to the original related customer case.  i am adding scope shot from customer showing that the filters are indeed doing their job preventing the localized noise from getting back into the unfiltered supply.  Customer has also noted they did use plane cutouts for the local supplies.  Schematic is attached showing their filter implementation.\n\nIf we have recommendations on voltages not to exceed, do these recommendations also include a period of time over which the voltages should not exceed limits.  In this case it appears our own part is the cause of these voltage transients.\n\nCan we make a few measurements on our own test board for comparison?", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 26-Mar-2014  5:21AM PST\n---------------------------------------------\nConfirmed that we have no published requirements or guidelines.  In fact the data sheets says there are no requirements, which is why I pressed once you mentined we did have some requirements.  It all seems a bit conflicting to me, and we could do a better job of describing this for customers and our own support team.  Maybe when some actual field training is offered we can collectively get this right.", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 23-Jan-2014  8:16AM PST\n---------------------------------------------\nJason\n\nI am  opening an internal CSP case on this issue.\n\nHad you received any per rail 84794 power \nnumbers earlier?\nI have attached the latest power numbers for the\nBCM84794.  It is from a84794 case even though the it mentions\nthe 84793..\n\nWhat mode or modes are you using the device in?\nThere is mention in the CSP cases that power requirements\nvary based on the mode selected.\n\nThere is a mention of the new requirement for the DVDD supply\nfilter, but the underlying reason is not mentioned.\n\nthanks\n\nsteve", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 24-Feb-2014  3:45PM PST\n---------------------------------------------\nHello Peter,\nWhat is the status of this issue, I see this has been tackled in the past but I could not conclude any closure from this CSP or the Clone.\nCould you please let me know the present situation. \nI have reviewed your schematic and the power filters are inline with our HWUM guidelines. We are note aware of ringing issue as noted above.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 25-Mar-2014 12:56PM PST\n---------------------------------------------\nStil open:  What are the power sequencing requirements to which you earlier referred?", "CreatedOn": "2017-04-06 01:44:11", "CreatedBy": "admin"}]}, {"Number": "CS1904439", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 22-Jul-2015  2:18PM PST\n---------------------------------------------\nHi David,\n84794 would use exact same routine as 84793.\nTo answer your question, Yes mdiospi_download_84790_93.vbs  will work for 84794.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:05:33", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 22-Jul-2015  4:15PM PST\n---------------------------------------------\nNishant,\n\nYes we figured that but you didn't address the errors that are within the vbs script that is given out to customers.  We need to fix this and update the packages.  That was what I was trying to point out.\n\nDavid", "CreatedOn": "2017-04-06 08:05:33", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Nov-2015  3:59PM PST\n---------------------------------------------\nHi David,\nwe are not touching any of the vb scripts comments for now and changing this to resolved.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:05:33", "CreatedBy": "admin"}]}, {"Number": "CS2265850", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 15-Oct-2014  6:46AM PST\n---------------------------------------------\nThe difference is AC coupled traces vs. having the CFP4 I/O drive the signals. \n\nWith what I referred to as the regular I/O it is possible to loop back at the electrical interface at the I/O and we did do that test. Refer to figure 4-2 from the CFP MSA: http://www.cfp-msa.org/Documents/CFP-MSA_CFP4_HW-Spec-rev1.0.pdf. Without the loopback option with the regular CFP4 I/O the optics and loopback fiber were used. \n\nSo it's not fiber specifically because we're not going through the optics of the I/O when turning on loopback with the regular I/Os. In that case we don't even need a fiber loopback cable. We only see this issue with the passive loopback I/Os which just have AC coupled traces.\n\nI attached the datasheet to the passive loopback that we're testing with and seeing issues.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 16-Oct-2014  8:14AM PST\n---------------------------------------------\nAlexey,\n\nYou note that in the prior REV board mode 3 works but not mode 1.  Would I assume that you can no longer support mode 3 in order to verify the same fuctionality (or lack there of)?  \n\nWhen you plug this loopback device in rather than use the optical module with loopback enabled, does you software just use reset defaults on the I/O module and have no software configuration?  Or does it use the same MDIO commands on it that it does the optical module?  \n\nDo you always read link status from IEEE registers @8000  Reg 1 bit 2 as link?  for all configurations?  Can you do a show of that register in the failing and passing scenarios?  If you are seeing link in both situations, have you traced your code to see that some check isn't blocking the final result?\n\nDavid", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 15-Oct-2014  6:52AM PST\n---------------------------------------------\nI should have also mentioned that we're not using the optional refclk inputs to the CFP4 I/O. This is an optional clock that the I/O could use for transmitter path retiming and that could have been used for the regular I/Os. We have left the refclk input pins to the CFP4 I/O connector unconnected.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 14-Oct-2014  4:27PM PST\n---------------------------------------------\nHi Alexey.  If I am reading this correctly, the difference between the loopback \"card\" and loopback cable is ac-coupled copper traces vs. fiber.  Am I reading this correctly?  I don't know if we've run into this type of loopback device.  Can you provide a link or data sheet that we may inquire internally?", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 16-Oct-2014  2:16PM PST\n---------------------------------------------\nWe found the problem. This was a configuration error on our part. We were having problems with this type of I/O because our SW is checking the application code of the I/O (register 8003 on the I/O) and that was returning 0x00 which is an undefined type. This was leading to the gearbox being set to mode 4 based on how we handled this code.\n\nNo further help is required on this issue. I have marked this issue closed.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Oct-2014  1:24PM PST\n---------------------------------------------\nDoes the NP5 have any problems if you use the System Side loopback as shown in 84794-DS03 Figure 26 ?  Unfortnately there isn't a line-side loopback point going back to the MAC as that would more closely approximate your test conditions.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Oct-2014 12:07PM PST\n---------------------------------------------\nI see the data sheet says that the photo is TBD.  Can you supply one?  Does this jjust plug into the PCB footprint itself for the normal module connector?", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Oct-2014 12:26PM PST\n---------------------------------------------\nNow that I dug up the referenced document I believe I have the right view.  When using the electrical loopback on the actual module, the module drives the 84794 and the 84794 drives the module.  With the ac-coupled trace plugin, the 84794 essentially drives itself.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 15-Oct-2014  1:46PM PST\n---------------------------------------------\nI attached 2 pictures of the loopback I/O. It looks like a regular CFP4 I/O, it has the same interface and connects to our system the same way.\n\nI forgot to mention the system side loopback check with the gearbox. We did do this and there were no problems. So with the passive loopback CFP4 I/O in the system and the gearbox in normal pass-through operation there's no link at the NP5 MAC. When we enable the system side loopback at the gearbox with the I/O still in place, NP5 has link and there are no issues.", "CreatedOn": "2017-04-09 20:01:59", "CreatedBy": "admin"}]}, {"Number": "CS2276377", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/24/2014 1:40:00 PM PST\n---------------------------------------------\nThe following is based on manually stepping through phy84793.c in the SDK 6.3.5 release.  There are a few changes from 6.3.3, and you should diff and review these yourself.  I found that the _phy_84793_chage_div() routine has been renamed to _phy_84793_div_change(), and that it now takes the mode as an argument rather than discovering it by its own internal call.  There are other cosmetic differences, but I do not see anything that changes basic configuration schemes or adds any new options.\n\nIf you trace through the code, you should find that there is no difference for Mode 3 based on whether the reference clock is 156.25 or 161.13.  Indeed this is consistent with 84792-DS02 Table 8.  The SDK driver sets refclk_code=5 for Mode 3.  Are you able to operate properly selecting refclk_code=5?  You post from [18-Mar-2014 01:17:05 PM ] only mentions using refclk_code=0 here.\n\nIn summary, the SDK driver actually appears to make sense, except for the quandary of why the 156.25 or 161.13 reference is not important.  I would expect there to have to be a small difference in the pll divider.  Perhaps that is being dynamically controlled with the assistance of microcode.  I will have to find out.\n\nFor reference all in one place, here were results reported on [23-Jan-2014 08:47:08 AM ] but these would have been when using the older microcode.\n   + Passing traffic through gearbox:  \n   + mode1, refclk=0000, pass no issues\n   + mode3, refclk=0101, failure early when injecting packets. Not sure if we have a lock\n   + mode3, refclk=0000, failure early when injecting packets, Not sure if we have a lock\n   + mode3, refclk=0000 + setting up/66 divider, pass no issues \n\nUnless I\u2019m still missing an open question, please just report back on whether you are able to run with Mode 3 and refclk_code=5, using 156.25 as the reference clock.  Based on this (hopefully last) piece of feedback, I can clarify the use of refclk_code for you relative to reference frequency.\n\nNote also from case 771589 that you should revert to 00B for microcode rev.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 9:25:00 AM PST\n---------------------------------------------\nGiven what seems to be some conflicting information having been provided (at least compared to today's released information), I'd like to see the results from a set of baseline tests where the values in the 84794-DS01 data sheet are used exactly as stated.  This would involve Table 8, Table 14, and Table 15.  Make sure  0xF403[3] is set to go with 0xF403[2:0].  Are you already doing this in your code now?  For each of the two modes, attach the exact programming sequence you are using.  A packet test is probably sufficient here.\n\nThe email thread that is attached was actually from Ralph Giuffre, may he rest in peace.  It appears this was to support you prior to 84794 documentation, and it points you, as I suspected, to 84793 information.  That is probably the source of some of your programming examples.  I know that the SDK is not involved here.  In that email there is a spreadsheet with mode/refclk values, but the 156.25MHz in your modes is not included.  Perhaps some of the out-of-band information was filling-in for what was missing at the time.  This is why I would like to baseline everything using the officially released documentation.  84794-DS01 and the recommendations made earlier cannot both be correct.\n\nOnce we have the baseline behavior based on the data sheet information, we are in a better position to request the factory to re-check the values.", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 6:36:00 AM PST\n---------------------------------------------\nSorry if I'm confused on the background, but to summarize my understanding of the problems:\nBased on 84794-DS01 Table 8, your application uses either the first (100G-LR4) or third (100G-SR10) lines in the table.  Physical reference clock on the board is always 156.25.  Based on this, the refclk_code should only ever be either 0000 or 0101.  The user_modesel would be either 000 (Mode 1) or 010 (Mode 3).  Correct so far? \n\nI'm having a hard time resolving your programming values against the documentation.  Please help me with the following so I know how to summarize for additional factory help.  It sounds like some of your programming is coming from some docSafe material (for the 84793?)\n\n>>Refclk setting of 0101 (161MHz refclk) worked for line (mode 1 and mode 3) and system side PRBS testing,\n>>Mode 1 worked, mode 3 did not (for packet testing)\nrefclk_code=0101 should be invalid for Mode1.  Where do you see it specified for 161?\nrefclk_code=0101 is valid for 156 in Mode 3.\n\n- Refclk setting of 0000 did not work for line side (mode 1 or mode 3) PRBS testing or passing traffic through the gearbox. We didn't test system side PRBS. This was the original reason for submitting this ticket. We were confused since documentation was indicating that we were setting a refclk code for 161MHz, while our refclk is actually 156.25MHz. Setting the 156.25MHz refclk code didn't work for us.\n\n>>Refclk setting of 0000 did not work for line side (mode 1 or mode 3) PRBS testing or passing traffic\nrefclk_code=0000 is valid for 156 in Mode 1.\nrefclk_code=0000 is not valid in Mode 3.\n\nJust a couple administrative requests too.  Please add the project name in Customer Project fied.  It sounds like Software Version is prabably N/A since you aren't using the SDK.  When you update a case that was previously pending additional information, please move the status to Assigned.  It helps when filtering for new updates.  Thank you.", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/4/2014 7:46:00 AM PST\n---------------------------------------------\n1.\tAssert reset pin, de-assert reset pin\n2.\tSet register 0xF402 (COM_CTL1) to 0xFFFE\n  3.\tMicro-controller reset\n  a.\tSet register 0xF416.15 to 0\n  b.\tSet register 0xF416.14 to 1\n  c.\tRead register 0xF413, 0xF409 to empty message\n  d.\tSet register 0xF409 to 0x20\n  e.\tSet register 0xF40A to 0x20\n   f.\tSet register 0xF412 to 0x8004\n  g.\tSet register 0xF402 (COM_CTL1) to 0x3F7\n  h.\tSet register 0xF402 (COM_CTL1) to 0x3FF\n4.\tDownload microcode\n5.\tSetting Clock divider 66 if setting to mode 3\n  a.   There is big sequence for doing this. We followed\n        - SDK 6.3.3:_phy_84793_change_div\n        - evalKit: utils_prbs.vbs : dev_mode_10G_156_312M\n6.\tSet register 0xF404 to clock selected\n  a.\t0000 for 156MHZ\n  b.\t0005 for 161MHZ\n7.\tSet register 0xF403.3 to 1\n8.\tSet register 0xF403[2:0] to mode selected (either 0 or 2)\n9.\tPLL reset\n  a.\tSet register 0xF439[3:2] to 0x3\n  b.\tSet register 0xF439[3:2] to 0x2\n  c.\tSet register 0xF439[3:2] to 0x3\n  d.\tSet register 0xF439[3:2] to 0x1\n\n\nOur packet test:\n 1. Send packet to gearbox system side RX\n 2. Gearbox is expected to pass packet to CFP2 connected\n 3. CFP2 looping back to itself then sends the packet back to gearbox line side\n 4. We are expecting the same packet transmitted from gearbox system side TX", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/26/2014 7:19:00 AM PST\n---------------------------------------------\nThe sequence cuts-in immediately following the microcode load, so it would replace some of the SDK routines - just don't know which ones yet.  Yes, please verify it first as a standalone solution and we'll proceed from there relative to the more general code.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 1/14/2014 9:49:00 AM PST\n---------------------------------------------\nAlexey\n\n100G-SR10 can use 156.25 as per 84794-DS01-RDS\nTable 8: BCM84794 User Mode Register Settings\n\nFrom an internal  CSP case:\nQuestion:\n=======\n4) When operated in 100G CFP2 mode, which clock source we should feed to 84794?\n    156.25MHz, 161.13MHz, 312.50MHz or 322.26MHz?\n\nAnswer:\n======\n\"CFP2 mode\" is an ambiguous term, CFP2 as the name says '2' can \nbe used for two modes MODE1 and MODE3 , i.e. LR4 and SR10\nthe clock values mentioned above are correct.\n\n\nThis is a script from a recent CSP case using 156.25:\n\nQuestion :\n=======\nWe want to implement the 100Gbase-SR10 mode;\nthe reference clock is 156.25Mhz.\nI think we can follow below sequence for SR10, correct?\n\nAnswer is:\n========\n1), hardware reset, then download ucode;\n2), set F403.3:0 ref_code='0000'; // for 156Mhz     0x0101 is for 161 mhz clock.\n3), set F404.3:0 user_modesel='1010\";  // for mode 3.\n4)resets\nW 1.F439          0x001D\nW 1.F439          0x0019\nW 1.F439          0x001D\nW 1.F439          0x0015\n\nI am comparing this script to some other scripts to\nlook for variations.\nNote this implies DS Table 8 \u2013 \u201crefclk_code\u201d needs correction \u2013 checking that now\n\nFrom comments it appears SR-10 is not supported in SDK6.3.3.\nIs this one reason for your concern of the clocks supported?\n\nWith PRBS are you testing from Device_1 to Device_2\nor with loopbacks?\n\nWhat does \u201clanes 4-9 locking\u201d imply?\ni.e.\nHow do you know they are locked?\n\n\nsteve", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 9:39:00 AM PST\n---------------------------------------------\nLooking ahead, and assuming there isn't an obvious programming problem discovered in the process, the next thing we would want is more visibility into the errors.  How are the tests run?  What is the data path (pictures are better than words)?  Where/how are the errors detected?  What are the type(s) of errors seen?  What is rate of errors and the repeatibility, etc.?", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 1/23/2014 8:47:00 AM PST\n---------------------------------------------\n>>Physical reference clock on the board is always 156.25.  Based on this, the refclk_code should only ever be >>either 0000 or 0101.  The user_modesel would be either 000 (Mode 1) or 010 (Mode 3).  Correct so far? \n\nYes this is correct when looking at the software manual and datasheet. Note that in Steve Taylor's previous answer he told us to use a refclk code of 0000 with mode 3, which means we would always use a refclk of 0000\n\n\"\n1), hardware reset, then download ucode;\n2), set F403.3:0 ref_code='0000'; // for 156Mhz     0x0101 is for 161 mhz clock.\n3), set F404.3:0 user_modesel='1010\";  // for mode 3.\n4)resets\nW 1.F439          0x001D\nW 1.F439          0x0019\nW 1.F439          0x001D\nW 1.F439          0x0015\n\"\n\n>>It sounds like some of your programming is coming from some docSafe material (for the 84793?)\n\nI asked the SW engineer here at Sandvine who worked on this. His response \"we wrote our own driver. The reason is gearbox is not connected to any Broadcom port so we have to write our won. But we mostly follow the steps in the SDK/scripts/datasheet\".\n\n>>refclk_code=0101 should be invalid for mode1. Where do you see it specified for 161?\nMy mistake here. Initially we were using refclk=0000 with mode1, refclk=0101 with mode3.  I'll summarize the mode/refclk settings that we were using and the test results:\n\nPassing traffic through gearbox:\nmode1, refclk=0000, pass no issues\nmode3, refclk=0101, failure early when injecting packets. Not sure if we have a lock\nmode3, refclk=0000, failure early when injecting packets, Not sure if we have a lock\nmode3, refclk=0000 + setting up/66 divider, pass no issues\n\nTalking to the SW engineer about the divider code that we used, he indicates that he found it here:\n- SDK 6.3.3:_phy_84793_change_div\n- evalKit: utils_prbs.vbs : dev_mode_10G_156_312M\n\nI mentioned line and system PRBS test results as well, but I don't want to add all that info here. We have a separate issue where we had to add a delay after micro-code download and before accessing indirect-registers. Adding the delay got rid of an issue where intermittently lanes wouldn't lock (no CDR lock). That's being (or will be) tracked in a different case.\n\nOur initial tests with gearbox were line side PRBS tests. WIth this setup, mode3 and refclk=0101 worked and we were having intermittent issues. While investigating this we ran into the /66 divider code. After mode3 and refclk=0101 failed when passing traffic through the gearbox, we tried out the /66 divider code with refclk=0000 and this worked for passing traffic through the gearbox at mode3.", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/10/2014 12:26:00 PM PST\n---------------------------------------------\nJust a reminder that when updating a case, please make sure you change the Status and  Pending Reason fields.  If those remain static we may not notice your updates.  Please also update Customer Project and Software Version (as applicable).\n\nWhat is the actual open issue at this point?  The original case description mentions confusion with clock reference, but I believe that has been answered.  It is still unclear why there are multiple references frequencies being discussed.  Please update the case summary if we have indeed moved to a different topic.  My understanding now is that you are questioning the driver that you developed earlier, and we will proceed based on that assumption, comparing you step-by-step instructions with the SDK code.\n\nIs the history of you driver development that it started based on evaluation board .vbs scripts?  If so, have you validated those steps against the full support now available in the SDK code?  What I\u2019d expect is that you would start with phy_84793_init(), and go from there.\n\nThere are flowcharts illustrating MDIO Download in 84793-SWUM102 Figures 3 and 4.  It appears that step up to and including Step 4 are you reset and microcode load.  Is this correct?  Do you believe this is working properly based on getting the Good Checksum = 0x600D as shown at the bottom of Figure 4.\n\nIn step 5, you are \u201ccalling\u201d _phy_84793_chage_div(), actually misspelled in the SDK.   What are the args for setmode and refclkin?\nSTATIC int32 _phy_84793_chage_div(int32 unit, soc_port_t port, uint16 setmode, uint16 refclkin);\n\nThe SDK also has routines _phy_84793_set_refclk_code() and _phy_84793_config_mode().  Are you using these routines or have their equivalent code included?  See next observations.  I would encourage you to use these routines.\n\nStep 6 actually looks like _phy_84793_set_refclk_code().  Agreed?  Why do you list two values?  You board is always based on 156.25MHz from earlier posts, as I understand.\n\nStep 7 and 8 looks like they are similar to _phy_84793_config_mode(). \n\nStep 9 looks like the SDK routine _phy_84793_dev_mode_config().\n\nIn the packet test described, what are the results?  If the results are no as expected, what intermediate information is available?", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/25/2014 10:29:00 AM PST\n---------------------------------------------\nWe just did take a look at SDK6.3.5.\n\n1. SDK6.3.5 is still using microcode D009. Is D009 recommended release of the microcode?\n\n2. Microcode 000B + 161MHZ + Mode 3 + _phy_84793_div_change() does not work for us.\nCDR on BCM84794 does lock on all lanes. But link faults reported by npu.\n\n3. We notice that in 6.3.5, _phy_84793_div_change() is also applied to Mode 1.  When we apply _phy_84793_div_change() to Mode 1 (with 156MHZ), CDR does not lock on all lanes on BCM84794.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/27/2014 12:50:00 PM PST\n---------------------------------------------\nFollowing the attached sequence works for us. We will run more tests and we'll close this if no one issue comes up. Thanks.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 4/1/2014 10:29:00 AM PST\n---------------------------------------------\nTested with the provided instruction for setting clock mode and divider and everything seems to be working for both 10x10 and 4x25.", "CreatedOn": "2017-04-09 16:54:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/25/2014 12:47:00 PM PST\n---------------------------------------------\n1.  SDK code often gets released with old microcode.  Continue to use 00B.\n2.  What yesterday's posts explains is that the SDK is not making a distinction between 156 or 161 reference clock, and I was trying to see if your conclusion was the same.  Note that the SDK comments explicity state 161 as the reference clock for modes 2, 3, and 4.  If indeed there should be separate treatment for 156 and 161, then it is reasonable 161 should not work for you given you are actually using 156.  From comments on today's call, we will get you a list of some additional register writes that are required.  My conclusion at this point would be that the SDK code does not yet support 156 reference for modes 2, 3, and 4.\n3.  While _phy_84793_div_change() is also applied to Mode 1, it is called with setmode=0 where Modes 2, 3, and 4 use setmode=1.  Did you take that into account?  Does it make any difference?", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/21/2014 7:56:00 AM PST\n---------------------------------------------\nHello.  As there has been a change in support for this project, would you please provide a status update on this question?  It seems Steve gave some information in response to your questions based on our product knowledge base.  When updating, note there are new fields in the case body which must be filled-in.  If you can give me a general outline of the design you are working on as well, the additional background will help for future inquiries.  Is this a standlone 84794 application, or is there a switch involved with SDK software?  Thank you.", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 2/24/2014 5:48:00 PM PST\n---------------------------------------------\nI'd like to mark this resolved due to its inactivity, but it does not appear anything is really resolved.  Please advise, else we will need to close it at least until you get back to working on the problem.  Thanks.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/18/2014 1:17:00 PM PST\n---------------------------------------------\nWe tried out the new Microcode 000D. We confirmed the clock divider code (_phy_84793_chage_div)  is still necessary.\n\nWe have link detection now on the system side of BCM847943. Without the clock divider code, the link does not come up.\n\nWe followed microcode download procedure in the driver. We get good checksum and correct version number reported so we know that part is correct.\n\nOur clock/mode configure procedure follows _phy_84793_config_mode, except we are not sure what is the correct CLOCK value to use for mode PHY84793_MODE_10X10G_TO_10X10G_SYNC, aka Mode 3. Since we want 156MHZ frequency, should we set the lock to 0x0 or 0x5 when we are configuring Mode 3? We found 0x0 works for us, and only when we do the clock divider.\n\nOur clock divider code is implemented based on _phy_84793_chage_div, setmode is 1, refclkin is 0", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 1/22/2014 7:33:00 AM PST\n---------------------------------------------\nThere have been some updates on this. Initially our testing was focused mainly on running line side PRBS tests. When I submitted this ticket this was the only testing that we had conducted and we had run into some issues here.\n\nOur setup: Network processor -> Gearbox (PHY84794) -> CFP2 I/O\nReference clock is fixed at 156.25MHz, we don't change this at any point\nMode is 1 or 3 depending on the inserted I/O. SW detects the I/O and sets the mode accordingly.\n\nFindings after conducting further tests:\n\n-\tRefclk setting of 0101 (161MHz refclk) worked for line (mode 1 and mode 3) and system side PRBS testing, but not for passing traffic through the gearbox at mode 3. Mode 1 worked, mode 3 did not.  For the test where we pass traffic through the gearbox, we have limited visibility and we're not sure if there was even a lock. The failure happened very early when injecting packets. If more information on the failure is required, we can obtain this. \n\n-\tRefclk setting of 0000 did not work for line side (mode 1 or mode 3) PRBS testing or passing traffic through the gearbox. We didn't test system side PRBS. This was the original reason for submitting this ticket. We were confused since documentation was indicating that we were setting a refclk code for 161MHz, while our refclk is actually 156.25MHz. Setting the 156.25MHz refclk code didn't work for us.\n\n-\tRefclk setting of 0000 + setting up /66 divider worked for line and system side PRBS testing and for passing traffic through the gearbox. No known issues here so far. We still need to run more tests to verify that there are no issues, but this look to be our best configuration. There is no documentation about the /66 divider and even the code looks to be fairly limited with its comments. We found out about this by looking through the scripts provided on docsafe and noticing this code applied with a refclk of 156.25MHz.\n\nOur best configuration right now involves using code for a /66 divider and there's no documentation on this. Can you please verify whether we need to use this code. If you don't know what I'm referring to (just saying /66 divider code is not sufficient) let me know and I'll obtain the exact registers that we're writing to. I'm not part of the SW group, I'll have to talk to one of the SW guys to get this.", "CreatedOn": "2017-04-09 16:54:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 2/26/2014 9:26:00 AM PST\n---------------------------------------------\nThis is still an open issue for us. I've asked for the SW engineer who worked on the code on our end to chime in and provide details since it's gotten to the point where we need details on the code implementation. Hopefully that will be coming soon.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/20/2014 9:43:00 AM PST\n---------------------------------------------\n> Without the clock divider code, the link does not come up.\nSince this code is part of the SDK driver, it is required.  Please continue to use it.\n\nThanks for providing the other values you are using.  We will review that and match it up against the SDK code and the data sheet.  We earlier identified some issues with the data sheet, and it is possible those have not been corrected but that driver code is using the right values (these things sometimes get out of sync).  We will post again after another pass of code review, or if we have additional questions.  Status changed to WIP.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/26/2014 5:12:00 AM PST\n---------------------------------------------\nThe attached file was provided last night, with no particular correlation to the SDK code.  I am seeking additional instructions on how to use these relative to the existing SDK driver model used for your current code.  As time allows I will try to reverse engineer it.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/26/2014 7:13:00 AM PST\n---------------------------------------------\nRaw register read/write from the file isn't too hard to follow. We will give it a try and let you know how that goes.", "CreatedOn": "2017-04-09 16:54:18", "CreatedBy": "admin"}]}, {"Number": "CS1746400", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 11-Sep-2014  4:05PM PST\n---------------------------------------------\nHi Kai-Ming,\n\nEither the single port 82790 or dual 82792 would work for customer application.\n\nregards,\nDave", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 12-Sep-2014  4:05AM PST\n---------------------------------------------\nHi David,\n\nThanks for your help.\n\nLast question if customer choice BCM56960 and config the MAC side interface to 25G per lane can support 82780/792?\n\nBRs\nKaiming", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 09-Sep-2014 10:09AM PST\n---------------------------------------------\nHi Kai-Ming,\n\nwe need to know more than module info to recommend a solution for customer.\nwhat is their application?\nwhat's the interface between MAC & PHY?\nare they looking for GearBox (MLD) function?\nwhat are the required data rates (system & line side of PHY)?\nwhat's their schedule?\n\nregards,\nDave", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 12-Sep-2014  9:31AM PST\n---------------------------------------------\nHi Kaiming,\n\nplease describe the application in detail.\nis customer looking for something which connects the MAC & phy with 25G serial interface? if so, what will be the data rate on the line side?\nare there any other requirements for this application?\n\n82780 does not support 25G rate application.\n82792 does not support 25G serial connection on system side.\n\nregards,\nDave", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 09-Sep-2014  7:54PM PST\n---------------------------------------------\nHi David,\n\nDiscuss w/ MSI.\nThis is the first project request comes from Fortinet and will totally handle hardware by MSI(include chip select and tap out).\nSoftware will by Fortinet.\n\n1. If yes, the MAC to PHY interface same as BCM56640 to BCM84794 CAUI.\n2. They're looking for MLD function.\n3.  Data rate can meet SFP28 and QSFP28 in MAC side and PHY side.\n4. This project under concept stage.\n\nBRs\nKai-Ming", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 06-Oct-2014  2:00AM PST\n---------------------------------------------\nHi David,\n\nThanks for your help.\nCustomer will use CAUI interface link to BCM56960.\nNow, they'll provided function to Fortinet and under discuss.\nI set to closed.\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 04:53:31", "CreatedBy": "admin"}]}, {"Number": "CS1642167", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 01-Jul-2014  4:00PM PST\n---------------------------------------------\nHello Aneesh,\nThe only difference between 84793 and 84794 is that 84794 does not support Duobinary precoder/Decoder functionality. For line side ODB feature please use 84793.\n\nYes, the clocking requirement you mentioned exists for both 84793 and 84794.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:17:17", "CreatedBy": "admin"}]}, {"Number": "CS1843967", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Vivek Prabhu[Broadcom Corporation]\nUpdate date: 15-Mar-2015 11:41PM PST\n---------------------------------------------\nHI KK,\n\nThank you for your feedback.\n\nI did not see any example in the attachments in your update to the CASE.\n\nCisco wishes to know how to rate the Eye-scan test result? In the absence of any mask or other qualifying criteria how do they qualify these results?\nPlease advise.\n\nThanks,\nVivek", "CreatedOn": "2017-04-06 06:51:39", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 16-Mar-2015 10:16AM PST\n---------------------------------------------\nHi Vivek,\nMy apologies, guess the attachment didn't work correctly. Here it is again...\n\nOne warning on the Eye-Scan. It is NOT and never will be a \"replacement\" for a real scope plot. It's only meant to give the user an \"Idea\" of what the eye looks like and is a \"Guide\", so to speak. Thus, having a similar \"Eye\" to what I attached here, isn't necessarily a reason to confirm the channel is ideal.\n\nMuch Thanks,\nKK", "CreatedOn": "2017-04-06 06:51:39", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 16-Mar-2015 10:17AM PST\n---------------------------------------------\nASCII example given - noted that this function is a \"GUIDE\" only.", "CreatedOn": "2017-04-06 06:51:39", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 13-Mar-2015  2:12PM PST\n---------------------------------------------\nHi Vivek,\nI'm not quite clear on what you are asking so here's my best guess:\na.How many iterations or data samples are taken by slicer for each BER plot?\n-Eye Scan slicer, though independent from Data slicer work no differently. Thus, the number of data samples is simply the Baud rate multiplied by the time (25G/sec or 10G/sec) as this serdes is simply NRZ. Am I missunderstanding your point?\n\nb.How a good result for the Eye-scan test looks like for each of the three modes, VSR, nPPI and CAUI. They need this to compare with their Eye-scan result and check if it is good enough?\n-This is difficult to quantify as the customer's board has very different Insertion and Return Loss characteristics from ours. Here's an example of our board, but keep in mind that your customers may be entirely different.\n\nThanks,\nKK", "CreatedOn": "2017-04-06 06:51:39", "CreatedBy": "admin"}]}, {"Number": "CS2008799", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 25-Mar-2014  6:26PM PST\n---------------------------------------------\nHello Aneesh\nThe max load for this device is 1.9kg.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:21:44", "CreatedBy": "admin"}]}, {"Number": "CS1804713", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Chris Zhu[Comtech Broadband Corporation Limited]\nUpdate date: 15-Oct-2015 12:30AM PST\n---------------------------------------------\nHi Arthur,\n     Who is the SW PLM for this issue?\n     Could you pls paste his email?\n\nThanks,\nChris", "CreatedOn": "2017-04-07 13:19:03", "CreatedBy": "admin"}, {"Notes": "Updated by: Arthur Wu[Broadcom Corporation]\nUpdate date: 15-Oct-2015  1:06AM PST\n---------------------------------------------\nHi Chris,\n\nThe PLM should be Asif. Please check our marketing for his mail.\n\nThanks,\nArthur", "CreatedOn": "2017-04-07 13:19:03", "CreatedBy": "admin"}, {"Notes": "Updated by: Arthur Wu[Broadcom Corporation]\nUpdate date: 14-Oct-2015  7:58PM PST\n---------------------------------------------\nHi Chris,\n\nIn the Release Notes of SDK647, it mentions that the status of 100G is LGA (limited GA).\nThus, SDK647 doesn't fully support 100G. Please check our SW PLM to see which version of SDK fully supports TD2+ vs. PHY8479x.\n\nThanks,\nArthur", "CreatedOn": "2017-04-07 13:19:03", "CreatedBy": "admin"}]}, {"Number": "CS2009397", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 03-Mar-2016  6:40AM PST\n---------------------------------------------\nHi Kai,\n\nSorry to bother you.\nDo you have any idea?\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 10:30:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 03-Mar-2016 10:18AM PST\n---------------------------------------------\nHonestly Kaiming,\nI have no clue what you are asking? \n\nAre you telling me that in SR10 mode, the Transmitter is not outputting anything? bad waveform?\n\nAre you telling me that it cannot equalize in incoming signal? \nIs the complaint relevant to the Receiver or the Transmitter?\n\nPlease clarify. In any case, I can dig up reports for you, but keep in mind this part has been shipping w/out issue for 4+ years. Not sure you're going to find much in the report regarding a failing port that's not a design flaw on the customer side.\nThanks,\nKK", "CreatedOn": "2017-04-06 10:30:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 07-Mar-2016  5:19AM PST\n---------------------------------------------\nHi KK,\n\nThanks for the update.\nI'll on site @ ADLINK and provided more information and open new case.\n\nAnd I'll set this case to closed.\nBecause the BCM84794 H/W circuit same as Fortinet other project.\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 10:30:38", "CreatedBy": "admin"}]}, {"Number": "CS1901799", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 11-Mar-2016  2:16PM PST\n---------------------------------------------\nHi Hanyu,\n\nhave you had a chance to review \"PRBS Generators and Checkers\" section in 84793-SWUM102-R (applicable to 84794)?\nit should answer the questions you've sent.\n\nregards,\nDave", "CreatedOn": "2017-04-06 10:37:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Hanyu Hsu[Avnet Asia Pte Ltd]\nUpdate date: 11-Mar-2016  8:14PM PST\n---------------------------------------------\nHi David,\n\nYes, as reference the table, I got the register sequence as below, could you help to check it?\n\nBut there is no square wave register at table 14, does it mean we don't support square wave under SR10 mode?\n\n---------\n//Ethernet mode setting, mode 3\n1.F403=0xa\n1.F404=0x5\n1.F439.2=1\n\n//set tx PRBS\n1.F453=0x09ff     // set lane0-9 all to b'1\n1.F454=0x8069 \n1.F455=0x006C   // prbs 31,[8,3:2], [6:5], 6c: prbs 31, \n1.F452=0x000C \n1.F452=0x0002 \n\n\n/Rx\n//set tx PRBS\n1.F453=0x09ff     // set lane0-9 all to b'1\n1.F454=0x8069 \n1.F455=0x006C   // prbs 31\n1.F452=0x000C \n1.F452=0x0002 \n--------------------------\n\n//set tx PRBS\n1.F453=0x09ff     // set lane0-9 all to b'1\n1.F454=0x8069 \n1.F455=0x0160   // prbs 31,[8,3:2], [6:5], 6c: prbs 9\n1.F452=0x000C \n1.F452=0x0002 \n\n\n/Rx\n//set tx PRBS\n1.F453=0x09ff     // set lane0-9 all to b'1\n1.F454=0x8069 \n1.F455=0x0160   // prbs 9\n1.F452=0x000C \n1.F452=0x0002 \n\n---------", "CreatedOn": "2017-04-06 10:37:25", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 02-May-2016  4:15PM PST\n---------------------------------------------\nmoving this to resolve since no further questions.", "CreatedOn": "2017-04-06 10:37:25", "CreatedBy": "admin"}]}, {"Number": "CS1641668", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 25-Apr-2014  3:40PM PST\n---------------------------------------------\nHi Sebi,\n\nI looked at the OIF-CEI-03.1 standard. 10Gbps section has 3 sections SR (short-reach), MR/LR (moderate and long-reach).\n\nENZO (84795) system-side supports XFI/CAUI-like interfaces. It has only CTLE, it does not have DFE capability. It is better than XFI/CAUI (up to 20-25dB insertion loss).\nBut for LR/MR specifications, the links are long-range (1 meter PCB trace + 2 connectors) which represents large insertion loss (>30-35dB).\n\nSo the answer is: For short-reach (SR), we should be ok. But for MR/LR, it is not reasonable to expect ENZO system-side will be compliant.\n\nPlease be aware that our 28nm gearbox (Sesto) will be able to support LR/MR applications since it has both CTLE and DFE on the system side.\n\nThanks,\nYunong", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 02-May-2014 11:14AM PST\n---------------------------------------------\nresolved.", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 22-Apr-2014 11:51AM PST\n---------------------------------------------\nHi Yunong,\n\nplease help on this case.\n\nthx!\nDave", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Sebastien P-Auguste[Avnet Inc]\nUpdate date: 24-Apr-2014  1:38PM PST\n---------------------------------------------\nHello Yunong,\n\nThe customer told me that they cannot use 32-bit windows version of the simulation, they can only use the 64-bit version. So they have to wait till it is ready from Broadcom. Do you have a target date for completion?\n\nThanks\nSebastien", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 23-Apr-2014  4:13PM PST\n---------------------------------------------\nHi Sebastien,\n\nThis version of Enzo AMI model only support 32bit windows. We are working on the 64bit version. I will update the case once we have the new version released to docSAFE.\n\nthanks,\nYunong", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 24-Apr-2014  4:27PM PST\n---------------------------------------------\nHi Sebi,\n\nWe will try to release it tomorrow or next Monday.\n\nThanks,\nYunong", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Brian Stroud[Avnet Inc]\nUpdate date: 28-Apr-2014  2:12PM PST\n---------------------------------------------\nYunong,\nI am assuming the file for the BCM84790/93 (BRCM_AMI_ENZO_VSR28_v4.zip) is the correct file. Please let me know if not. Thanks...", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 28-Apr-2014  5:31PM PST\n---------------------------------------------\nYes, that's correct.", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Sebastien P-Auguste[Avnet Inc]\nUpdate date: 24-Apr-2014  5:51AM PST\n---------------------------------------------\nHi Yunong and Dave,\n\nThanks for the clarification!\n\nAny feedback on the second question? The customer is designing an ASIC that will interface with the 84795 and they need to know if the VSR28 to 10x10/11G CAUI gearboxes from Broadcom are compliant to the latest Implementation Agreement OIF-CEI-03.1?\n\nThanks\nSeb", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 24-Apr-2014  5:08PM PST\n---------------------------------------------\nHi Sebi,\n\nThe new model is ready. We've sent request to release it to docSAFE. It should be available on docSAFE tomorrow.\n\nThanks,\nYunong", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 24-Apr-2014  9:35AM PST\n---------------------------------------------\nHi Sebi,\n\nI will check and get back to you soon.\n\nYunong", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Sebastien P-Auguste[Avnet Inc]\nUpdate date: 25-Apr-2014  1:03PM PST\n---------------------------------------------\nHello Yunong,\n\nThanks very much for your help! Much appreciated.\n\nSeb", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Sebastien P-Auguste[Avnet Inc]\nUpdate date: 29-Apr-2014  9:55AM PST\n---------------------------------------------\nHi Yunong,\n\nThanks for all the answers and the excellent service.\n\nSeb", "CreatedOn": "2017-04-06 03:40:28", "CreatedBy": "admin"}]}, {"Number": "CS1745612", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 13-Aug-2014  3:04PM PST\n---------------------------------------------\nHave added schematics and power domain block diagram.  Will request backup from switch team on Ranger Plus portion of design.", "CreatedOn": "2017-04-06 04:40:21", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Sep-2014  6:20PM PST\n---------------------------------------------\nHi Jamie,\n\ndo you still need support on this?\nif yes, please re-open and assign it to Kai.\n\nregards,\nDave", "CreatedOn": "2017-04-06 04:40:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 15-Sep-2014  6:34PM PST\n---------------------------------------------\nI believe they went ahead and fabbed out.  This board should be back soon.  We'll see how it goes.  I did manage to get the Ranger portion of the design reviewed.  Hopefully there werent too many errors on the HSIP portion.", "CreatedOn": "2017-04-06 04:40:21", "CreatedBy": "admin"}]}, {"Number": "CS1956678", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 27-Mar-2015 10:31AM PST\n---------------------------------------------\nHi Vivek,\n\n\nAll of the above modes seems to be using same divide ratio of MODE4 which is 64.\nI believe we support all of the above.\n\nlooking through DVT results and I will update the case with definite answer soon.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 07:01:45", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 09-Apr-2015 11:37AM PST\n---------------------------------------------\nHi Aneesh,\n\nOTU3e1        174.10531250        11,142.7400M x 10\nOTU3e2        174.15375000        11,145.8400M x 10\nOC192                155.52000000        9,953.2800M  x 10      \n\nare guaranteed to work in BCM84794.\n\nHowever, based on our timing closures, simulations and DVT testing, we cannot guarantee\n                      GB2 Clock             traffic rate\nOTU1f           176.09515625        11,270.0900M x 10\nOTU2f           176.83812500        11,317.6400M x 10\n\n\nIf these modes are must for cisco, then we might have to check with marketing and come up with a plan. But as of now it seems unlikely we can support OTU1F and OTU2F.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 07:01:45", "CreatedBy": "admin"}, {"Notes": "Updated by: Vivek Prabhu[Broadcom Corporation]\nUpdate date: 29-Mar-2015 10:46PM PST\n---------------------------------------------\nHi Nishant,\n\nThank you for the update.\nPlease let us know if there is an appnote or an update datasheet which covers the use of these rates that can be shared with Cisco.\n\nThanks,\nVivek", "CreatedOn": "2017-04-06 07:01:45", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 30-Mar-2015 11:15AM PST\n---------------------------------------------\nVivek,\nI could not find any DVT results.\nI would have to test this in the Lab and get back to you. I will be providing you results by Thursday APril-02.\n\n\nI will provide with an XL sheet on your modes of operation with correct mode settings. There is no updated Datasheet  or Appnote for the same.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 07:01:45", "CreatedBy": "admin"}, {"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 09-Apr-2015  6:35AM PST\n---------------------------------------------\nHi Nishant,\nCould you please update on this issue.\nThanks\nAneesh", "CreatedOn": "2017-04-06 07:01:45", "CreatedBy": "admin"}]}, {"Number": "CS1704002", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 13-May-2014  1:49PM PST\n---------------------------------------------\nHi George,\nNo , i am not aware of such an error. BCM84794 is pure repeater chip , it does not have any PCS block or any capability to alter the data.\nI would imagine, this failure could even exist, if BCM84794 is not involved.\n\nPlease check with BCM56640 support on possible reasons for this failure to occur. They might also help you understand if any changes are needed on IXIA.\nYou should also share IXIA configuration Fortinet is using  with BCm56640 support.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: George Mobbs[Stratus Technical Sales LLC]\nUpdate date: 29-Apr-2014  3:00PM PST\n---------------------------------------------\nHi Nishant,  customer now has SR-10 working..I'm waiting for their feedback on what they did.  I do think we should get the latest microcode to them though.  I can't see that in docsafe..what do I request (or can you send it to me, to forward to them?).  \n\nNow they report that 40G SR4 works only on the first of two ports...I'm getting more detail.  Thx much for the help.\n\nGeorge Mobbs, P.E.\nStratus Technical Sales, LLC", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: George Mobbs[Stratus Technical Sales LLC]\nUpdate date: 29-Apr-2014 11:40AM PST\n---------------------------------------------\nHi Nishant,\n\nCustomer is using Version D009 (loaded by SDK).\n\nGeorge Mobbs, P.E.\nStratus Technical Sales, LLC", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-Apr-2014 10:06AM PST\n---------------------------------------------\nHi George,\nWhat version of Firmware are you  using ?\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: George Mobbs[Stratus Technical Sales LLC]\nUpdate date: 12-May-2014 10:15AM PST\n---------------------------------------------\nHi Nishant,..Fortinet reports SR10 works only if they first load their 10x10G config, and then load the SR10 config.   They want a single config for SR10 that does not require first loading 10x10G config.  Thx.\n\nGeorge Mobbs, P.E.\nStratus Technical Sales, LLC", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: George Mobbs[Stratus Technical Sales LLC]\nUpdate date: 29-Apr-2014 12:30PM PST\n---------------------------------------------\nHi Nishant,...I'm checking with Fortinet to determine which version of microcode was loaded into eeprom.  What is the latest version?  (I can't see this code in docsafe).  Thx.\n\nGeorge Mobbs, P.E.\nStratus Technical Sales, LLC", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 12-May-2014  2:51PM PST\n---------------------------------------------\nHi George,\nPlease ask Fortinet, what is the downside of using existing system or the benefit of clubbing two configurations.\nSwitch and PHY are two different entities and not necessarily work together in similar fashion for all our customers.\n\nFor more details, you should get in touch with appropriate SWITCH SDK support as they might be able to help you more.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-Apr-2014  1:48PM PST\n---------------------------------------------\nHello George,\nCouple of things you should confirm\n\n1. the firmware revision. 009 is an old firmware and I agree the sdk driver does not use the latest fw yet.\n2. Most important : what reference clock are they using for MODE3 configuration. If they intend to use 156.25 for mode3 then there are additional register writes which are needed.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}, {"Notes": "Updated by: George Mobbs[Stratus Technical Sales LLC]\nUpdate date: 13-May-2014  1:05PM PST\n---------------------------------------------\nHi Nishant,..more detail on this...Fortinet is having difficulty with compatibility testing of their 84794/56640 board with an IXIA tester.  I\u2019m sure we\u2019re compliant, but the error they get is \u2018PCS marker fail\u2019.  Have you seen this before?  Thx.\n\nGeorge Mobbs, P.E.\nStratus Technical Sales, LLC", "CreatedOn": "2017-04-06 03:41:41", "CreatedBy": "admin"}]}, {"Number": "CS2262299", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 05-May-2014  7:13AM PST\n---------------------------------------------\nI think I see where your questions are headed here.  The CML reference is for the differential data lines, and that is relative to 1.0v.  The reference clock input is also CML, so you would expect the statement to also apply for that differential output.  If you do the math using the SY58035U data sheet (attached), it implies the tolerable voltage levels are more in-line with 2.5v supply.  I will consult with factory for clarification.  Please attach schematics for reference.", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 12-May-2014 12:56PM PST\n---------------------------------------------\nThe AC coupling is done via discrete caps at the package level.  They are capable of handling DC values within the voltage supply ranges of the chip.", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}, {"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 05-May-2014 11:24AM PST\n---------------------------------------------\nActually, even if the LVPECL buffer was powered from 2.5V the Voh will be at least 2.5-1.145 = 1.355V which would violate the spec.", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}, {"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 21-May-2014  7:07AM PST\n---------------------------------------------\nOK.  Thanks.  You can close the case.", "CreatedOn": "2017-04-09 18:41:09", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 13-May-2014 11:36AM PST\n---------------------------------------------\nNote:  Data paths are ac-coupled externally, not on-chip.", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}, {"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 16-May-2014  2:02PM PST\n---------------------------------------------\nSo all of the HRX10G inputs and the reference clock input have AC caps in the package, not on the die.  Makes sense.\n\nIf that's the case, why does the datasheet require that the DC voltage on the HRX10G pins be less than 1.1V?  I would have thought that this would only be limited by the voltage rating of the caps.  Or is it an issue of transients during powerup, as the signals rise up to their DC level?\n\nIf REFCLK and HRX10G have the same cap arrangement, why do the HRX10G pins have the 1.1V max spec but REFCLK can tolerate PECL levels?", "CreatedOn": "2017-04-09 18:41:09", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 09-May-2014  7:52AM PST\n---------------------------------------------\nJason, after a couple cups of coffee I realized that the max rating in Table 324 applies to the voltage supplies associated with the I/O's, not the actual I/O signals themselves.  For the reference clock specs use the AC characteristics in Table 325.", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 19-May-2014 12:46PM PST\n---------------------------------------------\nUse of discrete caps for ac-coupling was only discussed for the clock inputs.  Sorry if that was unclear.  The input structure for the cell used on HRX inputs in shown in 84794-DS02 Figure 9.", "CreatedOn": "2017-04-09 18:41:09", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 22-May-2014  5:19AM PST\n---------------------------------------------\nResolved per customer's feedback.", "CreatedOn": "2017-04-09 18:41:09", "CreatedBy": "admin"}, {"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 09-May-2014  8:28AM PST\n---------------------------------------------\nSo \"supply voltage on any CML input or output pin, or LVPECL input pin\" really means \"supply voltage\"?  Seems like a more elaborate typo than usual.\n\nThe two previous lines in Table 324 already specify the absolute max for all of the supplies.\n\nThe line in question gives a different spec than the previous lines.\n\nThis seems odd.  I'm afraid I don't buy it.\n\nTable 325 doesn't specify a max DC offset for the clock.  There must be a limit.  Typically the max/min voltage specs for I/O are determined by the ESD diodes that clamp to the rails.  How does this work when there are input capacitors like this?  Is the ESD protection on the outside of the caps or the inside?", "CreatedOn": "2017-04-09 18:41:08", "CreatedBy": "admin"}]}, {"Number": "CS1642101", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 12-Aug-2015  2:11PM PST\n---------------------------------------------\nHi Nishant,\n\nThanks for your feedback.  On the 2nd question \"The datasheet states that the signals being driven from the BCM87494 on the system side need to be AC coupled using a 0.1uF capacitor. Based the on the capacitance value, I am assuming that this is to remove the common mode voltage. If the common mode voltage of the BCM87494 lines up with the CM voltage of the receiver are the capacitors still needed?\", they are talking about the system side 84794 TX.  Would it be OK to NOT include the external AC coupling in this case?\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:21:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 12-Aug-2015  2:20PM PST\n---------------------------------------------\nHi Erik,\nit would be OK, if the receiver of the link partner connected to system side transmit is OK and is AC coupled or CM voltages are matched.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:21:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 13-Aug-2015  6:43AM PST\n---------------------------------------------\nThank you Nishant.  Closing case.\n\nHi Brian,\n\nBased on Nishant's feedback, the answer are,\n\nQuestion #1 (max DC voltage) --> Like mentioned in the datasheet \u201cDC voltage (Vcm +1/4 differential swing) should be no greater than 1.1V\u201d , this is a hard requirement and you would have to guide customers with this constraint. No other recommendation from Broadcom.\n\nQuestion #2 (are external AC caps required on system side TX given CM voltage aligns with RX'r?) --> it would be OK, if the receiver of the link partner connected to system side transmit is OK and is AC coupled or CM voltages are matched.\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:21:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 12-Aug-2015 12:09PM PST\n---------------------------------------------\nHi Nishant,\n\nCan you help to provide guidance on these two questions?\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:21:21", "CreatedBy": "admin"}]}, {"Number": "CS1747561", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 01-Sep-2015 10:54AM PST\n---------------------------------------------\nHi Chris,\n\nI would appreciate if you can send a diagram explaining your application \nAlso clarify , if you intend to use 1 100G port on BCM56860  or do you intend to use 10 different 10G lanes on BCM56860?\n\n\n\nBCM84794 does not support any internal Lane swapping. \n\nHence it is required for 100G ( 25x4 on line side) application that Lane0,1,2 and 3 of BCM84794 should get 25G data. This is exactly what you have.\n\nWhen in 10x10 , you can send 10G traffic on any line side 10 lanes of BCM84793. \n\n\nIf  BCM56860 is used as single 100G port, CE0 for example , \nthen BCM56860 MAC \"sees\" one aggregated 100G port , rather than 10 ports .\nStandard 100G MAC that complies to IEEE802.3ba should support reordering. No matter how you connect Non-25G line side gearbox , you will get 10 lanes out of system side which are aggregated to 1 100G port. Again 25G lanes on the Line side should only be connected  to lane 0,1,2 and 3 of BCM84794.\n\n\nAs far as PHY configuration is concerned , you only need to program the chip in MODE1 100G gearbox mode or Mode3 10x10 mode.\n\n\n\nIf you intend to use 10 warpcore lanes, then MLD re-ordering might not be supported and you would have to check with Switch AE.\n\nBut this should not stop you from carrying on with your design. \n\nBCM84794 will send out 10x10G lanes to switch , now it is the switch to decide which 10 lanes to look for, simple solution could be to just  work on upper layer software and reassign logical port number as per your liking.\n\nAgain as far as PHy is concerned , you only need to program the chip in MODE1 100G gearbox or Mode3 10x10 mode.\n\n\n\n\nThanks\nNishant", "CreatedOn": "2017-04-07 13:14:04", "CreatedBy": "admin"}, {"Notes": "Updated by: Chris Zhu[Comtech Broadband Corporation Limited]\nUpdate date: 01-Sep-2015 11:46PM PST\n---------------------------------------------\nHi Nishant,\n    About a diagram  for customer applications, pls refer to \"Simple logic connection diagram for  10*10G  retimer mode as follow,\" and \"Simple logic connection diagram for  4*25G  gearbox  mode as follow,\" in attachment. The  key questions is whether customer two applications' modes (  10*10G  retimer mode  and  4*25G  gearbox  mode)  lane swap is supported.  \n   There is  hardware design detail info. Customer aslo list his understanding and his questions.Also need your help to answer them,in hardware.\n   I'll confirm these applications with software.\n\nThanks,\nChris", "CreatedOn": "2017-04-07 13:14:04", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Nov-2015  4:30PM PST\n---------------------------------------------\nanswered query", "CreatedOn": "2017-04-07 13:14:05", "CreatedBy": "admin"}, {"Notes": "Updated by: Chris Zhu[Comtech Broadband Corporation Limited]\nUpdate date: 31-Aug-2015  6:17PM PST\n---------------------------------------------\nHi Nishant,\n      What's the progress of this case?\n     As it lasts for a long time, customer is waiting for your team answers, and push us urgently.\n     Pls help on it ASAP.\n    \nThanks,\nChris", "CreatedOn": "2017-04-07 13:14:04", "CreatedBy": "admin"}]}, {"Number": "CS1695567", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 16-Mar-2015 10:58AM PST\n---------------------------------------------\nHi Vivek,\nthis is very clearly mapped out on the DS. IE, register 9944 shows Main/Post and Pre Tap as does register 8067 for the CAUI and Hexacore.\nThanks,\nKK", "CreatedOn": "2017-04-06 06:53:17", "CreatedBy": "admin"}]}, {"Number": "CS1906443", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 16-Sep-2015  8:20AM PST\n---------------------------------------------\nNishant,\n\nThis is what I have responded to Sandvine at this point.  If I have addressed things correctly then we are good.  If not let me know how I need to tweak it.\n\nThanks\n\nDavid\n\n----------------------------------------------------------------------------------\n\nAlexey,\n\nThere are no known errata on manually setting the system side equalization or they would be listed in the errata for the part.\n\nIf the reset values of the PLL control are not what you need for proper operation then the proper code sequence would be to set those values up in the PLL control registers and then give it a PLL reset because you don't know if it is completely out of whack due to setting the control registers.\n\nAfter the PLL is stabilized then you could set the values of the equalization and then enable the channel.\n\nWhy doing things out of that order don't work is probably due to the requirements in the hardware design of the output buffer and the control registers you are accessing actually have some shadow register or preset a shift register and doing the PLL reset eliminates those values.\n\nI have pointed out to the factory you need to set this 1.8250.6 bit to make things work.  But is that when you do things in the order that I outlined or in your other order?  When I hear back I will update this ticket.\n\nDavid", "CreatedOn": "2017-04-06 08:39:39", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Nov-2015  4:19PM PST\n---------------------------------------------\nno further questions", "CreatedOn": "2017-04-06 08:39:39", "CreatedBy": "admin"}]}, {"Number": "CS1904397", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 22-Dec-2014  4:20PM PST\n---------------------------------------------\nHere is the response I posted to the customer based on Nishant's suggestion:\n\n==================================================\nFirst we should make sure that the microcode is installed properly.\nPlease check FW revid 0xf417 and checksum 0xF41B. Expect checksum to be 0x600D. \nIf it is incorrect, please check the following two pins on your board: TRSTB should be pulled low and Serboot pin should be low if you are using MDIO to download microcode.\n\nIf checksum and revid are correct, then you can check the following statuses:\n \nFor a common register check for any lane (won\u2019t indicate which exact lane is faulty):\nRead 0Xf483 for line side\nRead 0xF480 for system side \n \nFor individual lanes check:\n1. Line side receive CDR lock:\n- For lanes 0-3, Read 0x9800\n- For lanes 4-9 (Line side indirect register access), Indirect Write 0x80b1.2:0 0x0, Indirect Read 0x80b0.12  (one means locked)\n \n2. Line side Los status:\n- For lanes 0-3, Read 0x980A\n- For lane 4-9, Indirect Write 0x80b1.2:0 0x1, Indirect Read 0x80b0.5 (one means signal present)\n \n3. System side CDR lock status (system side indirect register access):\n- For each lane, Indirect Write 0x80b1.2:0 0x0, Indirect Read 0x80b0.12 (one means locked)\n \n4. System side LOS status (system side indirect register access)\n- For each lane, Indirect Write 0x80b1.2:0 0x1, Indirect Read 0x80b0.5 (one means signal present)\n \n5. To check system side PLL lock:\n- For each lane, Indirect Read 0x8050.15 (one means locked)\n \nAll of the above register details are available in the Datasheet along with procedure to perform indirect register access.\n\nCould you please tell how are you calling Mode4, and what registers are written for 40G mode.\n==================================================", "CreatedOn": "2017-04-06 05:51:58", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Feb-2015  4:57PM PST\n---------------------------------------------\nHi ronen,\n\ni dont see any question for me, let me know if this is still unresolved.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:51:58", "CreatedBy": "admin"}]}, {"Number": "CS2237346", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Mar-2014 10:09AM PST\n---------------------------------------------\nThank you for the detailed feedback.  I will review these with our factory expert.  In order to see if we can better pinpoint any problems associated with microcode changes, can you run the same tests with the 000C microcde?  It is a step back, but may help to isolate any inadvertent bugs introduced with the latest change.", "CreatedOn": "2017-04-09 18:07:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 01-Apr-2014  6:27AM PST\n---------------------------------------------\nPlease update status with results from testing with 00B microcode.  I believe there were also driver changes which you incorporated.", "CreatedOn": "2017-04-09 18:07:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 20-Mar-2014 12:55PM PST\n---------------------------------------------\nThe link issue with 4x25 CFP2s is reproducible with 000C, but disappears with 000B.", "CreatedOn": "2017-04-09 18:07:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 24-Mar-2014  8:53AM PST\n---------------------------------------------\nFactory has advised reverting to 000B at this time.  Some possibly related problems have been discovered with 000C/000D, and these are already under investigation internally.", "CreatedOn": "2017-04-09 18:07:41", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 01-Apr-2014 10:27AM PST\n---------------------------------------------\nWe tried microcode version 000B and were able to move past the link problems related to FIFO collision.", "CreatedOn": "2017-04-09 18:07:41", "CreatedBy": "admin"}]}, {"Number": "CS2010468", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Sebastien P-Auguste[Avnet Inc]\nUpdate date: 08-May-2014  7:21AM PST\n---------------------------------------------\nHello Yunong,\n\nAs usual, thank you very much for your excellent answer, much appreciated.\n\nSeb", "CreatedOn": "2017-04-06 03:46:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 12-May-2014  8:54AM PST\n---------------------------------------------\nResolved.", "CreatedOn": "2017-04-06 03:46:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 06-May-2014 10:40AM PST\n---------------------------------------------\nHi Sebastien,\n\nWe don't have a eye mask for Enzo. The customer should use ADS or QCD to plot the BER contour (1e-12, 1e-15, 1e-18, etc...) and calculate the margin accordingly. Horizontal and vertical eye openings are always measured at given BER (1e-9, 1e-12, 1e-15, etc). Typically we require (for 10G and 25G Serdes) a minimum BER of 1e-15. In terms of SNR, this translates to 18dB. Since a BER of 1e-12 translates to 17dB, we can say that the 1e-15 requirement imposes a 1dB SNR margin requirement on the performance. From either the waterfall curves or the 2-dimensional eye opening contour curve, you may compute the vertical and horizontal openings that correspond to a BER of 1e-15. You can then make this the requirement for the eye opening. Please note mapping between the horizontal/vertical eye openings and the BER may vary from channel to channel. Thus the requirements may slightly vary from channel to channel. So we may need to do this over a few different channels before we come up with a number we are comfortable with. With the same method, you can calculate the opening requirement for higher margin (i.e. BER 1e-16, 1e-18, etc.). \n\nFor example: :\n1)\tTake a typical channel of your application and run the simulation\n2)\tGet eye opening @ BER = 1e-12 (dv1 and dt1) and  @ BER = 1e-15 (dv2 and dt2)\n3)\tCalculate 1dB margin: 1dB_Margin_vertical = dv1-dv2; 1dB_Margin_horizontal = dt1-dt2\n4)\tOur spec for vertical and horizontal eye opening for Falcon: 20mv and 2ps.\n5)\tCompare 3) and 4) you will see how much margin in dB you have vertical and horizontally.\n\nThanks,\nYunong", "CreatedOn": "2017-04-06 03:46:54", "CreatedBy": "admin"}]}, {"Number": "CS1957163", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 23-Mar-2015 12:47PM PST\n---------------------------------------------\nHi KaiMing,\ncan you tell me what the value is using MDIO reads?\nThanks,\nKK", "CreatedOn": "2017-04-06 06:57:33", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 23-Mar-2015 12:47PM PST\n---------------------------------------------\nAlso, is this pre or post uCode download?\nThanks,\nKK", "CreatedOn": "2017-04-06 06:57:33", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 14-Aug-2015 10:21AM PST\n---------------------------------------------\nResolving due to non-activity for some time. Please re-open is new issues occur.", "CreatedOn": "2017-04-06 06:57:33", "CreatedBy": "admin"}]}, {"Number": "CS1642121", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 17-Sep-2015  1:21PM PST\n---------------------------------------------\nHi Nishant,\n\nThank you very much - I really appreciate it!\n\nClosing the case.\n\nErik", "CreatedOn": "2017-04-06 08:38:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Sep-2015 12:37PM PST\n---------------------------------------------\ncan you review CSP 959101", "CreatedOn": "2017-04-06 08:38:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 17-Sep-2015  1:03PM PST\n---------------------------------------------\nHi Nishant,\n\nI took a look at CSP 959101 - it  reinforces what I understood.\n\n - 4x25G (mode 1) - The customer uses 84794 lanes 0-3 for the 4x25G and has lanes routed in reverse order between CFP2 and 84794 line side (same HWUM table 2).  So, they do a \"straight reverse\" config in MAC SW for the 10 lanes on system side.  Looks correct.\n\n  - 10x10G (mode 3) - The customer routes 84794 line - CFP2 connector the same as HWUM table 2.  They use MAC SW to reorder the 10 lanes on system side.\n\nTo me it looks exactly correct.\n\nI was just looking for a sanity check to make sure I wasn't missing something.  I think the spreadsheet they provided is a very simple method to show what they're trying to do, and it would be quick for you to give the thumbs up.\n\nIf you disagree, and cannot take a look, then feel free to resolve the case and we'll just tell them it looks good.\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:38:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 17-Sep-2015 11:17AM PST\n---------------------------------------------\nHi Nishant,\n\nThe customer is pinging us.  Will you be able to take a look at this and give us your guidance?\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:38:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Sep-2015  1:16PM PST\n---------------------------------------------\nHi Erik,\nI looked at xl sheet, it looks good.\n\nOnly one point I want to confirm with you is. Since there is no internal lane mapping or re-namming allowed in BCM84794.\n\nThe user needs to know which lane software needs to monitor for maintenance. \n\nFor example in case of 25Gx4  mode with CFP2, even though lane 0 is coming out from CFp2, the user would have to check Lane 3 on PHY for status checks and tunning.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:38:38", "CreatedBy": "admin"}]}, {"Number": "CS1956703", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Nov-2015 10:39AM PST\n---------------------------------------------\nHi Steve,\nOverall schematic looks good and your comments are correct.\nThanks for detailed review, i have few comments in the attached file, nothing major.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 09:10:27", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Nov-2015 10:39AM PST\n---------------------------------------------\nreview done!!", "CreatedOn": "2017-04-06 09:10:27", "CreatedBy": "admin"}]}, {"Number": "CS2008860", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Jul-2014  4:50PM PST\n---------------------------------------------\nHello Mizo - san,\nTotal time of eye scan functionality basically depends upon user configurations and how much resolution they want out of eye scan.\n\nuser has got capability to change following parameters\n1. Horrizontal range   // set on front panel of GUI, default values set at -30 to 30\n2. vertical range      // set on front panel of GUI, default values set at -30 to 30\n3. step size             // set on front panel of GUI, default values set at 3 for both horrizontal and vertical sweep\n4. measure time   // this is not set in the GUi front panel but can be tweaked inside the eye_scan.vbs script which basically GUI calls when you hot eye scan button. The measure time at each step is set .5sec and is recommended setting. If you wish to play around with this setting then perform the following:\n4.a  Downloading gui on your windows machine, \n4.b  go to c:\\program files\\BROADCOM\\Monitor\\Monitor_84793_cust\\scripts\\enzo_codes\\eye_scan_all.vbs\n4.c  In the VBS script, search for MeasureTime and change the value to a lower no. and rerun eye scan from frontpanel.\n\nIn genereal, since this is for test purposes, and you want quick diagnosis, you should try shrinking your horrizontal and vertical range, increasing step size would also cut down time.\n\nHope this clarifies your query.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:18:35", "CreatedBy": "admin"}]}, {"Number": "CS2289353", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 4/2/2014 9:36:00 AM PST\n---------------------------------------------\nHi Goutham,\nAs we have completed the SI Simulation for the XFI and CAUI links in CSPs #757700 and 757884, could you please confirm if we can resolve this case.\nThanks\nAneesh", "CreatedOn": "2017-04-10 03:29:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Sanjay Jain[Broadcom Corporation]\nUpdate date: 4/7/2014 3:27:00 AM PST\n---------------------------------------------\nHi Goutham ,\n  Can we resolve the case?\n\n-Regards\n-Sanjay", "CreatedOn": "2017-04-10 03:29:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 4/9/2014 12:59:00 AM PST\n---------------------------------------------\nResolving as discussed. Simulation results are shared in other CSP based on the latest board parameters.\nThanks\nAneesh", "CreatedOn": "2017-04-10 03:29:28", "CreatedBy": "admin"}]}, {"Number": "CS1852206", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 16-Mar-2014  9:20PM PST\n---------------------------------------------\nHi Nishant,\nPlease let me know if it is the correct to conclude on this and close this case.\n=======================================\n84794 is pure repeater chip and it is not designed for syncE applications. But syncE operation can be achieved in the following way.\nIn Ingress path:\n1.\tAt Ingress path, GB have clock pass-through mode. So, CAUI output is locked to Line Input. Clock recovery is possible at TD2.\n2.\tIf there is NO data coming from the incoming line side, there is NO data exiting on the CAUI.\nIn Egress Path:\n1.\tLine output is NOT locked to CAUI input . All data is timed off the Reference clock. \n2.\tReference clock should be always present for the Gearbox to work properly.\n3.\tsyncE operation can be achieved by providing syncE clock to REFCLK externally, Provided the reference clock requirements given in \u201cTable 324: Recommended Operating Conditions (Cont.)\u201d is met.\n=======================================\n\nThanks\nAneesh", "CreatedOn": "2017-04-06 03:16:06", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 21-Mar-2014  2:18PM PST\n---------------------------------------------\nAs per our email discussion: Your understanding is correct", "CreatedOn": "2017-04-06 03:16:06", "CreatedBy": "admin"}]}, {"Number": "CS2008700", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-Jun-2015 11:34AM PST\n---------------------------------------------\nHi Dolly,\nthat is the only difference. ODB feature is not supported in 84794.\n\nthanks\nNishant", "CreatedOn": "2017-04-07 13:00:34", "CreatedBy": "admin"}]}, {"Number": "CS1704792", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 14-Oct-2015 11:14AM PST\n---------------------------------------------\nHi Dolly,\nthere could be multiple reasons for registers to read back 0xffff\n1. You are hitting the wrong PHY address\n2. You have serboot pin set to 1\n3. You probably need to look into your MDIO pull up resistor value \n4. You probably want to change your MDC speed\n5. You probably needs to check at what time ref clock is enabled after power supplies are stable and chip is not in reset. Your power on sequence does not have any indication of when the ref clock is enabled.\n\nthese are few debug tips, there is nothing wrong with the PHY which would reflect this issue, you would have to debug this at your end \n\nThanks\nNishant", "CreatedOn": "2017-04-07 13:19:17", "CreatedBy": "admin"}]}, {"Number": "CS1908157", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Vincent Yang[Broadcom Corporation]\nUpdate date: 18-Nov-2013 11:36AM PST\n---------------------------------------------\nHi Kaiming,\n\nCustomer can use the 84793 BSDL file on 84794 for test. \n\nThanks,\n\nVincent", "CreatedOn": "2017-04-06 01:07:03", "CreatedBy": "admin"}]}, {"Number": "CS1956560", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 15-Oct-2013  3:43PM PST\n---------------------------------------------\nAttached power numbers and changing status to resolved", "CreatedOn": "2017-04-06 00:35:56", "CreatedBy": "admin"}]}, {"Number": "CS1902494", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 21-Oct-2014  3:33PM PST\n---------------------------------------------\nSorry Ronen, there is a queue for schematic reviews as they take up a chunk of time. Wasn't able to get to it earlier this week as I was out Monday. I didn't check over the ball out as I paid most of my attention towards the connection.\n\nHere are my comments:\n1. REFCLK P/N are these compliant w/ the jitter specs on the input? The clock input must be compliant to 1ps jitter RMS from 8MHz to 80MHz and 0.25ps RMS from 50KHz to 8MHz. Both the oscillator AND the associated buffers must adhere to this.\n2. R2959 - is this resistor +/- 1%? RCAL is very sensitive.\n3. Seems like lanes 4-7 are used for a second 40G port. This is fine, but keep in mind you should use 10x10 mode if this is the case. Use Mode 3/4 in this case. Actual 40G mode uses lanes 5-8.\n4. Power Supply looks good as they are using Inductors rather than Ferrites. This being the case, the large cap at the front end isn't quite as critical.\n\nHope this helps,\nKK", "CreatedOn": "2017-04-06 05:13:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 21-Oct-2014  5:21PM PST\n---------------------------------------------\nThanks Kai!\n\nResolving. \nWill reopen if necessary.\n\nBest,\nRonen", "CreatedOn": "2017-04-06 05:13:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 20-Oct-2014  1:28PM PST\n---------------------------------------------\nHi Kay,\n\nCustomer is asking for factory review ETA.\nPlease advise?\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 05:13:19", "CreatedBy": "admin"}]}, {"Number": "CS1791061", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 06-Oct-2015 10:31AM PST\n---------------------------------------------\nIt's 0xB. 100GE and OTL4.10 technically use the same setting. Only difference is the input clock frequency.\nSee attached.\nThanks,\nKK", "CreatedOn": "2017-04-06 08:50:17", "CreatedBy": "admin"}]}, {"Number": "CS2442982", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Case automatically closed priority 3 cases after 1 Month in the Resolved state.", "CreatedOn": "2017-05-20 14:47:03", "CreatedBy": "system"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/8/2015 11:05:00 AM PST\n---------------------------------------------\nHI Kyle,\n\nHere are answers to your questions:\n\n1. About BCM82793 total power consumption, old BCM84794 typ value is 3W, but BCM82793 is TBD.\n\n[STEVE]  The worst case max power number for customers to account for their board designs would be 30% more than what is specified in the spreadsheet I have attached.\n\n  2. Any diffrent from power up sequence and reset timings?\n\n[STEVE]  No.\n\n  3. R10 pin for BCM84794 is VSS, but BCM84793 is GPIO_3, for NPX design, we connected this Pin to GND   directly, any impact? GPIO_3 defalut setting is INPUT or OUTPUT?\n\n[STEVE]  Having this pin connected to GND shouldn't be an issue.\n\n  4. T10,R9,P8 pins for BCM84794 are VSS, for BCM82793 are ADR[2:0] pins, for NPX design, we connected these pins to GND directly.\n\n[STEVE]  That should be fine.\n\n  5. Can we only change BCM84794 to BCM82793 gearbox to respin our NPX board?\u00a0\u00a0\u00a0\u00a0\u00a0     \n\n[STEVE]  Based on above it looks like you should be able to do this wihout respinning your board.\n\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:44", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/8/2015 7:34:00 PM PST\n---------------------------------------------\nHi Steve,\n      Thanks for quick response, one more question need double confirm.\n      About power estimate, it shows BCM82792 dual core device for spreadsheet, now we use BCM82793, for 1V power, TX/RX analog , PLL power, core power, totally 922mW + 2260mW + 1920mW = 5102mW, it means 5A current,  for BCM82793 device, if need  5102mW/2 = 2501mW, 2.5A/1V for each bcm82793 device?\n\nThanks \nKyle", "CreatedOn": "2017-03-31 01:42:44", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/9/2015 9:20:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nLet me check how to adjust the power numbers for the 82793.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:44", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 1/5/2016 3:56:00 PM PST\n---------------------------------------------\nHi Kyle,\n\nHere are the typical and max power numbers for 82793:\n\n12x10G/3x40G mode:\n\t       typical\tWC (x1.3)\n\t         mW\t     mW\nPVDD\t  1120\t  1450\nPVDDPLL  190         250\nXVDD\t     500\t     650\nXVDDPLL  130\t     170\nDVDD\t     700\t     910\nDVDD33       50\t       65\n------------------------------------\nTOTAL       2690\t   3495\n\n\n\nGearbox Mode:\n\ttypical\tWC (x1.3)\n\t                 mW\tmW\nPVDD\t      1120\t      1450\nPVDDPLL      190\t        250\nXVDD\t         500\t650\nXVDDPLL      130\t        170\nDVDD\t         900     1170\nDVDD33\t   50\t         65\n------------------------------------\nTOTAL         2890\t     3755\n\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:44", "CreatedBy": "admin"}]}, {"Number": "CS1790629", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 12-Jan-2015 11:22AM PST\n---------------------------------------------\n84793 has NO 3.3V supply.\nIt's 2.5V.\nThanks,\nKK", "CreatedOn": "2017-04-06 05:59:16", "CreatedBy": "admin"}]}, {"Number": "CS2258931", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 26-Sep-2014  9:33AM PST\n---------------------------------------------\nIn addition to the number of parts involved, how many boards are involved?  Are the parts on multiple boards, etc. ?  How large is the overall sample size of parts and boards?  That is, what percentage of parts/boars are exhibiting problems?  Trying to get a sense for whether there might be a board-level problem underlying here.", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 29-Sep-2014  3:08PM PST\n---------------------------------------------\nWhat's the behavior of the reference clock into the phy relative to power-up and temperature?  Can you verify that the clock is clean, particularly at the low-temp power-up condition which you've shown to be the most consistent environment for failure?", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 03-Oct-2014  6:14AM PST\n---------------------------------------------\nMaking it so the case doesn't auto close per customer's request\n\nDavid", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 26-Sep-2014 10:03AM PST\n---------------------------------------------\nFrom out-of-band emails, we understand that 4 parts on one board and 2 parts on a second board have shown the problem.  One board was in a chamber and one was at room temperature.  Please confirm.\n\nAre you able to see a continuout problem, or is it sporadic?  For a system/chip that is returning the wrong value, can you read the register directly and observe the problem?  Can you probe the actual MDIO output for that bus cycle and capture the incorrect data being returned?  Do any other chip registers exhibit problems?\n\nIdeally we want to create an environment where the problem can be observed without running the full software, even if only after some full software initialization.", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Sep-2014  4:47AM PST\n---------------------------------------------\nAlexey,\n\nI am sorry to add yet more question but I need to get this straight.  So you have 1 system that at room temp is fine but when you take it to 0C and reset the system, it reads the wrong ID.  Then at 0C if you power cycle the system it reads the correct ID?\n\nFor another system the PHYS read the wrong ID and if you lower the temp to 0C and only reset the system, you still get the wrong ID but if you power cycle the system then the right ID comes out.\n\nWhat I am infering that in all cases it requires a power cycle, not a reset to produce the right or wrong transistion.  Is that correct?\n\nDavid", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 26-Sep-2014 10:15AM PST\n---------------------------------------------\nOne item to check very carefully is the signal quality of MDC, particularly if it bussed to multiple parts.  It is critical that MDC be clean and free from reflections which could be seen as false clock edges by a chip input.", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 30-Sep-2014  7:46AM PST\n---------------------------------------------\nAlexey,\n\nthanks for the screen shots you provided.  Could you possibly get a screen shot on the bad system where we had both the 2.5 and 1.0 volt ramps on one time scale with enough time resolution so we can clearly see the timing relationship.  Also can you do the same thing for a good system that we might see if there is a difference.  I doublt it but we can leave no rock unturned.\n\nThanks\n\nDavid", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 26-Sep-2014  7:16AM PST\n---------------------------------------------\nHow many parts have exhibited these problems?\nWhat are the details of the init sequence?  Power-up, hardware reset pin, code, etc. ?\nHow is this sequence applied in the chamber tests?  Are there power-cycles, resets, etc. ?", "CreatedOn": "2017-04-09 19:51:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 29-Sep-2014  3:00PM PST\n---------------------------------------------\nHow many parts have exhibited these problems?\n-\tWe have seen this happen on 6 parts so far across 2 systems. We have 4 of these parts per system. I have run some tests characterizing the issue on one of the boxes where all 4 gearboxes exhibit reporting a chip ID of 0x84793 when booting up at cold temperatures. \n-\tI haven\u2019t done the same characterization on the 2nd system yet. I did try numerous resets to the gearboxes on the 2nd system and applying cold spray to the gearboxes but the chip ID was consistently reading 0x84794. I couldn\u2019t force a failure. However I didn\u2019t try with a power cycle (relevant later on).\n-\tWe have tested over 15 systems so far and have only seen this issue on 2 systems. Most of the testing was done at room temperature for these systems. We have tested at least 3 other systems in the chamber that did not display this issue. So we don\u2019t see this on all of our boxes.  \n\nWhat are the details of the init sequence? Power-up, hardware reset pin, code, etc. ?\n-\tI\u2019ve attached some plots showing the reset pin state and voltages on power up. There are 2 plots that show the timing of +2V5 and +1V0 rails in relation to +5V on our system. The hard reset pin is held low while power is applied. \n\nHow is the sequence applied in the chamber tests? Are there power-cycles, resets, etc?\n-\tThis is how our SW initializes the system:\n1.\tHard reset through pin\n2.\tID check\n\u2022\tChecks ChipId and RevId 0xF400 & 0xF401\n3.\tHard reset from register\n4.\tReset micro-controller etc.\n5.\tDownload uCode\n\u2022\tChecksum and version are verified after download\n\n-\tThe same sequence is used in all cases including after a power cycle. This sequence runs every time we initialize the gearbox. After this sequence I did manual resets to the gearbox through the reset pin and the behavior did not change. Whatever value was being read for the chip ID, applying a reset through the reset pin did not change the value being read. Only a power cycle changed the behavior. On this box the behavior is very consistent from my experience. Powering up at ambient temperature of 25C, all 4 gearboxes always report a chip ID of 0x84794. Powering up at an ambient temperature of 0C, all 4 gearboxes always report a chip ID of 0x84793. \n\nIs the problem continuous or sporadic? Can you read the register directly and observe the problem? Can you probe the actual MDIO output for that bus cycle and capture the incorrect data being returned? Do any other chip registers exhibit problems? \n-\tThe problem is continuous after powering up. We can read the register directly and observe the problem. Other registers look to be reporting the correct values (at least they\u2019re consistent). We don\u2019t see problems with the uCode download/verification, so this doesn\u2019t look like an SI issue with the MDIO signals. Also the chip IDs are not off by 1 bit, 0x7493 vs. 0x7494 have 3 bits that are off and it\u2019s pretty peculiar that 0x7493 is actually a valid chip ID for the 84793. \n\nSome more details on the tests that I ran:\n\nFollows power up.\nIf we power up at 25C and then change the ambient to 0C we don\u2019t see this happen.\nIf we power up at 0C we see this issue happen. Changing the ambient to 25C during the same power cycle does not clear this issue.\nResetting the gearbox does not change the behavior. \n\nTesting was done in the chamber. \n-\tPower up at 25C, read some registers and this is what I see consistently (shown below). Reset the gearbox through the hardware reset pin does not change this behavior. Changed the temperature in the chamber to 0C didn\u2019t change anything either. Registers consistently give the same data. \nBCM.0> phy raw c45 0x0 0x1 0xf400; phy raw c45 0x20 0x1 0xf400; phy raw c45 0x40 0x1 0xf400; phy raw c45 0x60 0x1 0xf400; phy raw c45 0x0 0x1 0xf401; phy raw c45 0x20 0x1 0xf401; phy raw c45 0x40 0x1 0xf401; phy raw c45 0x60 0x1 0xf401; phy raw c45 0x0 0x1 0x0001; phy raw c45 0x20 0x1 0x0001; phy raw c45 0x40 0x1 0x0001; phy raw c45 0x60 0x1 0x0001; phy raw c45 0x0 0x1 0x0002; phy raw c45 0x20 0x1 0x0002; phy raw c45 0x40 0x1 0x0002; phy raw c45 0x60 0x1 0x0002; phy raw c45 0x0 0x1 0x0003; phy raw c45 0x20 0x1 0x0003; phy raw c45 0x40 0x1 0x0003; phy raw c45 0x60 0x1 0x0003\n        0xf400: 0x4794\n        0xf400: 0x4794\n        0xf400: 0x4794\n        0xf400: 0x4794\n        0xf401: 0x80a1\n        0xf401: 0x80a1\n        0xf401: 0x80a1\n        0xf401: 0x80a1\n        0x01: 0x0082\n        0x01: 0x0082\n        0x01: 0x0082\n        0x01: 0x0082\n        0x02: 0x600d\n        0x02: 0x600d\n        0x02: 0x600d\n        0x02: 0x600d\n        0x03: 0x8790\n        0x03: 0x8790\n        0x03: 0x8790\n        0x03: 0x8790\n\nPower up at 0C, reading the same registers I see the following (shown below). Resetting the gearbox does not change this behavior. I tried resetting about 6 times. On the same power up I changed the temperature of the chamber to 25C, read back the registers and they\u2019re still reporting 0x4793 for the chip ID. Tried resetting the gearbox a few times and that made no difference. I tried reading those registers a few times as well and I\u2019m consistently seeing the same values over and over again. \n\n-\tBCM.0> phy raw c45 0x0 0x1 0xf400; phy raw c45 0x20 0x1 0xf400; phy raw c45 0x40 0x1 0xf400; phy raw c45 0x60 0x1 0xf400; phy raw c45 0x0 0x1 0xf401; phy raw c45 0x20 0x1 0xf401; phy raw c45 0x40 0x1 0xf401; phy raw c45 0x60 0x1 0xf401; phy raw c45 0x0 0x1 0x0001; phy raw c45 0x20 0x1 0x0001; phy raw c45 0x40 0x1 0x0001; phy raw c45 0x60 0x1 0x0001; phy raw c45 0x0 0x1 0x0002; phy raw c45 0x20 0x1 0x0002; phy raw c45 0x40 0x1 0x0002; phy raw c45 0x60 0x1 0x0002; phy raw c45 0x0 0x1 0x0003; phy raw c45 0x20 0x1 0x0003; phy raw c45 0x40 0x1 0x0003; phy raw c45 0x60 0x1 0x0003\n-\t        0xf400: 0x4793\n-\t        0xf400: 0x4793\n-\t        0xf400: 0x4793\n-\t        0xf400: 0x4793\n-\t        0xf401: 0x80a1\n-\t        0xf401: 0x80a1\n-\t        0xf401: 0x80a1\n-\t        0xf401: 0x80a1\n-\t        0x01: 0x0082\n-\t        0x01: 0x0082\n-\t        0x01: 0x0082\n-\t        0x01: 0x0082\n-\t        0x02: 0x600d\n-\t        0x02: 0x600d\n-\t        0x02: 0x600d\n-\t        0x02: 0x600d\n-\t        0x03: 0x8790\n-\t        0x03: 0x8790\n-\t        0x03: 0x8790\n-\t        0x03: 0x8790\n-\tBCM.0>", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 30-Sep-2014  2:51PM PST\n---------------------------------------------\nWe think we have found the cause of the problem. Please leave this ticket open while we conduct more testing to verify that this fixes the problem that we saw. We will discuss our findings next week after more rigorous testing across boxes.\n\nWe found an issue with the +1V0 rail at cold temperatures. This is what's causing the strange behavior that we saw. I attached a plot showing the ramp up of the +2V5 and +1V0 rails at cold temperature. \n\nThe strange behavior in the plot is occurring because of an over current fault on +1V0 rail. The rail is turning off for 20ms while in hiccup mode, then it turns on again and ramps up to 1.0V. When I saw this condition the gearbox was reporting a chip ID of 84793. I was able to get failures to occur at 15C ambient as well. In that case the output was even more bizarre:\n\nBCM.0> phy raw c45 0x0 0x1 0xf400; phy raw c45 0x20 0x1 0xf400; phy raw c45 0x40 0x1 0xf400; phy raw c45 0x60 0x1 0xf400; phy raw c45 0x0 0x1 0xf401; phy raw c45 0x20 0x1 0xf401; phy raw c45 0x40 0x1 0xf401; phy raw c45 0x60 0x1 0xf401; phy raw c45 0x0 0x1 0x0001; phy raw c45 0x20 0x1 0x0001; phy raw c45 0x40 0x1 0x0001; phy raw c45 0x60 0x1 0x0001; phy raw c45 0x0 0x1 0x0002; phy raw c45 0x20 0x1 0x0002; phy raw c45 0x40 0x1 0x0002; phy raw c45 0x60 0x1 0x0002; phy raw c45 0x0 0x1 0x0003; phy raw c45 0x20 0x1 0x0003; phy raw c45 0x40 0x1 0x0003; phy raw c45 0x60 0x1 0x0003\n        0xf400: 0x4793\n        0xf400: 0x4793\n        0xf400: 0xefff\n        0xf400: 0xf7fe\n        0xf401: 0x80a1\n        0xf401: 0x80a1\n        0xf401: 0xf0bf\n        0xf401: 0xf0e1\n        0x01: 0x0082\n        0x01: 0x0082\n        0x01: 0x0082\n        0x01: 0x0082\n        0x02: 0x600d\n        0x02: 0x600d\n        0x02: 0x600d\n        0x02: 0x600d\n        0x03: 0x8790\n        0x03: 0x8790\n        0x03: 0x8790\n        0x03: 0x8790\n\nAfter making a mod to the power sequencing of this regulator I was able to get rid of the OC event and power up and read the expected chip ID. We are going to be running more extensive tests now to make sure this gets rid of the issue.\n\nThe datasheet says that \"the device does not require a power sequence. It has an internal power on reset circuit that keeps the logic in a reset state until all power supplies are powered up to a known level\", but from my initial tests it looks like this is being caused by the strange power up with OC fault. It looks like certain sequences won't work.", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 14-Oct-2014 11:26AM PST\n---------------------------------------------\nI'm changing the status to closed for this ticket. We have done further testing on our end and when we get rid of the OC fault on the 1.0V regulator we no longer see strange chip IDs for the gearbox. It's pretty conclusive that this is what lead to the problem and we have fixed it on our end. If we have any further questions or issues related to this we will submit a new ticket.", "CreatedOn": "2017-04-09 19:51:18", "CreatedBy": "admin"}]}, {"Number": "CS2272274", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 20-Jan-2015 10:53AM PST\n---------------------------------------------\nAny update on this?\n\nRegards,", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 04-Dec-2014 12:22PM PST\n---------------------------------------------\nMichael,\n\nI am looking into this for you.  I am not sure that the dcumentation is in error.  register 8250 only exists one place in the whole data sheet.\n\nBeyond that why are you wanting to disable adaptive gain control and try to control it yourself?  is it just for a lab experiment?\n\nDavid", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 04-Dec-2014 12:48PM PST\n---------------------------------------------\nYes. One example use case:\n\nGearbox line side connected to an electrical loopback IO. Sweep through Gearbox line side Tx settings (preemphasis,amplitude etc.) and generate eye at each setting to find out optimal setting for signal integrity. \n\nDuring this test, we want to lock Rx equalizer to a certain value so it is not adaptive as the Tx settings change.", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 03-Dec-2014 10:59AM PST\n---------------------------------------------\n0x948C/0x958C/0x968C/0x978C are for Line Side VSR lanes. And the procedure to set/get those values do work properly.\n\nWe would like to do rx equalization on the line side NPPI lanes (4-9). For other controls such as preemphasis the procedure for NPPI lanes usually same as the ones for system side CAUI lanes (just different core when using indirect registers). \n\nWe could not find rx equalization related APIs in the driver either. It would be great if we can get confirmation on what step 3 (0x8250) does, and whether it is necessary for the line side NPPI lanes.", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 11-Dec-2014  7:33AM PST\n---------------------------------------------\nAny update on this?", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 20-Jan-2015 12:20PM PST\n---------------------------------------------\nMichael,\n\nthanks for pinging me.  It sort got dropped with the holidays.  I have asked for the factory to followup and verify 8250.6 is not required.", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 03-Dec-2014 11:06AM PST\n---------------------------------------------\nIt's possible that in that mode it is always under control of firmware.  Now that I have a somewhat clearer picture I can ask.", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 11-Dec-2014  7:49AM PST\n---------------------------------------------\nI have no update.  I have submitted an internal ticket bit the AE has not responded yet\n\nDavid", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 21-Jan-2015  6:56AM PST\n---------------------------------------------\nMichael,\n\nIt has been confirmed that 8250.6 is not involved in this and is a mistake in the documentation.  This will be fixed on a subsequent revision of the data sheet.\n\nDavid", "CreatedOn": "2017-04-09 20:24:08", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-Dec-2014  1:38PM PST\n---------------------------------------------\nMichael,\n\nSorry it has taken as long as it has.  I have an initial first pass at an answer.  \n\nYes you can disable equalization on the 10 10G ports on the PPI side.  This registers 8250 seem to not be applicable here and as you guessed is not required.  This register is not documented in the data sheet so the AE is going to chip design to see what they were trying to say.  At this point ignore the requirement for 8250.6 and move on to see if you get what you need.\n\nI probably won't have anything more till after the beginning of next year\n\nDavid", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 03-Dec-2014 10:48AM PST\n---------------------------------------------\nNot that there is a lot of detailed documentation, but I don't see anything to suggest the same handshake is used with 0x8250.6.  That said, what's the complete recipe you are using for the line-side settings?  Do you not get the modified values being updated in registers 0x948C/0x958C/0x968C/0x978C for lane 0/1/2/3 respectively?\n\n84793-SWUM102 page 43 mentions register 0xF418 as used to determine modes of equalization on the line side.  How is this register set?\nI don't find any further information about either 0x8250 or 0xF418.  If you've stumbled on something more please let me know.  I need to fill-in some blanks in order to formulate a factory question should that be the next step.", "CreatedOn": "2017-04-09 20:24:07", "CreatedBy": "admin"}]}, {"Number": "CS2288505", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 14-Jun-2016  7:55AM PST\n---------------------------------------------\nAlso, please confirm the version of 84794 firmware in use here.", "CreatedOn": "2017-04-10 02:35:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 14-Jun-2016  7:56AM PST\n---------------------------------------------\nWe had an issue in the past where it looked like the adaptive equalization picked non-optimal values. While looping running the eye monitor tool on the Gearbox system side lanes, once in a while we would see much lower eye quality. Maybe 1/20 times the eye size was ~500-600 instead of 2000. This issue didn't happen when we forced the equalization manually. So we decided to use manual equalization values for all the Gearbox lanes. We ran our qualification on our end scanning through all the possible equalization values and picked optimal values based on the eye monitor tool.", "CreatedOn": "2017-04-10 02:35:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 14-Jun-2016  8:02AM PST\n---------------------------------------------\nWe're using FW version D009", "CreatedOn": "2017-04-10 02:35:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 14-Jun-2016  7:43AM PST\n---------------------------------------------\nFor completeness, why are you trying to use your own values rather than relying on adaptive equalization, which actually seems to be working better based on your description?", "CreatedOn": "2017-04-10 02:35:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 17-Jun-2016  5:20AM PST\n---------------------------------------------\nRather than paraphrase, here's the exact response from our factory AE.  I had slightly re-worded the questions for internal discussion.\n\nQ1.  Based on 84794-DS05 Table 310, should bits [3:0] reflect any meaningful value when adaptive equalization is enabled (bit 4 is 0) ?\n--> No\n\nQ2.  If the answer to Q1 is 'no', can adaptive equalizer results be read from any register?\n--> Yes, you can read it from 0x822B[3:0]\n\nQ3.  Is toggling of 0x821C.4 all that is needed to enable/disable adaptive equalization, or is some additional sequence required?\n--> Yes, that\u2019s it.\n\nIf 821C.4 is set then forcing a value in 821C[3:0] would set manual eq values. But same manual eq value will not get reflected in 0x822B[3:0]\n\nSimilarly if 821C.4 is set to 0, then adaptive EQ values will get updated in 0x822B. But 0x822B values will not get reflected in 0x821C[3:0]\n\nIn better words:\n821C.4 is used to enable /diable adaptive EQ  , 0 to disable, 1 to enable\n821C[3:0] is used to set and read manual EQ values if 821C.4 is set to 1\n822B[3:0] is used to read adaptive EQ values and 821C.4  is set to 0", "CreatedOn": "2017-04-10 02:35:35", "CreatedBy": "admin"}]}, {"Number": "CS2295458", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 6/24/2014 9:03:00 AM PST\n---------------------------------------------\nXinrong,\nPls use E0CA40A1FFFF4790_000D. This is the latest firmware.\nAfter the firmware downloaded. Read 1.f41b to get checksum, it should be 0x600d. Read 1.f417 to get version. It should be 0x000d.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:36:53", "CreatedBy": "admin"}]}, {"Number": "CS1852000", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 22-Oct-2014  2:13PM PST\n---------------------------------------------\nHi Ronen,\n8479x in Ingress side is pure repeater: clock is recovered and phase information is transferred from Line rx to system side Transmit.\nHowever in Egress direction, it is not a pure repeater, no phase information gets transferred from System receive to line transmit.\n\nIf you go through Software user manual on docsafe and search for Egress path and Ingress path clock domains. You will observe our subtle explanation.\n\nUnder Ingress path it  is mentioned  \u201crecovered clock is transferred to CAUI and used as a TX clock at system side\u201d\nAnd \nUnder Egress path it is mentioned \u201c the line side TX CMU output clock is generated from REFCLOCK\u201d\n\nYou are correct, We should add this in the HWUM, will do so. Information is there though. \n\nKeeping this case open until I fix the HWUM.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 05:17:21", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 22-Oct-2014  2:17PM PST\n---------------------------------------------\nNishant,\n\nThanks a lot for the explanation and action plan!\n\nRegards,\nRonen", "CreatedOn": "2017-04-06 05:17:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Nov-2014  1:40PM PST\n---------------------------------------------\nchanging this case to resolved. Have one more csp open to track HWUM update.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:17:22", "CreatedBy": "admin"}]}, {"Number": "CS2262301", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 19-May-2014  6:53AM PST\n---------------------------------------------\nWe are theorizing this could be intermittend LOS (flapping) since the latched status is being reset at your polling interval.  What is the amplitude of the transmitted signal from the NPU?  Are you able to experiment by increasing its amplitude to see if there is any difference?", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 30-Apr-2014  1:53PM PST\n---------------------------------------------\nHere's the test (and we're setting up a switch to emulate the loopback path ourselves).\n1. For all ten lanes:  84794 System Tx -->send PRBS -->NPU (remote loopback) --> 84794 System RX \n2. Check IEEE_PMA_PMD_STATUS_2.pma_pmd_transmit_fault (twice, since 1.0008 is a sticky bit register)\n3. Disable PRBS\n4. Check IEEE_PMA_PMD_STATUS_2.pma_pmd_transmit_fault (twice)\nWe'd expect fault register to read back 0xBFC1 when PRBS is disabled and expect 0xB7F1 when continuous PRBS is flowing", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 28-May-2014  6:45AM PST\n---------------------------------------------\nAttached. I am trying to find out what amplitude 31 corresponds to in mV.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Jun-2014  9:51AM PST\n---------------------------------------------\nThank you.  Resolving per your confirmation.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 21-Apr-2014  7:41AM PST\n---------------------------------------------\nCan I get an ETA on this please?", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 29-Apr-2014  5:39AM PST\n---------------------------------------------\nWe are unable to recreate the assertion of tx fault, neither as a hard fault indication nor as an intermittent status.\nCan you utilize to good SigDet and CDR lock status as a check against the tx fault status bits?  You've said that data is passing successfully.\nIf the link partner is not experiencing any issues and the overall data path is sound, are you able to ignore this status for your design?", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 20-May-2014  1:49PM PST\n---------------------------------------------\nUnfortunately the documentation for the NP5 does not specify the amplitude we are using in millivolts. It is equal to or above 1220 millivolts. We will try using 1220mv, as well as the maximum value and send you the results.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 07-May-2014  5:50AM PST\n---------------------------------------------\nNext debug suggestion after AE consult:\nDo this for each case (prbs loopback test passing successfully, NPU normal traffic passing but showing tx fault status).\nWrite 80B1.2:0 0x0\nRead 80B0 (twice, but include values from each read).\nThanks.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 15-May-2014  7:40AM PST\n---------------------------------------------\nThe first number (20140512) is the date, the second is the time to the nearest millisecond. In this case the two reads were done at the same time to the nearest millisecond (55 seconds and 202 milliseconds).", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 06-May-2014  9:56AM PST\n---------------------------------------------\nThe fault register reads 0xB7C1 when PRBS is running, and 0xBFC1 when it stops.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 22-Apr-2014 11:31AM PST\n---------------------------------------------\nIn your test where tx fault is observed, which mode are you in?  Does mode selection make any difference?\n\nFor CDR and LOS:\nSystem side CDR lock status (system side indirect register access, I hope you are aware of the procedure, as mentioned in the DS)\nFor each lane:  Indirect Write 0x80b1.2:0 0x0;  Indirect Read 0x80b0.12  (1 means locked)\nSystem side LOS status (indirect register access)\nFor each lane:  Indirect Write 0x80b1.2:0 0x1;  Indirect Read 0x80b0.5  (1 means signal present)", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 29-Apr-2014  7:47AM PST\n---------------------------------------------\nIf the fault is always asserted, we have to no choice but ignore the status.\n\nBut we are afraid if there is an actual problem that is causing this fault. The traffic may be flowing but could this fault be indication of some hidden problem?\n\nWhat contributes to this fault?", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-May-2014  1:52PM PST\n---------------------------------------------\nNeither the maximum (unknown) amplitude, nor 1220mV has any effect. The register is still consistently 0xbbc1.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 30-Apr-2014  1:12PM PST\n---------------------------------------------\nAre you able to loopback PRBS through your NPU?  That is, 84794 --> NPU --> 84794.  If you can run this path we have an idea for a test you might run to help understand the fault functionality.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 12-May-2014  2:28PM PST\n---------------------------------------------\nSee attached.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 06-May-2014 10:19AM PST\n---------------------------------------------\n0xC in bits 7:4 makes sense from data sheet.  Not sure why we originally thought that should be 0xF.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Jun-2014  9:27AM PST\n---------------------------------------------\nI believe we discussed this one on the last weekly call, and it was going to be considered resolved with option to re-open if new information came from discussions with the NPU vendor.  Please confirm.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 16-Apr-2014 10:15AM PST\n---------------------------------------------\nI have put the BCM84794 in local loopback and the result is the same. \nAlso tried disabling sys sigdet status on all 10 lanes (register 0xF47B = 0x3ff), with the same result.", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Apr-2014 11:03AM PST\n---------------------------------------------\nMy understanding from the original case description is that even with these fault status bits, traffic can still pass.  Is that correct?  Are there any corresponding fault indications in/at the NPU that is directly connected to the 84794?  Any indications of errors at all in the NPU?  We are trying to equate any NPU-based status with that we're used to seeing in an attached switch.", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 21-Apr-2014  3:32PM PST\n---------------------------------------------\nPer the data sheet descriptions for bits 11 or 13 of IEEE_PMA_PMD_STATUS_2, absense if signal detect on any lane constitutes a fault.  We ran our own test by breaking individual lanes, and these caused a fault.  Otherwise there was no fault.  Traffic could still be sent through the lanes that were not intentionally broken.  When you observe the fault status, can you confirm that *all* lanes are able to pass traffic?  Also, please check the CDR and LOS status when in the state where tx fault status is asserted using register 0x80B1 and 0x80B0.", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 25-Apr-2014  1:51PM PST\n---------------------------------------------\nThe values output are in dec, not hex, so they're always 1. Sorry for the confusion.\n\nFor each lane:\n1. Read 0x80b1\n2. Set bit 0 of the read value to 1\n3. Write the value back to 0x80b1\n4. Read and output 0x80b0", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 24-Apr-2014  1:33PM PST\n---------------------------------------------\nI've attached the information. It looks like CDR is locked and signal is present. The fault bit goes on and off. There are 2 setups in the system. Data 2-1 has a 4x25 CFP2, data 2-2 has a 10x10 CFP2.", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 30-Apr-2014  1:46PM PST\n---------------------------------------------\nYes. We can loopback PRBS through NPU. In fact this is one of our sanity tests.", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-May-2014  7:32AM PST\n---------------------------------------------\nHow should I interpret the time stamps in the files?  I'm trying to figure out roughly how long it is between the first and second read of the same status register.  For example, can you estimate how much time is between these two reads in the log?\n20140512 16:49:55.202 [31519:0x3066041c0] [phy84794] GetLock(Phy84794_PRBS.cpp:265) CAUI lane 0 status: 0xb800\n20140512 16:49:55.202 [31519:0x3066041c0] [phy84794] GetLock(Phy84794_PRBS.cpp:267) CAUI lane 0 status: 0xb800", "CreatedOn": "2017-04-09 18:26:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 20-Jun-2014  9:47AM PST\n---------------------------------------------\nYes that's correct.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 30-May-2014  2:24PM PST\n---------------------------------------------\nAmplitudes above 21 are non-deterministic as they are too close to the power rail and AVS may affect the result. If the supply voltage is high enough, amplitude of 31 will be 1860mV.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 27-May-2014 11:17AM PST\n---------------------------------------------\nI think the register value 0xbbc1 is for something other than what we wanted to see.  Please run the equivalent check as the two log files posted on May 12, but with the signal amplitude from the NPU increased.  Thanks.", "CreatedOn": "2017-04-09 18:26:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Apr-2014  6:17AM PST\n---------------------------------------------\nThe description for IEEE_PMA_PMD_STATUS_2 bit 13 pma_pmd_transmit_fault_ability indicates this is an implementation-specific feature, and notes that signal detects from the system side are involved here.  I believe this indicates something to do with the transmit path of the NPU.  If that is the case, I would expect you to still see transmit faults in a loopback scenario, not using the CFP2.  Can you verify this?  If indeed this has to do with the system side, then connection to the NPU would be different than common use connected to a switch.  Designs of NPU/Switch interfaces may differ and would contribute.\n\nPlease run the loopback test.  Based on those results we can get more details about bit 13's description.", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Apr-2014 10:25AM PST\n---------------------------------------------\nRegister 0xF47B = 0x3ff should only disable interrupts.  It shouldn't affect the raw status in IEEE_PMA_PMD_STATUS_2 or IEEE_PMA_PMD_STATUS_1.  If you've reason to believe otherwise, please let me know.", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 16-Apr-2014 11:50AM PST\n---------------------------------------------\nYes, traffic can still pass. We are not seeing any faults on the NPU as far as I am aware.", "CreatedOn": "2017-04-09 18:26:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 25-Apr-2014 12:46PM PST\n---------------------------------------------\nMike, can you confirm the register sequence you used to get the LOS listing?  Bit 5 is alwats 0, indicating no signal.  Either the register was not read correctly, or I provided incorrect programming instructions.", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 21-Apr-2014 11:42AM PST\n---------------------------------------------\nAccording to the IEEE spec, bit 11 represent transmit fault where \u201c1=Fault condition on transmit path.\u201d What conditions in the phy would lead to this bit being set?", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 25-Apr-2014  2:41PM PST\n---------------------------------------------\nAttached conversions from decimal to hex/binary.", "CreatedOn": "2017-04-09 18:26:17", "CreatedBy": "admin"}]}, {"Number": "CS1959332", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Nov-2014 12:20PM PST\n---------------------------------------------\nHello Mizo-san,\nBCM8479x devices support a feature that allows for control of Peaking Filter adaptation in a couple of different ways. \n\nMode 1 - One Time Sweep \nOne time sweep. In this mode, the firmware sweeps the equalizer setting from minimal to maximum. At each equalizer settings, a measurement is performed and if the measurement result meets certain criterion, the sweep is stopped. Such sweep is done for all the 4 lanes sequentially. \nThis mode is activated by setting General Purpose register at 1.F418.[15] to 1. When the firmware finishes the sweep, it resets 1.F418.[15] to 0. \n\nMode 2 - Continuous Adaptation \nIn this mode, the firmware makes a small change (1 code) to the equalizer settings to see if the new setting results in better measurement. If so, the new setting is adopted; otherwise, the previous one is restored. This finishes one iteration of the adaptation, and the firmware goes on to execute other pending tasks. Next time when the firmware executes the adaptation function, the next lane is processed. \n\nMode 3 - No Adaptation \nIn this mode of operation, the user manually sets the PF set point using register 1.948c, 1.958c, 1.968c, 1.978c. \n\nMore details of adaptive eq for VSR lanes are mentioned in SWUM.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 04:18:35", "CreatedBy": "admin"}]}, {"Number": "CS2320973", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Dolly (Yingyun) Zhao[Comtech Broadband Corporation Limited]\nUpdate date: 12-Oct-2015  2:58AM PST\n---------------------------------------------\nHi,\n     Could you help to provide the power on sequence waveform for us to have a chck. Along with the voltage ramp, pls probe RSTB to make sure the signal is low while the power is coming up. Could you also do an experiment to bring up 1.0V first then 2.5V to see if the problem could clear up.  Also, please send the schematic to have a double check if everything is ok.", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Dolly (Yingyun) Zhao[Comtech Broadband Corporation Limited]\nUpdate date: 14-Oct-2015  7:10PM PST\n---------------------------------------------\nHi,\n   Sorry for the misunderstanding. It is from register 0xf414, but I think you could not get any value in the failure status.", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Meijun Zhao[Coriant GmbH]\nUpdate date: 13-Oct-2015  2:45AM PST\n---------------------------------------------\nHello Dolly Zhao\nPlease check attached waveform for power up.   We design always power 1.0V before 2.5V.\n\tCh2: 1.0V\n\tCh3: 2.5V\n\tCh1: Reset\n\nAlso please check attached schematic for Gearbox part.\n\nThanks.\n\n\nBest Regards\nMeijun Zhao (Mager)\nOffice: +86-21-3326 8186", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Dolly (Yingyun) Zhao[Comtech Broadband Corporation Limited]\nUpdate date: 06-Jan-2016  1:07AM PST\n---------------------------------------------\nSet to resolved. You can re-open this case if have any question.", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Dolly (Yingyun) Zhao[Comtech Broadband Corporation Limited]\nUpdate date: 14-Oct-2015  6:06PM PST\n---------------------------------------------\nHi,\n    There are also some reasons may cause the issue. \n1. Check the PHY address.\n2. Check the serboot status.\n3. You probably need to look into your MDIO pull up resistor value.\n4. You could change your MDC speed to have a try.\n5. You probably needs to check at what time ref clock is enabled after power supplies are stable and chip is not in reset. Your power on sequence does not have any indication of when the ref clock is enabled.\n\n\n-----Dolly Zhao", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Meijun Zhao[Coriant GmbH]\nUpdate date: 14-Oct-2015  6:25PM PST\n---------------------------------------------\nHello Dolly,\nWill check according your comments.\n\nOne question on : How to check the serboot status?  Any hardware pin indication?\n\nThe reference clock are valid within 10 seconds after power on, RESET signal is de-active more than 20 seconds after reference clock valid.\nMDC/MDIO pull up according to design spec. 4.75K pull up for MDC and 464ohm pull up for MDIO.\n\nBest Regards\nMeijun Zhao (Mager)\nOffice: +86-21-3326 8186", "CreatedOn": "2017-04-10 10:02:36", "CreatedBy": "admin"}]}, {"Number": "CS2289414", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 2/14/2014 1:48:00 AM PST\n---------------------------------------------\nHi,\nRequest is created for 84793,84794 and 84328 is created. It will be available in next 24hrs.\nThanks\nAneesh", "CreatedOn": "2017-04-10 03:30:13", "CreatedBy": "admin"}, {"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 2/15/2014 6:41:00 PM PST\n---------------------------------------------\nResolving as documents are available.\nThanks\nAneesh", "CreatedOn": "2017-04-10 03:30:13", "CreatedBy": "admin"}]}, {"Number": "CS1895436", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 27-Aug-2014 10:54AM PST\n---------------------------------------------\nDatasheet page 148. Register 1.8066/1.8067 - please go over it.", "CreatedOn": "2017-04-06 04:42:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 20-Aug-2014 11:31AM PST\n---------------------------------------------\nHi Kaming,\nthere currently is NO CLI command w/in the Trident for Gearbox PRBS. There is a package being worked on to provide 8479X functions that is/was being tested as of last week. It has not yet been released. To check the status of this code drop, I'd check w/ the Switch AEs - perhaps Andreas.\n\nIn terms of how to set the registers to generate and check PRBS, here's a sequence we use in our GUIs - notice the indirect write and reads to the registers.\nCall write(1, &HF453, &H0000&)\nCall write(1, &HF454, &H8069&)\nCall write(1, &HF455, &H006C&)\nCall write(1, &HF452, &H000E&)\n\nCall write(1, &HF453, &H0000&)\nCall write(1, &HF454, &H80b6&)\nCall write(1, &HF455, &H006C&)\nCall write(1, &HF452, &H000E&)\n\nCall write(1, &HF453, &H0000&)\nCall write(1, &HF454, &H80B1&)\nCall write(1, &HF455, &H0007&)\nCall write(1, &HF452, &H000E&)\n\nCall write(1, &HF453, &H0000&)\nCall write(1, &HF454, &H80B0&)\nCall write(1, &HF452, &H0016&)\n\nIn the end, 1.80B0 is the status reg (when 1.80B1 = 0x7), 1.8069 the generator, and 1.80B6 the checker.\n\nHope this helps,\nKK", "CreatedOn": "2017-04-06 04:42:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 27-Aug-2014  7:42AM PST\n---------------------------------------------\nhi KK,\n\nThanks for your help.\n\nMore question about the CAUI 10 to CXP SI measurement.\nWe check software manual not shows how to adjusted the pre-emphasis for 10G.\nDo you kindly help to figure out register address?\nWe can try in customer SI LAB.\n\nBRs\nKaiming", "CreatedOn": "2017-04-06 04:42:43", "CreatedBy": "admin"}]}, {"Number": "CS1956838", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-May-2015  3:06PM PST\n---------------------------------------------\nHi Jamie,\nJira phy-1489 says its resolved, is there anything needed from my side for this case ? \n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:52:39", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 29-May-2015  3:10PM PST\n---------------------------------------------\nNo.  Lets go ahead and close this.", "CreatedOn": "2017-04-06 05:52:40", "CreatedBy": "admin"}]}, {"Number": "CS2296815", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 8/6/2014 8:54:00 AM PST\n---------------------------------------------\nXinrong,\nDoes CFP4 opt module available now?\nYes, These registers invert the PN lanes.\n1, line side output: REG 0xF633.[9:0], each bit is used to enable correspond lane's polarity;\n2, line side input:  REG 0x9811.[3:0], each bit is used to enable the dual speed lane's polarity;\n3, system side output: REG 0xF516.[9:0], each bit is used to enable correspond lane's polarity;\n4, system side input: REG 0x80BA.[3:2], use F452~F454 to select the specific lane.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:53:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 8/14/2014 9:21:00 AM PST\n---------------------------------------------\n84790 lanes are not inverted by default.\nSet to resolved.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:53:59", "CreatedBy": "admin"}]}, {"Number": "CS2262307", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 03-Jun-2014 11:56AM PST\n---------------------------------------------\nSlight correction on the verbal advise from today's call.  It is *not* that idriver and ipredriver settings should be +/- 3 ticks from each other, but rather for either setting we do not expect it be necessary to set these individually more than +3 ticks above the default settings used by the SDK software.", "CreatedOn": "2017-04-09 18:46:26", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 13-May-2014  2:31PM PST\n---------------------------------------------\nQuery answered", "CreatedOn": "2017-04-09 18:46:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 10-Jun-2014 11:09AM PST\n---------------------------------------------\nResolved based on weekly customer call.", "CreatedOn": "2017-04-09 18:46:26", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-May-2014  7:53AM PST\n---------------------------------------------\nFirst of all, thanks for these values.\n\nI believe the 0x99x8 are the VSR lanes right? Do the nppi/caui lanes have similar ranges?\n\nI also notice that there is no requirement to set idriver/predriver to same value as tsc40. Is there any recommendation on what combinations can be used (will we run into troubles if do F0 or 0F)?\n\nThanks", "CreatedOn": "2017-04-09 18:46:26", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 14-May-2014  7:41AM PST\n---------------------------------------------\nYou should fine that the API eventually uses registers 0x9948, 0x9958, 0x9968, 0x9978 for each lane.  I believe these are for the system-side based on my reading of the code.  Bits [3:0] are used to control Idriver current and bits [7:4] control Ipredriver current.  Default settings should be 0x88DB from the microcode, and this is set just once.\n\nNishant was kind enough to run some tests for us, and he came up with the following measured values by programming registers 0x99X8.\n0x88DB \u2013 387 mV\n0x88EB \u2013 393 mV       \n0x88FB \u2013 397 mV\n0x88DC \u2013 393 mV       \n0x88EC \u2013 400 mV        \n0x88FC \u2013 405 mV\n0x88DD \u2013 399 mV        \n0x88ED \u2013 405 mV        \n0x88FD \u2013 412 mV\n0x88DE \u2013 400 mV        \n0x88EE \u2013 410 mV         \n0x88FE \u2013 417 mV \n0x88DF \u2013 402 mV        \n0x88EF \u2013 411 mV        \n0x88FF \u2013 420 mV\n\nPlease let us know if this is sufficient for you to proceed.", "CreatedOn": "2017-04-09 18:46:26", "CreatedBy": "admin"}]}, {"Number": "CS1639464", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 10-Sep-2015  2:11PM PST\n---------------------------------------------\nHi KaiMing,\n\nso no support is required for Fixed Pattern generation, correct?\n\nhas customer characterized their PCB traces? just want to make sure we are working w/ compliant channel before trying to figure this out.\n\nregisters 1.F452 - 1.F456 are used to access indirectly addressed registers. please refer to \"Indirectly Addressable Registers\" section in 84793-SWUM102-R posted on docSAFE.\n\ndo you see any change in the eye when you use following sequence shown in your last entry?\nBCM.5> phy xe8 0xf453 1 0x0800\nBCM.5> phy xe8 0xf454 1 0x8067\nBCM.5> phy xe8 0xf455 1 0x19f8 ==> Default main tap and post tap MSB\nBCM.5> phy xe8 0xf452 1 0x000c\nBCM.5> phy xe8 0xf452 1 0x0002\n\nwrite to reg 1.F453 doesn't look correct. which lane are you trying to write to?\n\n\nSFI refers to channel supported by SFF-8431. since 84794 line does not fully support SFF-8431, it cannot claim SFI support. SR is a subset of SFI and 84794 supports SR.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:35:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Yung Chen[Broadcom Corporation]\nUpdate date: 15-Sep-2015  2:55AM PST\n---------------------------------------------\nDavid,\n\nPlease look at my explanation as below, thanks.\n\n(1) For 10G line side TX pre-emphasis, I am sure that Kaiming's command, BCM.5> phy xe8 0xf453 1 0x0800 -> for lane 4, is correct. It is recommended by Kai Yang, please refer to the CSP#883429. Also, Kaiming can reduce main tap by reg. 0x8067 but can't increase it because default value is the max. value.\n(2) For generating 8180 on 10G line side, Kaiming can do it by reg. 1.f606 to enabling fixed pattern for lane0-3 and 1.f607-f627 for contents of fixed pattern but we don't know how to generate fixed pattern for lane4-9. Could you please help to check it? Thanks. \n \nWith best regards,\n\nYung.", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 16-Sep-2015  6:55PM PST\n---------------------------------------------\nHi David,\n\nThanks for your help.\nAbout the pre-emphasis issue should I enable new case?\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 15-Sep-2015  6:22AM PST\n---------------------------------------------\nHi David,\n\nHere update S-Parameter simulation result.\nThe result are pass.\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 16-Sep-2015  7:02PM PST\n---------------------------------------------\nHi Kaiming,\n\nyes, please close this case if you have no further questions on fixed pattern gen and open a new case for pre-emphasis.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 14-Sep-2015  8:03AM PST\n---------------------------------------------\nHi David,\n\nStill needed fixed pattern.\nWe trying using BCM82792 register from other CSP case to duplicated but failed.\nIf  characterized their PCB traces is S-Parameter, could you help provided 10G IBIS model to customer.\nThey can do this and provided result in 3 days.\n\nFor the port mapping:\nLane 0: xe0\nLane 1: xe1\nLane 2: xe2\nLane 3: xe3\nLane 4: xe4\nLane 5: xe5\nLane 6: xe7\nLane 7: xe8\nLane 8: xe9\nLane 9: xe10\n\nAnd today do same comments:\nBCM.5> phy xe8 0xf453 1 0x0800 ==> For Lane 4\nBCM.5> phy xe8 0xf454 1 0x8067\nBCM.5> phy xe8 0xf455 1 0x19f8 ==> Default main tap and post tap MSB\nBCM.5> phy xe8 0xf452 1 0x000c\nBCM.5> phy xe8 0xf452 1 0x0002\n\nStill cannot open its eye mask.\n\nBTW, we have same issue in Fortinet other project FG-3940D 4 x 100G.\nThey using mode is SR10 for CFP 100G fiber module cannot open its eye, and the default pre-emphasis main-tap in maximum value \"0x17f8\"\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 14-Sep-2015  3:41PM PST\n---------------------------------------------\nHi Kaiming,\n\nyour original problem description says \"FG-3815D chip combination: BCM56850 + BCM56640 x5 + BCM84794 x5\".\nyour latest entry says \"We trying using BCM82792 register from other CSP case\".\n\nis the question regarding 84794 or 82792?\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Sep-2015  1:54PM PST\n---------------------------------------------\ni'll get back to you tomorrow.\n\nregards", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Oct-2015  5:07PM PST\n---------------------------------------------\nmoving to resolved per last response.", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 16-Sep-2015  2:07PM PST\n---------------------------------------------\nHi KaiMing & Yung,\n\nlanes 4-9 of line side can generate fixed patterns using following register bits.\n1.8061.0=1\n1,8062.[9:0] & 1,8063.[9:0]  20-bit pattern\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 10-Sep-2015  1:45AM PST\n---------------------------------------------\nHi David,\n\nSorry to update some news and need you help.\nAnd sorry make you wrong message.\nLane 4~ Lane 9 SI test not pass and Lane 0~Lane 3 pass.\n\n1. We do test in 10G mode but the eye are fail in all port.\n    I check the preemphasis default value is \"0x17f8\".\n    Main tap in maximum value.\n    below is log file:\nBCM.5> phy xe8 0xf453 1 0x0800\nBCM.5> phy xe8 0xf454 1 0x8067\nBCM.5> phy xe8 0xf455 1 0x19f8 ==> Default main tap and post tap MSB\nBCM.5> phy xe8 0xf452 1 0x000c\nBCM.5> phy xe8 0xf452 1 0x0002\n\n  Is the 0x8067 for 10G preemphasis?\n\nAttached is one of eye.\n\n2. In 10x10G mode for SFP+ in port status shows interface is SR.\n    And I check the register shows BCM84794 in \"Mode 4\"\n    If in 10x10G SFP+ interface is SFI or SR?\nbelow is log file:\nBCM.5> ps\n            ena/    speed/ link auto    STP                  lrn  inter   max  loop\n      port  link    duplex scan neg?   state   pause  discrd ops   face frame  back\n       ge0  down    1G  FD   SW  No   Forward  TX RX   None   FA   GMII 16356\n       xe0  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe1  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe2  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe3  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe4  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe5  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe6  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe7  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe8  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n       xe9  down   10G  FD   SW  No   Forward  TX RX   None   FA     SR 16356\n      xe10  down   10G  FD   SW  No   Forward  TX RX   None   FA    SFI 16356\n      xe11  down   10G  FD   SW  No   Forward  TX RX   None   FA    SFI 16356\n      xe12  down   40G  FD   SW  No   Forward  TX RX   None   FA  XLAUI 16356\n      xe13  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe14  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe15  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe16  down   40G  FD   SW  No   Forward  TX RX   None   FA  XLAUI 16356\n      xe17  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe18  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe19  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe20  down   40G  FD   SW  No   Forward  TX RX   None   FA  XLAUI 16356\n      xe21  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe22  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n      xe23  !ena   10G  FD None  No   Forward  TX RX   None   FA  XGMII 16356\n\nSDK version is 6.3.9.\n\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 08:35:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 14-Sep-2015  7:08PM PST\n---------------------------------------------\nHi David,\n\nSorry make you confuse.\nThe question is 84794.\n\nBRs\nKaiMing.", "CreatedOn": "2017-04-06 08:35:24", "CreatedBy": "admin"}]}, {"Number": "CS2301161", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 12/17/2014 6:04:00 PM PST\n---------------------------------------------\nHey Mike,\n\nWe can look at this tomorrow.  We'll probably want to try and run system side PRBS between gearbox and switch right?  We'll also want to try and run with phy loopback to try and isolate the issue down to a particular receiver.\n\nLet me know when is good.", "CreatedOn": "2017-04-10 06:51:59", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 1/8/2015 10:21:00 AM PST\n---------------------------------------------\nWe looked at this issue before the holidays and it appeared the issue was caused by TX FIR settings on the gearbox which would seem to cause the receiver of the retimer in the optics being used to source bit errors.  Once we adjusted the TX FIR values we were able to run error free.  \n\nWe also discussed the need to have different TX FIR settings for different media types as the loss profiles for the different media are going to be significantly different.", "CreatedOn": "2017-04-10 06:51:59", "CreatedBy": "admin"}]}, {"Number": "CS1906439", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 04-Mar-2015  9:40AM PST\n---------------------------------------------\nDone!!\nclarification has been added in the HWUM and uploaded on docsafe.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 04:23:04", "CreatedBy": "admin"}]}, {"Number": "CS4124741", "ProductName": "BCM84794", "TicketNotes": [{"Notes": ".", "CreatedOn": "2017-12-03 13:55:38", "CreatedBy": "00939652"}, {"Notes": "wrongly raised, kindly ignore", "CreatedOn": "2017-12-01 17:55:20", "CreatedBy": "N6021231"}]}, {"Number": "CS1695573", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 19-Sep-2014 11:19AM PST\n---------------------------------------------\nInternal Documentation given over Email.", "CreatedOn": "2017-04-06 04:59:51", "CreatedBy": "admin"}]}, {"Number": "CS1643384", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 28-Aug-2015  7:53AM PST\n---------------------------------------------\nHi Brian,\n\nHere are my responses based on what I was able to find/etc. \n\n#1 - MDC/MDIO interface and USB cable - some of customer's #1/#2.\nThe MDIO interface is the interface used to access the PHY registers.  The customer MUST design in MDC/MDIO access in their design.  That is how their SW will access the 84794 including download the FW.  Per the datasheet 84794 uses Clause 45, 1.2V MDC/MDIO interface.\n\nI believe you see two MDIO headers on the eval board so they have flexibility to either,\n   a.  Use the MDIO interface from the FPGA to configure/access the 84794.\n   b.  Bypass the FPGA and cable in a different MDC/MDIO controller to configure/access the 84794.\n\nIf you were using the eval board and monitor GUI, you would use option a since the GUI commands get routed over USB to FPGA and translated into MDC/MDIO commands.\n\nOption b is just an alternative way to access if needed.\n\nThe USB cable is used to access the eval board - I believe you would just buy a type A to type B cable to interface between a standard PC and eval board. But, again, this is just to get access to the eval board - I would not expect customer to need this on their design assuming they have an MDC/MDIO controller directly accessing the 84794 running their SW.\n\n#2 - Lane swapping\n\nPer the HW User manual, \"The BCM84793 does not have logic to support lane reversal\".  Therefore, there are no registers in the 84794 to configure lane reversals.\n\nThe manual is saying that since the 84794 serdes pinout on line side is reversed to the connector pinout in what they call \"straight-reverse\".  Since this makes routing difficult, they say you can route the line side serdes reversed (physically) to ease routing.  Then they are saying you can connect system side as you normally would (straight physically), but then configure the MAC to reverse the system side interface logically (SW) - again, must be \"straight-reverse\".  That way the seredes are aligned from MAC to connector even though you swapped the line side serdes in layout.\n\n #3 - Eye Monitoring tool\n\nThe eye monitoring tool is detailed in the SW User Manual (\u00a084793-SWUM102-R).  Yes - the customer will access over MDC/MDIO interface.  \n\nAlso note that the user manual mentions an eye monitor vbs script that can be used as a reference for writing their own SW.  It is included in \"bcm84793_evalKit_rev8.zip\", so I would make sure they have access to that.\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:21:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Brian Stroud[Avnet Inc]\nUpdate date: 30-Sep-2015  3:22PM PST\n---------------------------------------------\nresolving", "CreatedOn": "2017-04-06 08:21:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Erik Kyle[Broadcom Corporation]\nUpdate date: 26-Aug-2015  3:02PM PST\n---------------------------------------------\nHi Rob,\n\nSorry - but, I really haven't had a chance to take a good look at this.  But, want to get started.\n\nIs this customer evaluating an 84793 eval board from Broadcom, or asking questions relative to his own design?  If it's their design, have they already built the boards?\n\n#1 - The MDC/MDIO interface is a two-wire interface to the PHY.  This is a common interface for accessing the registers of all PHY's.  Yes, they will need to have access to this.  If it's the eval board, then it's already connected to the FPGA - so they just need to get SW monitor GUI from eval kit up and running.\n\n#2/#3 - If they are using the eval board, I don't think they should need to worry about this.\n\nThe USB cable connects to the eval board. The board comes with software GUI for windows.  It's normally called \"monitor\".  You would install this package, which allows your windows PC to communicate with the board over the USB cable.  In the GUI you can access the registers and run available tests (I don't have a board).\n\nPlease make sure the customer has access to all of the following.\n\n1.  84793-QSG101-R --> Eval board quick start guide - talks about connecting cable, installing GUI, screenshots etc.\n2.  bcm84793_cfp2_cxp_evalKit_rev2.zip --> This is the SW GUI they will install to access the eval board.\n3.  84793-HWUM101-R & 84793-SWUM102-R --> HW and SW user manual - sounds like they already have these.\n\nThanks,\n\nErik", "CreatedOn": "2017-04-06 08:21:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Brian Stroud[Avnet Inc]\nUpdate date: 27-Aug-2015  7:34PM PST\n---------------------------------------------\nThey are utilizing the Broadcom BCM84794 as part of thier own hardware design.", "CreatedOn": "2017-04-06 08:21:23", "CreatedBy": "admin"}]}, {"Number": "CS2014910", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 12-Nov-2014  7:25PM PST\n---------------------------------------------\nUpdate:\n\nCustomers measurements on a bad assembly at the AVDD_TX show that on what they characterize as a \"bad\" port the drop accross the ferrite used is approximately 33mV and the voltage at the balls is approx 973mV.  On a \"good\" port the drop is also 33mV but the voltage at the balls is 992mV.  So I pulled this thread a bit and the deal is that there is a drop on the power distribution from port 1 to port 4 of the assembly.\n\n18mV drop from P1 to P2\n32mV drop from P1 to P3\n40mV drop from P1 to P4\n\nSo I pointed out that this kind of variation should naturally contribute to some delta/variation in the eye height at each port.  They are arguing here that they think this should not translate much to eye opening.  They are also arguing that supply voltage when they margin it doesnt seem to have a big impact on eye height measured.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 10-Nov-2014  6:53PM PST\n---------------------------------------------\nHi Jamie,\n\nNishant's on pto and will return to office on 11/13.\n\nhave we reviewed their layout? are the 2 ports in question identical?\nhow many boards have they measured? are all boards showing same sensitivity?\nare they using a host compliance board to measure the output eye? same board is used for both ports?\nare they not passing the eye mask? or are they worried about variance?\nhave they measured the power supply voltage at the pin to confirm DC voltage are similar?\nthere will be some differences due to part to part variation. but i don't think it will be as large as 20%. i'll check w/ the DVT team.\n\nregards,\nDave", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 11-Nov-2014 10:33AM PST\n---------------------------------------------\nHi Jamie,\n\ntypical eye height measured is >500mVppd. Ch2 is the worst of the 4 channels. This is the worst routing inside the pkg. given part should vary ~70mV over voltage/temp. max variation we observed is ~125mV across PVT.\nalthough observed variance by the customer is within the max variation, it doesn't make sense to see \"up to 20%\" variation between part to part (likely same lot) and under similar environment.\n\nregards,\nDave", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 13-Nov-2014  1:59PM PST\n---------------------------------------------\nI think the receiver equalizer on Enzo isnt quite strong enough to equalize the loss associated with the CFP2 loopback...at least not with the same TX FIR settings they would use for an optic.  So that's why they needed to go and come up with optimized settings just for the loopbacks.\n\nThey used both manual adjustment and adaptive PF settings on Enzo when working with passive loopbacks and were still not able to get an open enough eye with loopbacks unless they adjusted TX FIR...which I think is ok to do since it's loopbacks that they are interested in.", "CreatedOn": "2017-04-06 05:28:32", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 13-Nov-2014 10:40AM PST\n---------------------------------------------\nHi Jamie,\n\nat +/-5% supply limits, typical part may show ~20mV difference in eye height.\nif the power supply difference at the pin is lower than this then eye height variance should be less.\n\nsome variation should be present since each port may be slight different due to manufacturing tolerances. i guess we can argue how large the variance observed should be.\nwhat is the problem here?\nis there a violation on any specs?\nis there a concern over margin? how much margin do they have?\n\nregards,\nDave", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 11-Nov-2014  9:59AM PST\n---------------------------------------------\nHey Dave,\n\nNo...I dont believe a layout review was done on this board.  Schematic review was also not completed in time on the Gearbox portion of this design...see CSP 828513 for schematics.\n\nThey are claiming the two ports that they have homed in on are identical layouts (copy paste)...but Im asking them for snippets of these to confirm.\n\nI'll get the number of assemblies and ports showing the variation.  They had hinted that this was a more pervasive problem then just a few ports...but we'll find out.\n\nThe mechanical form factor is a CFP 2 cage...and they have what they are indicating is a paddle card plugged into the CFP2 cage where they are taking measurements.  So it's similar to an HCB...but not exactly the same.  They are looking at the same lane with the paddle card...so they are arguing that the results should be symmetric for an identical layout on another port.\n\nThey dont appear to be complaining about passing an eye mask here.  They are more interested in the variance.  \n\nIm asking for a measurement on the 25G analog TX supply downstream of inductor for both ports.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 11-Nov-2014 12:39PM PST\n---------------------------------------------\nThanks Dave.\n\nIm attaching the layout of one of the platforms showing this behavior called Moonshot.  The layout does appear to be very symmetric port to port.  \n\nThe customer has identified at least 3 assemblies that show a larger variance per port...and they are collecting data that seems to indicate that there \"might\" be more variance with devices that have a '-01' code on them.  Attaching a picture of the package for reference.  \n\nBut as an example, of the 3 assemblies below, the assembly with all -01 devices seems to show more variance in the output eye height where  the port to port variance when looking at the same lane of each port appears to approach up 30% even.\n\nSN\t                                              Port\n\t                   1\t2\t3\t4\n---------------------------------------------------------------------------------------\nSAL18360B7J\t01\t02\t02\t02\nSAL18360B80\t01\t02\t01\t01\nSAL18360B7T\t01\t01\t01\t01", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 05-Dec-2014  3:26PM PST\n---------------------------------------------\nmoving to resolved.\nre-open if needed.", "CreatedOn": "2017-04-06 05:28:32", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 10-Nov-2014  2:48PM PST\n---------------------------------------------\nI'm attaching a set of eye captures that the customer has taken for one of these ports sets.\n\nIm also attaching the customers TDR for the lanes being tested which seems to show that they are pretty symmetric.\n\nIm asking for a decode of their SI settings.  I think we specificaly want to take a look at any settings which might cause a form of driver saturation.\n\nBut in general, they would like to understand what kind of \"variation\" can be expected in eye height for an identical layout and identical gearbox settings.  Not sure that's an easy question to answer.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 13-Nov-2014  1:22PM PST\n---------------------------------------------\nSome feedback from customer:\n------------------------------------------\nInitially, we saw failures for our SR4 traffic test (FCS packets on some ports)  at room temp, and identified 2 boards with 5 failing ports (these are highlighted in red in the table with the paddle card eye measurements) between them by running a 10 minute test on 7 of the 10 boards we produced in our P1A build (FYI, P1B is still on its way here from the CM). This was using the same SI settings as Apache, which has the same routing for the front panel, but different stack-up.\n\nApache apparently has not seen this type of failure\u2014and they have had a few builds tested at the CM in a similar way (maybe shorter traffic test, but some fallout would be expected\u2026)\n\nThen Liang went to work, and gave us some settings optimized for the loopbacks, and we continued to see failures at low temp. It appears that some of these are marginal enough that the small variation (observed w/ BCM SDK eyescan) from loopback to loopback will make a board fail/pass a 600 second test. \n\nSo far, using the settings at room temp looks good (1 build of 17 boards have gone through the CM, where we saw some failures with the old settings, and they passed when re-tested 3x with the new settings). I have been running our two identified \u201cbad boards\u201d (see first paragraph above)  with the new settings at room temp w/ voltage margining, and so far the results are encouraging.\n\nSo this issue presents us problems on a few fronts:\n\u2022  We\u2019d like to test with the loopbacks in MFG. The loopbacks are cheaper and let us test both 4x25 mode and 10x10 mode  with a single module (and insertion)\n\u2022  This variation may impact compliance\u2014I believe the worst ports we see are marginal for passing the compliance eye specs\n\u2022  Our product (Moonshot) is expected to be the same as the other RGP, GB, CFP design (Apache), but this issue seems to defy that expectation\n\n-------\n\nSo one of the key issues here is that the customer is trying to use passive loopbacks on these ports...and this forces some customized TX FIR settings just for the loopback modules.  Having some variation on the TX path appears to complicate matters for manufacturing test purposes.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 11-Nov-2014 12:42PM PST\n---------------------------------------------\nCustomer has also reduced drive/predrive and claims that reduction in drive/predrive from 15 directly decreases the eye height...the argument being that they dont think it is a saturation effect here.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 10-Nov-2014  6:10PM PST\n---------------------------------------------\nCustomer's specific TX FIR settings and drive strength settings:\n\nHere\u2019s what I read back for the 3 settings we\u2019ve been testing:\n\nSetting\tSetting Nickname\tTX FIR\t                                      Drive strength \n\t\t                   0x9944 0x9954 0x9964 0x9974\t0x9948 0x9958 0x9968\t0x9978\n0x0230\tlr4\t                   0x0230 0x0230 0x0230\t0x0230\t0x88ff   0x88ff   0x88ff   0x88ff\n0x1adf\tapache\t                   0x1adf  0x1adf  0x1adf  0x1adf        0x88ff   0x88ff    0x88ff\t0x88ff\n0x42df\tloopback setting\t0x42df  0x42df  0x42df  0x42df        0x88ff   0x88ff    0x88ff\t0x88ff\n\n----\nAm asking the customer to reduce the drive strength setting on the ports being tested to see if it has an impact on the stability of the output eye pattern.", "CreatedOn": "2017-04-06 05:28:31", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 13-Nov-2014  1:41PM PST\n---------------------------------------------\nHi Jamie,\n\n1. customer needs to optimize TX FIR setting for each revision of their board. it looks like they have done that here.\n\n2. optimized TX FIR is used to meet TX output compliance testing. when using loopback plug, you no longer needs to meet the output compliance. as long as the loopback plug loss is within channel loss limits, then it should work w/ loopback plug. have they tried this? sound like initial loopback testing was done using non-optimal setting.\n\nregards,\nDave", "CreatedOn": "2017-04-06 05:28:32", "CreatedBy": "admin"}]}, {"Number": "CS1799901", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Jun-2014  6:34PM PST\n---------------------------------------------\nHi peter,\nI only looked into FAE_markedup psuedo BRCM schematic.\nCouple of observations\n1. TRSTB pin needs to be pulled low for normal operation.\n2. Your observation on power grouping is correct. The current schematic is definitely not advised. Please look into bcm84793 for appropriate Power filtering and grouping option.\n\nWell.. Even I am unable to assign it back to you. Changing it to resolved. \n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:11:20", "CreatedBy": "admin"}]}, {"Number": "CS2442199", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 10/27/2015 11:30:00 AM PST\n---------------------------------------------\nHi Kent,\n\nAs you can see from Figure 25 in the datasheet showing the Line Side loopback functionality this behavior is expected.  If you want disable the traffic from going to your MAC then you will need to do something so the MAC doesn't receive traffic.  You could either disable the serdes outputs on the system side of the BCM84794 (register 0x806a) or you can disable your MAC from receiving traffic when in this mode.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:41:37", "CreatedBy": "admin"}, {"Notes": "Case automatically closed priority 2 cases after 3 Weeks in the Resolved state.", "CreatedOn": "2017-05-20 14:44:58", "CreatedBy": "system"}]}, {"Number": "CS2236740", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/5/2014 6:52:00 PM PST\n---------------------------------------------\nI think I've figured this out.  It appears that 8479X-TI100 has not been updated since its original release, which would have coincided with production microcode 000A.  Since then, there have been releases 000B, 000C, and 000D.  I don't have a good explanation for why the SDK lags, other than it is hard to keep up.  I do not see any of the microcode files in the Sandvine docSafe accounts that I checked, which is also odd.  Have you ever requested microcode before?  I would have expected you to be setup to receive this when you became an 84794 customer.  Either way, I have asked your Sales Rep to make the appropriate docSafe requests on your behalf.   000A is no longer on docSafe, so I have attached it here, but you should be using the latest, which is 000D.", "CreatedOn": "2017-04-09 17:43:53", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/6/2014 8:05:00 AM PST\n---------------------------------------------\nDocSafe request is in-process.  Added release notes for interim reading.", "CreatedOn": "2017-04-09 17:43:53", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/5/2014 8:01:00 AM PST\n---------------------------------------------\nPlease confirm the file from which you are obtaining the microcode.  Is it $SDK/src/soc/phy/phy84793_ucode.c ?", "CreatedOn": "2017-04-09 17:43:53", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 3/5/2014 8:33:00 AM PST\n---------------------------------------------\nYes. The one we are using is src/soc/phy/phy84793_ucode.c\n\n/*  Firmware used by BCM84793 device's micro-Controller. Version D009 */\n\nWe also verified 0xF417 reports d009 after microcode download.", "CreatedOn": "2017-04-09 17:43:53", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 3/5/2014 2:32:00 PM PST\n---------------------------------------------\nFacctory assistance requested to exlpain release discrepancy and to hunt down microcode file.", "CreatedOn": "2017-04-09 17:43:53", "CreatedBy": "admin"}]}, {"Number": "CS2445113", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 3/29/2016 11:00:00 AM PST\n---------------------------------------------\nHi Jamie, \n\n This is a NEW PROJECT to develop a new hardware to be used in front panel\nports with CFP2 form factor.\n\n In this hardware we have Furia retimer. Somehow we see some PRBS error on\nGearbox side (from Furia), and\n\n Also we are not able to plot the eye on Gearbox RX side (From Furia.)\n\n Liming and I need your help a lot...!\n\n Could you please come by sometime this afternoon or tomorrow? Thank you\nso much for your help in advance!!!!\n\nThanks,\nMike\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 3/23/16, 7:12 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 3/29/2016 1:49:00 PM PST\n---------------------------------------------\nSure...lets discuss at 4pm if that's ok.", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 4/8/2016 12:25:00 PM PST\n---------------------------------------------\nHi Yugesh, \n\n Would you have any idea? One of the problem we have is that as soon as\nour signal goes out to Furia line side SERDES, it becomes totally weird\npattern - the signal looks correct if we set line side PMD loopback.\n\n It looks as if the line side serdes shows different behavior that the\nrest of the Furia chip.\n\n What is the correct configuration for Furia in our application, to make\nit work as a repeater?\n\nThanks,\nMike\n \n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 4/7/16, 10:16 PM, \"BRCM Support - Minsoo Choi\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 4/12/2016 1:36:00 PM PST\n---------------------------------------------\nHey Mike,\n\nSo in fishing around with how the integrated SDK driver operates FEC, I see that when you call the API to set FEC on the Furia, the driver writes to 0x8a02 and 0x8a05 to set the CL91_ENABLED field of 0x8a05 (bit 3).  So this would seem to be one of the best indications of the configured operational mode.\n\nOn a port with FEC enabled for example I'll have:\nBCM.0> phy ce0 0x8a02 0x1\nPort ce0 (PHY addr 0x02) DevAd 1(DEV_PMA_PMD) Reg 0x8a02: 0x0008\nBCM.0> phy ce0 0x8a05 0x1\nPort ce0 (PHY addr 0x02) DevAd 1(DEV_PMA_PMD) Reg 0x8a05: 0x0009\n\nOn a port with FEC disabled I'll have:\nBCM.0> phy ce2 0x8a02 0x1\nPort ce2 (PHY addr 0x04) DevAd 1(DEV_PMA_PMD) Reg 0x8a02: 0x0008\nBCM.0> phy ce2 0x8a05 0x1\nPort ce2 (PHY addr 0x04) DevAd 1(DEV_PMA_PMD) Reg 0x8a05: 0x0001\n\nThere is of course secondary status when FEC is enabled.  I see for example for an FEC enabled port that is linked up with FEC on:\nBCM.0> phy ce0 0x9400 0x1\nPort ce0 (PHY addr 0x02) DevAd 1(DEV_PMA_PMD) Reg 0x9400: 0x001f\n\nWhere on an FEC disabled port I'll see this value be zero.  \n\nYou could also look at 0xc9...that register is in the data sheet:\n## FEC enabled and linked up\nBCM.0> phy ce0 0xc9 0x1\nPort ce0 (PHY addr 0x02) DevAd 1(DEV_PMA_PMD) Reg 0x00c9: 0xc001\n\n## Non FEC enabled\nBCM.0> phy ce2 0xc9 0x1 \nPort ce2 (PHY addr 0x04) DevAd 1(DEV_PMA_PMD) Reg 0x00c9: 0x0001", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 6/7/2016 1:35:00 PM PST\n---------------------------------------------\nHi Jamie, \n\n Thank you so much. Yes 4:30pm today works. I will send out webex\ninvitation to you in a separate email thread.\n\nThanks,\nMike\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 6/7/16, 11:28 AM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 6/8/2016 8:54:00 AM PST\n---------------------------------------------\nDuring debug we noted that TX FIR needed for optimal eye opening on Gearbox seemed to be quite high...perhaps on the order of 10dB or more.  The theory is that return loss may be high due to passive low profile connector rated for lower speeds.  Some suggestions we discussed included:\n\n- Try to increase the PF setting on the Gearbox and reduce the TX FIR (reduce post) on the Furia\n- Try to use Post 2 and Post 3 cursors on Furia TX for fine tuning\n- Try to shmoo PF settings on Gearbox for each setting of TX FIR on Furia.\n\n- I am following up with the product line on Vcm RX of line side of Gearbox as we could try removing the AC cap in the path from Furia to GB.", "CreatedOn": "2017-03-31 03:56:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 3/23/2016 4:39:00 PM PST\n---------------------------------------------\nHey Mike,\n\nWhat do you mean by none of them seem to work?\n\nThere is no fancy equalizer in this device...about all you have is a peaking filter which has a range of 0 to 15.  This receiver is meant for very short reach interface (VSR) so it does not have the equalization capability that say...Falcon core or Eagle core have on TH and TD2Plus product line or in the newer 28nm PHY's.", "CreatedOn": "2017-03-31 03:56:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 3/29/2016 12:56:00 PM PST\n---------------------------------------------\nHey Mike,\n\nWhat's the loss environment in between the Furia and the line side of the BCM84794? \n\nAnd you guys are using the Furia stand alone driver?\n\nAnd are you generating/terminating PRBS in between the system side of the Furia and the line side of the BCM84794...or are you trying to pass PRBS through the Furia to some other external generator/terminator like the CFP2 module?", "CreatedOn": "2017-03-31 03:56:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 4/8/2016 1:22:00 PM PST\n---------------------------------------------\nHi Mike,\n\nIn looking back at the hoops that Yogish worked through with Furia for one of your ASIC programs...I see he had to do the fllowing:\n---\nI spent all evening trying to root cause the issue at INSBU. They want to use BCM82381 in repeater (recovered clock) mode. They set the static variable\n\nFuria_static_conf_set.rptr_mode = 1 \n\nBut for some reason the rptr_mode is 0 by the time furia_init_seq.c is actually programming the device.  \n\n For now, I fixed the issue by forcing rptr_rtmr_mode to be 1 within _furia_core_rptr_rtmr_mode_set. \n.\n.\n.\nCouple of things \u2013\n1.       I am not sure why the rptr mode config variable does not stick the value of 1. \n\n2.       I am not sure why the chip comes in retimer mode by default. It should be made to come up in repeater mode on powerup\n\n3.       bcm_pm_repeater_mode_set and bcm_pm_repeater_mode_get API function calls are VOID in the code. I am not sure why the API documentation lists it\n\n \n\nnt furia_init(unsigned int phy_id, unsigned int ucode_download) {                                                                                                                                      \n\n    int  rc = 0;                                                                                                                                                                                        \n\n    int p_ctxt = 5;                                                                                                                                                                                     \n\n    furia_static_config_t furia_static_conf_get;                                                                                                                                                        \n\n    furia_static_config_t furia_static_conf_set;                                                                                                                                                        \n\n    furia_static_conf_set.rptr_mode = 1;                                                                                                                                                                \n\n    furia_static_conf_set.avdd_txdrv = 0;                                                                                                                                                               \n\n    furia_static_conf_set.ull_dp = 0;                                                                                                                                                                   \n\n    furia_static_conf_set.an_master_lane = 0;                                                                                                                                                           \n\n                                                                                                                                                                                                        \n\n    rc = bcm_pm_if_static_config_set(&p_ctxt, phy_id, (void* )&furia_static_conf_set);                                                                                                                  \n\n    if (ucode_download == 2) { //bcast download                                                                                                                                                         \n\n        printf(\"doing bcast init\\n\");                                                                                                                                                                   \n\n        rc = bcm_pm_if_init(&p_ctxt, phy_id, bcm82381_mdio_rd, mi_bc_mdio_wr, bcmpmFirmwareLoadMethodInternal);                                                                                         \n\n    } else if (ucode_download == 1) //regular non-bcast download                                                                                                                                        \n\n        rc = bcm_pm_if_init(&p_ctxt, phy_id, bcm82381_mdio_rd, bcm82381_mdio_wr, bcmpmFirmwareLoadMethodInternal);                                                                                      \n\n    else                                                                                                                                                                                                \n\n        rc = bcm_pm_if_init(&p_ctxt, phy_id, bcm82381_mdio_rd, bcm82381_mdio_wr, bcmpmFirmwareLoadMethodNone);                                                                                          \n\n    if (rc) {                                                                                                                                                                                           \n\n        printf(\"furia_init (phy_id = 0x%x) Failed rc=%x\\n\", phy_id, rc);                                                                                                                                \n\n    } else {                                                                                                                                                                                            \n\n        printf(\"furia_init (phy_id = 0x%x) Passed\\n\", phy_id);                                                                                                                                          \n\n    }                                                                                                                                                                                                   \n\n    rc = bcm_pm_if_static_config_get(&p_ctxt, phy_id, &furia_static_conf_get);                                                                                                                          \n\n    printf(\"rptr_mode:%x avdd tx drv voltage:%d\\n\",furia_static_conf_get.rptr_mode, furia_static_conf_get.avdd_txdrv);                                                                                  \n\n                                                                                                                                                                                                        \n\n    return rc;                                                                                                                                                                                          \n\n}                                                                                                                                                                                                       \n\n/", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 3/29/2016 2:30:00 PM PST\n---------------------------------------------\nJamie, \n\n I sent out a webex invitation. Please feel free to attend in person\n(Building 14, 2nd floor, Brighton conference room), dial in or log in\nthrough webex client.\n\n We may need to do some remote debugging with you, while sharing our\nscreen - so please also consider installing webex client. :) (you already\nhave done so I guess..)\n\nThanks,\nMike\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 3/29/16, 1:50 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Case was \"resolved\" over 2 weeks ago and Status is changed to \"Closed\". \r\nNote: Cases that are resolved will be closed after 2 weeks by System admin", "CreatedOn": "2017-05-18 20:26:34", "CreatedBy": "00922369"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 3/23/2016 5:15:00 PM PST\n---------------------------------------------\nHi Jamie, \n\n In our application, we have CFP-like module connected to Gearbox's line\nside. That is, Furia <===> Gearbox <===> Ranger+\n\n Eventhough the trace length between Furia <==> Gearbox is not too long,\nLiming and I are not able to run PRBS31 error free for 30 seconds with our\nbest SI setting.\n\n Liming found that VSC core has two auto-eq mode : one-step adaptiation\n(one time, one shot), or continuous adaptation.\n\n When I tried both by setting 1.F418.15 to 1 and 1.F418.7 to 1, they\ndoesn't make things better.\n\n What is worse is that when I set 1.F418.7 to \"1\", the value should be\nthere until I clear (since this is continuous - according to your spec).\nBut when I read back the value after writing 1 to the bit, it is *** 0 ***.\n\n So  I doubt whether 84794 support this feature. If so, 1.F418.7 should\nnot clear (or I may not be able to set bit there even.)\n\n This is what BRCM document says\n\n 2:phy ce0 0xF418 0x80\n\n But DEV ID is missing, and sdk's diag shell won't take the command. The\ncorrect command should be 2:phy ce0 0xF418 1 0x80 (or 0x8000)\n\n Even with this write, I am not able to set bit, nor just writing 1 to bit\n15 or 7 of this register doesn't make prbs result better (no change at\nall.)\n\n We need your advice here. :)\n\nThanks,\nMike\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 3/23/16, 4:40 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 3/29/2016 1:15:00 PM PST\n---------------------------------------------\nHi Jamie, \n\n To answer your question :\n\n\n 1) 4x25G lanes from Furia TX are connected to Gearbox's highspeed lanes.\nThe tracelength is not that long.\n\n\n 2) Yes we use standalone driver for furia. If I remember correctly, we\nare using microcode version 0xd.\n\n 3) PRBS is generated from SYS side of Furia, and checked/terminated @\nline side RX of Gearbox.\n\n\n It would be really great if you pay a visit to us or at least do some\nremote debugging session. I can open up a webex meeting/session if you\nprefer. \n\nThanks,\nMike\n\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 3/29/16, 12:58 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 4/8/2016 3:15:00 PM PST\n---------------------------------------------\nHi Jamie, \n\n Thank you so much! - at least that fixes one of our issue (link-up\nproblem.)\n\n With the repeater mode = 1, we see the link up, but we still see the\ngearbox side prbs failure on link 0 and 3... We will try tune the setting\na bit more.\n\n If possible, can you still pay a visit to us next Monday to help us\nfine-tune the Furia => GB side serdes setting better?\n\nThanks,\nMike\n\n\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 4/8/16, 1:24 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 6/7/2016 10:45:00 AM PST\n---------------------------------------------\nHi Jamie, \n\n Since our teleconference last time, our SI team has been working on\ntuning the link between Furai TX and Gearbox RX at 4@25G setup. (thanks\nfor your help!)\n\n All the other links looks fine now (Furia to QSFP, QSFP to Furia, Gearbox\nto Furia), but on this one link (Gearbox to Furia) we still see small\nnumber of prbs errors and packet corruptions.\n\n Somehow our SI team is having hard time making this link good enough,\nafter four week's of struggle...\n\n Can you please pay a visit to our site for helping us one more time?\nTeleconference should be fine. We are open anytime today and this Friday.\n\nThanks,\nMike\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 5/24/16, 5:00 PM, \"BRCM Support - Zed Mostoufi\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 4/1/2016 3:11:00 PM PST\n---------------------------------------------\nIn debug we had problems running eyescan when link was not up.  \n\nWe did make adjustments to Furia TX FIR towards the BCM84794 however and that cleaned up PRBS errors.\n\nWe then tried system side remote loopback at the Furia (BCM82381) and this brought the link up.  It also allowed us to run eyescan.  \n\nUse of MLD status at the switch was a useful diagnostic as well.  \n\nWe noted that the BCM82381 was also in repeater mode and not retimer mode (checked 0xd0a0 on Falcon to see if bit 0 was set).  So suggested we use the Epil package API to set repeater mode on the Furia.\n\nAlso recommended PRBS testing on line side with a golden reference partner to establish with confidence that polarity flips were set correctly.", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 3/23/2016 7:10:00 PM PST\n---------------------------------------------\nHey Mike,\n\nDid this problem just pop up now?  Im not clear on why this is an issue now after production for a while?\n\nThere's just not much you are going to be able to do with the receiver on this device.  The adaptation stuff is pretty minimal.  You should simply go and read the PF values in 0x948c, 0x958c, 0x968c, 0x978c to see what the PF value is after changing adaptation modes.  When Richard and I tried it...it seemed to change the PF adaptation for some problem links.  But that's all it's potentially changing is that PF adaptation point.  Since the loss of the trace from the module to the Gearbox hasnt changed...it's unlikely changing the PF adaptation is going to improve the situation.  Experimenting over the entire range of the PF by manually setting it is something you could try.  If that proves to be useful...then we could examine whether there is anything useful that could come out of the adaptation modes.", "CreatedOn": "2017-03-31 03:56:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 4/12/2016 11:35:00 AM PST\n---------------------------------------------\nHi Jamie, \n\n For Furia (BCM82380), we initialize it and use it as a repeater (repeater\nmode = 1), with SDK 1.7.4 (standalone)\n\n Does this module turns on FEC by default? Would there be any way to check\nif FEC is on?\n\nThanks,\nMike\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 4/8/16, 3:14 PM, \"Mike Choi (minchoi)\" <minchoi@cisco.com> wrote:\n\n>Hi Jamie, \n>\n> Thank you so much! - at least that fixes one of our issue (link-up\n>problem.)\n>\n> With the repeater mode = 1, we see the link up, but we still see the\n>gearbox side prbs failure on link 0 and 3... We will try tune the setting\n>a bit more.\n>\n> If possible, can you still pay a visit to us next Monday to help us\n>fine-tune the Furia => GB side serdes setting better?\n>\n>Thanks,\n>Mike\n>\n>\n>\n>\n>.:|:. .:|:.  | Mike Choi\n>   CISCO     | Insieme Engineering\n>\n>\n>\n>\n>\n>\n>On 4/8/16, 1:24 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\n>wrote:\n>\n>>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 4/12/2017 4:18:00 PM PST\n---------------------------------------------\nMark resolved.", "CreatedOn": "2017-04-16 09:39:38", "CreatedBy": "admin"}, {"Notes": "Updated by: Jamie Rakow[Broadcom Corporation]\nUpdate date: 6/7/2016 11:26:00 AM PST\n---------------------------------------------\nHi Mike,\n\nSure...I can take a look.  How about sometime after 4pm today...perhaps 4:30 webex?", "CreatedOn": "2017-03-31 03:56:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Minsoo Choi[Cisco Systems Inc]\nUpdate date: 4/7/2016 10:15:00 PM PST\n---------------------------------------------\nHi Jamie, \n\n We are still debugging the furia issue we have in our application\u0160\n\n To refresh your memory, this is how our application looks like (CFP2 to\nQSFP): \n\nRANGER+ <==> Gearbox(4x25) <==> Furia <==> QSFP_LOOPBACK(copper)\n\n We verified PN swap is correct, and we give repeater_mode=1 when we call\nbcm_pm_if_static_config_set (not sure the driver really honors this value\nand set the furia in repeater mode though)\n\n We still see the issues like the following :\n\n1) Lane 0 and Lane 3 still shows prbs error\n2) We see Ranter+ 100G port link up if we set Furia lineside pmd loopback.\nBut if we unset the loopback and use QSFP-COPPER loopback, the link is\ndown. (Same for PRBS)\n3) When we run PRBS9 on Gearbox Line side (511 bit long), on Furia sys\nside we see a fixed pattern with 2650 bits long. Some setting/config seems\nto be incorrect. \n\n Our SI engineerS and I still need your help more... Can you please pay\nanother visit to our site? (If possible this afternoon... If not, next\nMonday afternoon is ok with us)\n\nThanks,\nMike\n\n\n\n\n.:|:. .:|:.  | Mike Choi\n   CISCO     | Insieme Engineering\n\n\n\n\n\n\nOn 4/1/16, 3:12 PM, \"BRCM Support - Jamie Rakow\" <support@broadcom.com>\nwrote:\n\n>", "CreatedOn": "2017-03-31 03:56:11", "CreatedBy": "admin"}]}, {"Number": "CS1747449", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 24-Oct-2014  4:06PM PST\n---------------------------------------------\nHey Jamie,\nThere exists a sequence, ill send it to you...", "CreatedOn": "2017-04-06 05:17:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Feb-2015  4:43PM PST\n---------------------------------------------\nHi jamie,\nThe procedure is there in the attached VBS script.\n\nthis one got missed completely. If it still a high priority and you have questions , let me know.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:17:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Feb-2015  4:43PM PST\n---------------------------------------------\nchanging it to resolved.", "CreatedOn": "2017-04-06 05:17:55", "CreatedBy": "admin"}]}, {"Number": "CS1956562", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 02-Jan-2014  7:04PM PST\n---------------------------------------------\nHi Vincent,\n\nDo you have any suggestion?\n\nBRs\nKaiming", "CreatedOn": "2017-04-06 01:29:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 03-Jan-2014  9:34AM PST\n---------------------------------------------\nHello kaiming,\nI have reviewed your schematic (only pg57 and 58) and you have done an excellent job. There are no glaring mistakes.\nWe usually rely upon DS and HWUM for all our schematic review purposes.\n Below are responses to your questions\n\n1) Customer will use CFP2 fiber module for the line side.\n     The configure should be \"Mode 1\" shows in datasheet.\n     How about the line side physical connection should use MRX25G and MTX25G?\n\nNishant: That is correct.\n\n2) If Q1 is yes, MRX/TX_[4:9] let it NC or connect to GND?\n\nNishant: NC is fine, if you are going to use other modes, for example SR10 then \n* MRX10G_4:9 also requires external AC coupling\n* MTX10G_4:9 also requires external AC coupling\n\n3) Output clock TX/RX_MCLKN/P not use can let it floating?\n\nNishant: That is fine, pins can be left floating if not used\n4) When operated in 100G CFP2 mode, which clock source we should feed to 84794?\n     156.25MHz, 161.13MHz, 312.50MHz or 322.26MHz?\n\nNishant: \"CFP2 mode\" is an ambiguous term, CFP2 as the name says '2' can be used for two modes MODE1 and MODE3 , i.e. LR4 and SR10\nthe clock values mentioned above are correct.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 01:29:25", "CreatedBy": "admin"}]}, {"Number": "CS2008704", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Dec-2014 10:49AM PST\n---------------------------------------------\nHi Dave,\nAre you able to achieve EQ settings without step 3. \nI am seeing the exact same behavior at my end. I do believe you can ignore step3 for Line side lanes.\nIn our earlier procedures we did not even add 8250.6 step so I would have to double check with design and get back to you.\n\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:41:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-Jan-2015 10:20AM PST\n---------------------------------------------\nHave you updated the documentation to reflect our findings?\n\nDavid", "CreatedOn": "2017-04-06 05:41:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 20-Jan-2015 12:18PM PST\n---------------------------------------------\nNishant,\n\nDid you ever find out from engineering about the use of the 8250.6 as the last step in tuning, that it was not required?\n\nthe customer is looking for followup\n\nDavid", "CreatedOn": "2017-04-06 05:41:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 20-Jan-2015  1:33PM PST\n---------------------------------------------\nif it is not affecting, you can remove it.\nI am not seeing any critical behavior of 8250.6.", "CreatedOn": "2017-04-06 05:41:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 12-Dec-2014  5:19AM PST\n---------------------------------------------\nNischant,\n\nI have raised the priority level to high as the customer is asking when we might be able to help.  Since the data sheet has contradictory informnation or missing information I have no way to go.  And the central part of the question is is we even allow this on the 10G interfaces and only the 25G.\n\nThanbks\n\nDavid", "CreatedOn": "2017-04-06 05:41:55", "CreatedBy": "admin"}]}, {"Number": "CS1642467", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 21-Jul-2016  2:44PM PST\n---------------------------------------------\nHi Peter,\nnever got any further feedback here. Is this still on going? Shall resolve for now. Let me know if you need it re-opened.\nThanks,\nKK", "CreatedOn": "2017-04-06 11:30:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 21-Jul-2016  2:54PM PST\n---------------------------------------------\nSorry.  I neglected to resolve this once the customer case was resolved.  Marking it closed now.", "CreatedOn": "2017-04-06 11:30:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 16-Jun-2016  1:45PM PST\n---------------------------------------------\nHi Peter,\ngenerally we do NOT allow customers to modify the RX PI on a manual basis. In the VSR case, this was given during the part's infancy when the Silcer Phase was manually controlled and no Eye-Scan available. Subsequent microcodes have automated this parameter. \n\nThe whole point of the Eye-Scan was to illustrate what the internal circuits were doing. Thus, what is tracked on the Eye-Scan is functionally tracked on the Data Slicer itself. Thus, if the see a blatantly open eye on the Eye-Scan, it's unlikely that the Slicer is having issues w/ the data itself. \n\nI would therefore suggest other tests for the customer to use to discern what is wrong:\n1. Does point to point PRBS work?\n2. Does Loopback (both internal and remote) work?\n3. What's the port exposure to this issue?\n\nThanks,\nKK", "CreatedOn": "2017-04-06 11:30:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 17-Jun-2016  8:24AM PST\n---------------------------------------------\nSome additional customer feedback in the related case, where I've added you to internal cc.  Thanks.", "CreatedOn": "2017-04-06 11:30:57", "CreatedBy": "admin"}]}, {"Number": "CS1747463", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 20-Mar-2014  2:49PM PST\n---------------------------------------------\nHi Aneesh,\nThere you go..\nLet me know if you have any questions.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:12:03", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 21-Mar-2014  1:17PM PST\n---------------------------------------------\nI am removing these IBIS models from CSP since they are now available on Docsafe. I am doing same with CSP #736251\n\nThanks,\nNishant", "CreatedOn": "2017-04-06 03:12:03", "CreatedBy": "admin"}, {"Notes": "Updated by: Yunong Gan[Broadcom Corporation]\nUpdate date: 03-Mar-2014 10:41PM PST\n---------------------------------------------\nHi Aneesh,\n\nThis is for regular IBIS model but I am only familiar with the high speed IBIS-AMI models. I am ressigning this case to Dave.\n\nThanks,\nYunong", "CreatedOn": "2017-04-06 03:12:03", "CreatedBy": "admin"}, {"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 20-Mar-2014 11:32AM PST\n---------------------------------------------\nHi,\nCould you please help on the complete IBIS model for BCM84794. BCM84794 is the device customer will be using for Production.\nThanks\nAneesh", "CreatedOn": "2017-04-06 03:12:03", "CreatedBy": "admin"}]}, {"Number": "CS1704520", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 17-Sep-2014  1:35AM PST\n---------------------------------------------\nHi KK,\n\nThanks for your help.\nThe command set and setting as below:\n\nBCM56640|CAUI|<------>|CAUI|BCM84792|CAUI|<----->|CXP|\n\nBCM.1> linkscan off\nBCM.1> phy ce 0xf604 1 0x3ff0\nBCM.1> phy ce 0xf606 1 0x0492\n\nThe result is fail as attached eye diagram from TEK scope.\nAre there anything we miss?\n\nBRs\nKaiming", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 23-Feb-2015  5:06PM PST\n---------------------------------------------\nResolving due to lack of new comments. Re-open if need be.", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 17-Sep-2014 10:13AM PST\n---------------------------------------------\nHi Kaiming,\nUnfortunately, all this shows me is that the customer isn't setting up his scope correctly. If he/she cannot setup the trigger or Scope CDR correctly to get a proper waveform, I'm not sure how we can help him/her? \n\nA few tips:\n1. Disable Duo Binary via 1.F406.3:0. This encoder is completely unnecessary for PRBS.\n2. Loopback the path via the cable/connector. See if you get CDR lock on 1.9800 and no Loss of Signal via 1.980A. \n3. Same thing for Hexacore (lanes 4-9). Turn on PRBS and check 1.80B0 for CDR lock.\n\nIf CDR lock is solid and present, then it's a scope issue.\nThanks,\nKK", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 25-Sep-2014  8:32PM PST\n---------------------------------------------\nHi KK,\n\nThere 2 high speed scope in customer test LAB as attached picture.\nDo you have any suggestion that we should use for testing?\n\nBRs\nKai-Ming", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 10-Sep-2014  4:38PM PST\n---------------------------------------------\nPlease download the latest 84794 datasheet and reference the following for VSR lanes 0-3:\n1.F604? PRBS TX enable\n1.F606? PRBS TX pattern control\n1.F506? PRBS RX enable\n1.F507? PRBS RX pattern control\n\nPlease reference the following for NON-VSR line side lanes 4-9:\n1.8069? PRBS TX enable\n1.80B6? PRBS RX enable\n1.80B0? PRBS status in accordance w/ 1.80B1\n\nRemember, NON-VSR lane registers must be addressed indirectly.\nThanks,\nKK", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 26-Sep-2014  9:59AM PST\n---------------------------------------------\nCan't really tell if the connection is correct. Please answer the previous set of questions, can't be much assistance w/out them.\n\nAlso, are they using and external trigger or does the scope have an internal CDR?\nThanks,\nKK", "CreatedOn": "2017-04-06 04:54:43", "CreatedBy": "admin"}]}, {"Number": "CS1948613", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 21-Jul-2014 10:08AM PST\n---------------------------------------------\nHi Kaiming,\nthe definition on page 36 is a \"generic\" definition based upon the VSR core itself. As you know, this core goes into many other devices which may or may not share the same register map as the 84794. Thus, we felt it best to explain the taps based upon individual bits rather than in a particular \"register\" based format.\n\nYou can see that the \"number\" of bits for each category is consistent - 4 bits for Pre, 6 bits for Main, and 5 bits for Post. Simply think of bit 11 on pre-tap as bit 0 on the definition for page 36.\n\nThanks,\nKK", "CreatedOn": "2017-04-06 04:28:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 21-Jul-2014 10:58PM PST\n---------------------------------------------\nHi KK,\n\nThanks for you information.\nAfter modify pre-emphasis the VSR28 SI measurement in MSI all pass.\nShould I upload report to make a note?\n\nBRs\nKaiming", "CreatedOn": "2017-04-06 04:28:23", "CreatedBy": "admin"}]}, {"Number": "CS2008716", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 14-May-2015  2:24PM PST\n---------------------------------------------\nNishant,\n\nSandvine says that this is an issue that has to be resolved.  They have verified with a scope that they have no signal and there is no link.  I asked them to try the latest test firmware for this just in case.  Here is what I got back\n\nGearbox reports no CDR lock. \n\nWe have tried 0xE011 provided by the other CSP case. This problem still occurs. Well, it does make sense, because on this happens on the ingress path. The fix in 0xE011 is to disable egress path reset.\n\n\nFor 4x10 mode, gearbox is configured in 10x10 async mode, and we system side lane 4-7, NPPI lanes 0-3. \nIt has happened on all 4 lanes across different boards.  On the same board, it's always the same lanes sending garbage out of system side.  Usually only 1~2 lanes per gearbox having this issue.\n\nIt's constantly generate garbage, but  rate is not very high, like one some ports one or two fragment of 12 bytes received by NPU in a few seconds,  on some other ports a few fragments received by NPU in a minute;\n\n==========================================================================\n\nThis is what I was calling you about.  To see where we might go.  How can anything be coming out but idles on the system side with no link on the line side.\n\nDavid", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Jul-2015  2:10PM PST\n---------------------------------------------\nDavid,\nChanging this case to resolved. I have not heard back from customers after our conference call.\nIf available , pease update the case with your latest findings.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 29-May-2015  6:11PM PST\n---------------------------------------------\nNischant,\n\nyes this is very much alive.  You never addressed the questions that came back plus mine on the microcode.\n\nDavid", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 03-Jun-2015  3:26PM PST\n---------------------------------------------\nHi David,\nI suspect there is noise getting amplified and sent out of the chip, the moment qsfp module is removed.\n\nThere is one more test you can perform with current firmware, beyond that I would recommend sandvine to identify the noise source or just remove fiber to perform their tests and not entire module.\n\nProgram  0XF427.4  to 1  this would enable PRBS31 out of CAUI side when line side CDR loses lock.\nFor this to work, you would have to begin with In lock scenario, perform F427,4 to 1 and then remove fiber+module. You should then see prbs31 sent out and that might help us not see garbage bits.\n\nLet me know , what they think about this. Also how many bits do you see as garbage, does it affect any of the process of regaining link or creates any problematic scenario once the fiber is put back in, does the link on the switch stay up when garbage bits are sent in?\n\nthanks\nNishant", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 14-May-2015  5:25PM PST\n---------------------------------------------\nHi David,\nthis really sounds like a mysterious issue. Cant think of a viable setup to even reproduce this problem.\n\nWeird part is, The issue is not seen when they have the chip in 4x25 to 10x10 mode, but only in 40G  4x10 to 4x10 mode .\n\nFew suggestion.\n1. Can they check the CDR latch status on each lane , may be when they think CDR is not in lock by checking live link statuses,there might be a brief moment when CDR achieves lock with NOISE being amplified by CTLE and getting through.\n\nFor Line side latch Status register\nRead 0xF483   // found and lost Pll lock,sigdet and CDR, read regmap for details.\nIf you want to clear the latch statuses, simply write into register F483 with the value to read back from the register and expect 0 if everything is locked and not flickering.\n\n\nFor System side latch Status register\nRead 0xF480   // found and lost Pll lock, sigdet and CDR, read regmap for details.\nIf you want to clear the latch statuses, simply write into register F480 with the value to read back from the register and expect 0 if everything is locked and not flickering.\n\n\n2. Do they remove the Fiber or the entire module to see this issue, I would say to completely disconnect the module\n\n3. since they use 8 channels for two 40G ports, did they try to shut off the unused channel and see that makes any difference.\n\n\n4. if nothing works, then can we have them power down BCM84794 line side Rx if module is not present.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 19-May-2015 10:40AM PST\n---------------------------------------------\nNischant,\n\nIn response to the questions you posed we got this back:\n\n1. How to use these interrupts? After initialization, i found value of 0xf483 is 0x00ff. I set 0x00ff to it, and 0xf483 gets cleared to 0. But afterwards, no matter what i do to the link (plugin module, pull fiber), the value of 0xf483 stays 0. I must be missing some step.\n\n2. Pulling the fiber with QSFP on DOES NOT reproduce the issue. We have to unplug the QSFP to see it.\n\n3. We use 4 lanes on each gearbox. For VSR 0-3, CPPI 4-5, we shut off line side RX power. Is there anything else we should shut off?\n\n4. Yes, we have originally tried shutting down line side RX power, and it DOES prevent the issue. However, we don't think this is a feasible solution: by the time we detect the module is removed and tries to shut down rx power, there might be \"garbage\" bytes already generated on the other end. \n\n-------------------------------------------------------------------------------------------------------------------------------------------\n\nSince this is also microcode dependant, do you think we have another tweak we need to look at?  Or do you think we might have too much noise on the filtered supplies?\n\nDavid", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-May-2015  4:37AM PST\n---------------------------------------------\nMarking resolved as Nischant and I talked.  The PHY is a virtual wire and cannot create any data.  This is a customer system issue\n\nDavid", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-May-2015  3:00PM PST\n---------------------------------------------\nHi David,\nis this still a concern, or are they ok of removing the fiber and not module to perform their tests.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 07:21:52", "CreatedBy": "admin"}]}, {"Number": "CS2282560", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Apr-2014  1:01PM PST\n---------------------------------------------\nPlease augment the description with the registers and status bits associated with each check.  An annotated register-by-register sequence is best here, similar to other cases.  Make sure to note the differences in the working and non-working cases.\n\nSDK enables both directions assuming a bidirectional PRBS.  Does your system have this capability, and if so, how does it work when using the SDK method?\n\nSince a delay is involved in your solution, do you believe this is a similar situation as in case 771432.  One thing I want to check is whether you use CDR lock while in PRBS mode, but I need to see your programming in order to correctly determine the environment.  If your code is mimicing any SDK API's, please note that as well in the log.\n\nPlease fill-in the Customer Project field.", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 17-Apr-2014  5:00AM PST\n---------------------------------------------\nThe original question is about delay, but I'm curious if you are able to isolate any further between enabling the additional generator and/or checker, as to which matters.  For example, if you only enable the generator or the checker on the system side, does that matter?  Could it also be that just running the additional code has the effect of adding the delay you originally observed?  Given the discussions about checking delays in code paths, theories about microcode, etc., perhaps this is still related to your other discoveries about software timing having an effect on results.", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 15-Apr-2014  1:41PM PST\n---------------------------------------------\nWill attach our sequence shortly.\n\nWe do have the capability to enable PRBS on both direction, but it doesn't meet our requirement. We should be able to do PRBS one side per time.\n\nThis has no relation to case 771432. This happens on the VSR lanes in 4x25 mode. No indirect register read/write is performed during this.", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Apr-2014  1:44PM PST\n---------------------------------------------\nWhile bidirectional PRBS does not meet your requirement, does it work correctly when used in lieu of uni-directional PRBS, or do failures also occur?  We are trying to collect pertinent data points regarding the problem.", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 16-Apr-2014 11:13AM PST\n---------------------------------------------\nSome Pseudo Code listed below. Listed the sequence of test we have performed with failure rate. The Test4 mimic the SDK which does system side then line side. There is no failure.\n\nFailure:\n  Lane 2 loses CDR lock and PRBS lock\n\nSetPattern:\n  if (lineSide)\n  {\n     Write 0xF606 with 0x492\n     Write 0xF507 with 0x492\n  }\n  if (SystemSide)\n  {\n     WritePCBBits(lane, 0x8069, [3:2] = 0 [8:8] = 1)\n     WritePCBBits(lane, 0x80B6, [3:2] = 0 [8:8] = 1)\n  }\n\nEnableGenerator\n  if (lineSide)\n  {\n     Write 0xF604[4+lane:4+lane] 1\n  }\n  if (systemSide)\n  {\n     WritePCBBits(lane, 0x8069, [5:5] = 1 [6:6] = 1)\n  }\n\nEnableChecker\n  if (lineSide)\n  {\n     Write 0xF506[lane:lane] 1\n  }\n  if (systemSide)\n  {\n     WritePCBBits(lane, 0x80B6, [5:5] = 1 [6:6] = 1)\n  }\n\n\nTest 1: 18 FAILS in 500 RUNS\nfor lane in 0 1 2 3\n  SetPattern(lane, LineSide, PRBS9)\n\nfor lane in 0 1 2 3\n  EnableGenerator(lane, LineSide)\n\nfor lane in 0 1 2 3\n  EnableChecker(lane, LineSide)\n\nTest 2: 6 FAILS in 500 RUNS\nfor lane in all_lanes\n  SetPattern(lane, LineSide, PRBS9)\n  EnableGenerator(lane, LineSide)\n  EnableChecker(lane, LineSide)\n\n\nTest 3: 0 FAILS in 500 RUNS\nfor lane in 0 1 2 3\n  SetPattern(lane, LineSide, PRBS9)\n  EnableGenerator(lane, LineSide)\n  EnableChecker(lane, LineSide)\n  Delay(10ms)\n\n\nTest 4: 0 FAILS in 500 RUNS\nfor lane in 0 1 2 3\n  SetPattern(lane, SystemSide, PRBS9)\n  SetPattern(lane, LineSide, PRBS9)\n  EnableGenerator(lane, SystemSide)\n  EnableGenerator(lane, LineSide)\n  EnableChecker(lane, SystemSide)\n  EnableChecker(lane, LineSide)", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 11-Dec-2014  7:06AM PST\n---------------------------------------------\nWe never really reached a conclusion on this question, and I'm not sure we will.  I'm going to make this resolved for bookkeeping purposes.  You can re-open it if necessary.", "CreatedOn": "2017-04-09 18:27:25", "CreatedBy": "admin"}]}, {"Number": "CS2123134", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 16-Jun-2015 10:21AM PST\n---------------------------------------------\nI'm looking into this.\n\nThanks,\nSteve", "CreatedOn": "2017-04-08 17:55:06", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 19-Jun-2015 10:14AM PST\n---------------------------------------------\nTo do this please set register bit 0 to '1' in the IEEE_PMD_TRANSMIT_DISABLE register.  Also the API bcm_port_enable_set() API should set this bit as well when disabling the port.\n\nThanks,\nSteve", "CreatedOn": "2017-04-08 17:55:06", "CreatedBy": "admin"}]}, {"Number": "CS2280567", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 29-Jul-2015  1:35PM PST\n---------------------------------------------\nAlexey,\n\nActually both parts have the same voltage spec on the CML input pins of -0.3 to +1.3 max.  The 82793 System side input is AC coupled internally so you don't need CAPs externally unless your NPU common mode voltage + max positive swing exceeds 1.3 volts.  If not then you are OK.  I believe that the statement about not needing caps on the 84794 was if you were connecting it to a Broadcom switch.  We guarantee our outputs to be compliant to the inputs on our PHYs.\n\nDavid", "CreatedOn": "2017-04-10 01:12:40", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 03-Aug-2015  8:31AM PST\n---------------------------------------------\nMarking as resolved\n\nDavid", "CreatedOn": "2017-04-10 01:12:40", "CreatedBy": "admin"}]}, {"Number": "CS2297458", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 8/28/2014 9:50:00 AM PST\n---------------------------------------------\nHi Xinrong,\nPls refer to the attached.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 06:02:05", "CreatedBy": "admin"}, {"Notes": "Updated by: Xinrong Lu[Coriant GmbH]\nUpdate date: 9/1/2014 1:39:00 AM PST\n---------------------------------------------\nHello,\nplease also share with us the release notes or change description of this new version firmware.\nthanks.", "CreatedOn": "2017-04-10 06:02:05", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 9/3/2014 11:12:00 AM PST\n---------------------------------------------\nSorry Xinrong.\nWe have NO release note or D00F yet.\nI will ask my fellows and get you back.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 06:02:05", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 9/29/2014 11:52:00 PM PST\n---------------------------------------------\nSet to resolved.", "CreatedOn": "2017-04-10 06:02:05", "CreatedBy": "admin"}]}, {"Number": "CS2295459", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 6/25/2014 8:22:00 AM PST\n---------------------------------------------\nXinrong,\nPls make sure the firmware is downloaded properly by reading checksum. Regarding how to read checksum. Pls follow the steps in another CSP case you created.\n1. If using 161.13MHZ clock. Set 1.f403.3:0=4'b1000. 1.f404.3:0=4'b0011, After setting the register, Toggle 1.f439.2\n2. Yes, CDR loss of lock.\n3. Pls check u-code by checksum.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:36:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 7/2/2014 12:28:00 AM PST\n---------------------------------------------\nPN swap resolved this issue.\nSet to resolved. You can re-open this case if have any questionss.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:36:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Xinrong Lu[Coriant GmbH]\nUpdate date: 6/25/2014 10:26:00 PM PST\n---------------------------------------------\n1) has set the refclk_code as 0x03 for mode 1.\n2) what's the reason that cause cdr unlock? \n3) u code is download successfully, the check sum read out = 0x600d.\n\ncan you attach or specify a standard initalization scripts for 100GE application?   10x10G --> 4x25G?\n\nThanks.", "CreatedOn": "2017-04-10 05:36:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Xinrong Lu[Coriant GmbH]\nUpdate date: 6/26/2014 8:15:00 AM PST\n---------------------------------------------\nHi Laurel,\nJust found that reg 0xf412, bit 2 is not set '1', by change it to '1',\nthe rx CDR looks locked,   0x9800 = 0xff,   does it means CDR locked?    \n\nbut traffic still block,please advise us the scripts for chip initialization.\nThank you!", "CreatedOn": "2017-04-10 05:36:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 6/30/2014 7:09:00 PM PST\n---------------------------------------------\nXinrong,\nAs we discussed yesterday, Pls use our switch SDK. it include the PHY driver of 84793.\nIf you have any questions or update, Pls let me know.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 05:36:54", "CreatedBy": "admin"}]}, {"Number": "CS2263967", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 9/24/2013 10:08:00 AM PST\n---------------------------------------------\nMichael\n\nPlease let me know if I have misinterpreted anything.\n\nFor clarification of the race condition.\n1) How do you know the register 0xf454 is written multiple times?\ni.e.\nAre you writing the register and then reading it back multiple\ntime to find it corrupted/changed, or are you getting \ntransfer timeouts or ...?\n\n2) When you mention the BCM84794 using the register I assume\nthis is the internal 8051 Micro-Controller.\nIf so how do you know it is the 8051 Micro that is doing the accesses?\n\nReason for Question\nMy first thought is that The MDIO access and\nthe Micro access into the Arbiter would each have their own\nset of the 5 PCB registers so there would be no visibility\ninto the Micro's activity.from the MDIO side.\n\nOr possibly you are referring to the BCM84794 portion\nof the SDK?\n\n\nI can see that the mode and clock frequency change\nwould cause the PLLs to require some control and status\nchecking. \nThe first question would then be what is register\n0x8050 as it is not documented.\n\nthanks\nsteve", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 12/11/2014 7:01:00 AM PST\n---------------------------------------------\nResolving this case as it was shifted to #771432.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 4/1/2014 10:53:00 AM PST\n---------------------------------------------\nIn SDK 6.3.5, the mode is changed before applying the _phy_84793_div_change.\n\nIn _phy_84793_div_change, some of the steps are doing pcb_wr_bits operations.\n\nIf microcontoller is writing \"8050\" to 0xf454 after change the mode, we are afraid it will run into race conditions.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/23/2014 8:55:00 AM PST\n---------------------------------------------\nHello Michael.  This case was left as Work-in-Progress, but it should have been changed to Pending on Additional Input, which I've done.  Steve last request some additional information and that's the end of the trail.  Let me try to rephrase the request.\n\n(Numbered to make it easy for you to add your own notes)\n1. Factory-supplied answer was that the register you observe being accesses is not expected.  This, I assume is what you identify as being \"busy\".\n2. There was a set of register writes provided for chaning modes.  I assume this is what you use, but you are looking for something you can read to indicate \"really done\".  Is this correct?\n3. Do you believe that the mode change might not actually be completed?  Having read some other cases I get the feeling there is a lot of speculation as to whether the modes are being programmed correctly.\n4. Do you believe that the \"busy\" register is somehow getting in the way of what you are trying to program?  What indications do you have that something isn't right?\n5. Since you are not using the SDK, we must rely on your programming steps in order to attempt any recreation.  Please document (as a separate attachment) your step-by-step programming steps, highlighting where you observe the \"busy\" condition.  We may be able to have the factory folks run these on a test board.  We do not have this hardware in the field.\n\nPlease fill-in the Customer Project information when you next update the case.  Thank you.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 10/28/2013 11:13:00 AM PST\n---------------------------------------------\nMichael\n\nIs this still an outstanding issue?\n\nthanks\nsteve", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 2/24/2014 5:57:00 PM PST\n---------------------------------------------\nNo new information provided since last requests.  Resolving.  Re-open with new information if necessary.  Thank you.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 10/31/2013 10:19:00 AM PST\n---------------------------------------------\n1)\nWe are constantly reading 0xF454 after the clock/mode change. We are not writing it.\n\n2)\nThe micro-controller. We are not using the sdk on the gearbox. We only do direct register read/write through mdio.\n\n3)\n0x8050. We have no knowledge what it is at all. That's why when we see it appears at 0xF454, we think it is the internal controler using the pcb bus.\n\nI think it is totally ok if the mode/clock change need perform any checking. We would like to know when it is done, so we can do our other initialization afterwards.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 4/1/2014 10:40:00 AM PST\n---------------------------------------------\nReproduce sequence\n1. Reset gearbox\n2. Download microcode \n3. Change to mode 3\n  a) Set force to 1. F403.[3] to 1\n  b) Set mode to Mode 3.  F403[0-2] to 2\n\nConstantly poll registers used for indirect write/read:\nCTL(0xf452): 0x0000, MSW(0xf453): 0x0000, LSW(0xf454): 0x8050, WR(0xf455): 0xff00, RD(0xf456) 0x0000\n\nWe found 0x8050 being written to 0xf454", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 12/23/2013 11:10:00 AM PST\n---------------------------------------------\nMichael\n\nThe answers from the factory are:\n\n1. Is the 0xf454 register usage  normal and expected?\n\nAE:: No this does not appear to be normal, 0xf454 has nothing to do with mode change. What init sequence or script or sdk version do you use to modify/change speed mode. \n\n2. If so, is there any documentation describe this behavior?\n\nAE:: The only relevant register to change mode would be\n 0xF403 and 0xF404 . \nWonder how are you reporting activity on  0xf454 \n\n3. How do we handle this situation?\nIs there any register we can read that indicate the change mode/clock\nis done and registers are free to use? Or what is the appropriate\ndelay we should use?\n\nAE: You can perform basic sequence to set MODE4 10x10 and 161clk. \nGive it a try and see if it works for you\n\nW 1.F403          0x000B   \nW.1.F404          0x0005\n\nW 1.F439          0x001D\nW 1.F439          0x0019\nW 1.F439          0x001D\nW 1.F439          0x0015\n\nI mentioned you see 0xf454 overwritten as you try\nto use it so I am not sure what his question means.\nI will ask for clarification after you do testing, or reply.\n\n Does the recipe match up with what you are currently doing?\n\nsteve", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 4/8/2014 11:12:00 AM PST\n---------------------------------------------\nNoting that this case is related to 771432 and that we are trying to solve them together.  Please refer to 771432 for additional requested information.", "CreatedOn": "2017-04-09 15:54:22", "CreatedBy": "admin"}]}, {"Number": "CS1642174", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 27-Mar-2015  5:32AM PST\n---------------------------------------------\nSandvine has regressed our firmware only and REV B does not have the issue and RF are received at the remote host correctly.  But this REV B has an issue that is critical to them and they cannot just use it.  REV F is what they were using that they saw the issue.  They went back to REV D and it also cannot send RF correctly.  \n\nTherefore the hypothesis is that a change in either REV C or D is what introduced this issue.  They are demanding a microcode upgrade immediately to get this fixed.\n\n1) Can we do that?\n2) If so what would be our timeframe?\n\nThanks\n\nDavid", "CreatedOn": "2017-04-06 06:55:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 27-May-2015 10:18AM PST\n---------------------------------------------\nHi David,\nI have released the new ucode on Dosafe v 0011.\n\nWith this new firmware, the egress path will not be affected if there is loss of lock on the Line side recieve. Firmware enable bit F427.2 needs to be set to 1 for this feature to work.\n\nSandvine has also tested it at their end and can now propagate remote faults and also not see any occasional link down issue after pulling/pushing the module.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 07-Apr-2015  3:32PM PST\n---------------------------------------------\nHi David,\nYou can set F427.1 to 1 and carry on with your remote fault and regression testing. For line card applications we have not seen any dependencies on this feature.\n\nThis was a critical feature request for module applications. \n\nSandvine reported \"If we restore the disconnect between the remote device and the CFP4, the link recovers successfully\" this is perfect. Go ahead and set F427.1 and you should be fine.\n\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 16-Apr-2015  7:30AM PST\n---------------------------------------------\nNischant,\n\nI asked about what the default values of these register bits were after reset.  Are they 0?\n\nDavid", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-Apr-2015  6:17AM PST\n---------------------------------------------\nI am still waiting for a time to when we would have an update on the firmware.  they have verified now that rev B doesn't have the issue and REV C does.  So it was something has changed in REV C that causes it to fail to get a valid RF.\n\nWhat date do we think we would have a new firmware?\n\nDavid", "CreatedOn": "2017-04-06 06:55:54", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 08-Apr-2015  2:25PM PST\n---------------------------------------------\nNishant,\n\nAny recommendations?\n\n===================================================================================\n\nWe have found that disabling FIFO-reset feature is not enough in some situations.\n\nWe have to disable both FIFO-reset and CDR-LOSS-reset feature to get a remote fault on remote device, when disconnect the switch between gearbox and IXIA.\n\nHowever, if both features are disabled, there is about 40% change the link does not recover after connection is restored. NPU gets stuck, constantly sending remote fault to IXIA,\n\nDavid", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 16-Apr-2015  8:52AM PST\n---------------------------------------------\nyes", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 06-Apr-2015  2:26PM PST\n---------------------------------------------\nHello David,\nThere was a link flapping issue which got resolved with 000F firmware. So there is no reason for Sandvine to revert back to any previous generation Firmware\u2019s.\n\nAs part of Firmware 000F, we have a general purpose register 0xF427 bit 0 and 0xF427 bit 1.\n\nF427[0] is used to control the behavior of the code in the event that Line side VSR CDR hardware detects a loss of lock. \nAt such an event, when F427[0] is set to 0 (default), the uCode resets system side data path. When it is set to 1, the reset is bypassed.\n\nI would like you to set F427.0   to 1 and rerun your RF tests.\n\n \nAnother condition of resetting system side data path is in case of fifo collision. The checking of collisions and resetting can be disabled by set f427[1] to 1.\nI would advise not to touch F427[1] as it might be necessary when they will test fiber push and pull mechanism.\n\nBoth of these bits and functionality of resetting data path did not exist in earlier Firmware 00B\n\nGive this a try and let me know.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 06:55:54", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Apr-2015  2:33PM PST\n---------------------------------------------\nHi David,\nif thats the case they have to disable both features then that is not desirable. Then we should stick to default settings.\n\nAnd when the link goes down and you are not seeing RFs passing through, can you try\n\nDATAPATH reset F402.8 and F402.7 to see if remote faults can be recovered ?\n\nF402.0 soft reset recovers the RF.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 24-Apr-2015 10:00AM PST\n---------------------------------------------\nNishant,\n\nSandvine tried the workaround and found some issues:\n\nWe explored your suggested workaround... but there are a couple of issues that arises:\n\nThe primary issue is that when we initially detect LF and set those bits to 1 as per your suggestion, then there are cases where the condition causing LF is restored, but the NPU device continues to receive LF from the BCM84794. Therefore, we don't really have a good way to know when to revert those bits to 0 as you suggested.\n\nThe second issue is that the response time of the software to link OK/LF transitions __is not_ very quick. This causes a large number of PCS alignment errors on remote devices before the software has the chance to adjust those bits as necessary.\n\nPlease let us know how you'd like us to proceed from here.\n==============================================================================================\n\nPete B and I got a heads up that Sandvine is going to elevate this to management now wanting a \"fix\".  I love how they elevated it without even telling us the workaround didn't work.\n\nIf you can come up with something else let me know.\n\nDavid", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Mar-2015  1:40PM PST\n---------------------------------------------\nHi David,\nCorrect, we cannot monitor the packets , 84794 does not have any PCS block inside it. \nI don't think this is a valid expectation.\n\n\nif you are sending RF faults in\n1. in 100GGearbox mode, 84794 will try to mux it and as reported you do see invalid pcs errors on remote partner .\n2. in straight through mode 10x10, there is no muxing, so whatever comes in from NPU gets transfered to Remote partner.\n\nI don't the see problem if:\n1. Link goes down on 84794\n2. NPU sees LF\n3. NPU generates RF\n4. 84794 tries to mux the fault\n5. Remote link cannot understand the muxed bits. \n6.You can disable transmitter of 84794 and report Rf on remote partner.\n\nthere is nothing we can do on our part to MUX faults differently in order for Link partner to understand it as a valid fault. The link partner is reporting the invalid alignment should be sufficient.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 06:55:54", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 09-Apr-2015  9:35AM PST\n---------------------------------------------\nNishant,\n\nIsn't the default of these 2 bits 0?  So if doing the reset in bits 8 and 7 do fix the issue 100% of time then wouldn't the new way be to anytime you see LF you start sending RF and always hit those 2 bits?\n\nDavid", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 28-Apr-2015  9:15AM PST\n---------------------------------------------\nThis has now come in from Sandvine and will be discussed on the call that is being set up for Thursday\n\nProposed Solution 1:\nWhen system data path gets reset, either because FIFO collision hits threshold or loss of CDR lock, is it possible to only reset ingress FIFO but leave egress path on? Resetting only the ingress fifo will be sufficient to deal with the link issues and leaving the egress FIFO alone will allow the remote partner to maintain PCS, thereby understanding our remote fault signal.\n\nSee ProposedSolution1.png\n\nProposed Solution 2:\nOur theory is the system data path constantly resets causing remote fault mangled. Is it possible to only reset once, which allows the remote fault signal to get transmitted afterwards? \n\nSee attachment", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 07-Apr-2015 10:17AM PST\n---------------------------------------------\nHere is what we got back from Sandvine.  Not exactly what you were anticipating.  Let me know what direction and answers you want me to forward back\n\n==============================================================\n\nRetested F427[0] and F427[1] with the remote fault.\n\nset F427[0]  to 1 same problem as before (FAIL)\nset F427[1] to 1 remote device receives fault correctly (PASS)\n\nIt does make sense F427[1]  makes the difference as we believe the problem is introduced in 0x000C.\n\nFrom my understanding, when fifo collision reach a certain threshold, it will cause a system side data path reset. Is this correct?\n\nWhy would this cause gearbox to corrupt the remote fault? Is reset constantly performed when line side CDR is done?\n\nWhat is impact if we always set F427[1] to 1? You've mentioned that you advice not to touch the bit. Could you give us more information on that, maybe some examples?", "CreatedOn": "2017-04-06 06:55:55", "CreatedBy": "admin"}]}, {"Number": "CS2265851", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 27-Aug-2015  5:15AM PST\n---------------------------------------------\nAlexey,\n\nI thought it was Sandvine that we went through this issue before but WRT step #3, ignore that statement.\n\n3. Set 0x8250.6 to 1, self-clear and reading back is 0.\n\nIt is not needed and superfluous.\n\nThanks\n\nDavid", "CreatedOn": "2017-04-10 01:21:02", "CreatedBy": "admin"}]}, {"Number": "CS1747477", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Jul-2014  5:35PM PST\n---------------------------------------------\nHello Mizo-san\nQ1. Ignore the word daytona, I myself don;t know much about it. Appears to be in for some design re-usability purposes. Dont know much about the usage.\nQ2. yes, you should perform the microcode reset before loading the microcode. I have not seen or heard any issue pertaining reg f413. If you follow the sequence as mdios_download.vbs you should be fine. \nQ3. yes it is 32k, but i would still like to check with design team to confirm.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:18:34", "CreatedBy": "admin"}, {"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 08-Jul-2014  6:04PM PST\n---------------------------------------------\nNishant-san,\n\nThank you for update.\n\nFor #3, please double check with your design team then let me know. The customer pointed out that 84793-SWUM102-R Figure.2 indicates the RAM is 2KB...\n\nFor #2, which is \"microcode reset\" regiter bit ? and do you mean the micro related reset bit is appropriate rather than hardware RESETB reset when the microcode loading failure happened ?\nActually I have an issue on mdio_download procedure in BCM8727 on customer's PCB (please refer CSP #813316), so I understand the customer need to take case the failure case.\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 04:18:34", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 09-Jul-2014  5:29PM PST\n---------------------------------------------\nMizo-san,\nit is 32k, but looking at your questions you are concerned about how much space is needed on your external CPU, the size of Firmware is usually of order of 8k, i dont expect it to become any bigger in future.\nOn your next question, yes I meant hard reset and indeed it is needed for consistent f413 values. If for some reason, f413 is expected to be broken, then it is advised to reset and reload your microcode.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:18:35", "CreatedBy": "admin"}]}, {"Number": "CS2280407", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 04-May-2015  2:58PM PST\n---------------------------------------------\nTried the work around suggested in the call, It did not work\n\nSteps:\n1. Use 0x000F microcode with 0xF427 set to 0\n2. Link up\n3. Disable TX from remote device\n4. Set F402 bit 7 to 0 (0x37f)\n5. Wait for 1 second\n6. Set F402 bit 7 to 1 (0x3ff\n7. Check link\n\nThere is a chance the link won't come back. Also tried bit 8, and bit 7/8 together., same issue.", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-Mar-2015  1:05PM PST\n---------------------------------------------\nFurther testing shows the problem DOES NOT happen with Microcode Version 0x000B. Fault is received by remote device when gearbox line side has no CDR correctly when using 0x000B.\n\nThis is tested on the same device with microcode 0x000F. NPU on the system side the gearbox must be sending fault correctly. Gearbox is likely not muxing the fault correctly to remote device with version 0x000F.\n\nUsing 0x000B in our application is not acceptable because we did run into another problem with 0x000B and 0x000F fixes it (On link bounce, there is a chance that NPU constanly gets PCS bip error until next link bounce. And yes, this happens on 0x000B not 0x000F).\n\nLooking at the release notes of mcode, one suspicion is:\nThe following changes are included in release 000F, compared to release 000D. \n\nFunctionality:\n(1) Change the order of resets in system side data path reset.\n\nCan this cause the problem? What other microcode change could potentially be the cause?\n\nWe want to understand more about the data path reset. And we want this resolved ASAP", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 08-Apr-2015  4:45AM PST\n---------------------------------------------\nSteve,\n\nFrom the factory:\n\nYou can set F427.1 to 1 and carry on with your remote fault and regression testing. For line card applications we have not seen any dependencies on this feature.\n\nThis was a critical feature request for module applications. \n\nSandvine reported \"If we restore the disconnect between the remote device and the CFP4, the link recovers successfully\" this is perfect. Go ahead and set F427.1 and you should be fine.\n\nDavid", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 06-Apr-2015  1:47PM PST\n---------------------------------------------\nIs there any update on this?", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 16-Apr-2015  3:45PM PST\n---------------------------------------------\nMichael,\n\nBased on your response that setting those bits help but then introduce other issues, the only solution seems to have bits 7 and 8 0 normally.  If at any point in time you move from a normal link OK transmitting state to LF, then set those bits to 1, transmit your RF till LF goes away.  Then take down those bits to 0.\n\nDavid", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Adrian Fung[Sandvine Incorporated]\nUpdate date: 06-May-2015  7:30AM PST\n---------------------------------------------\nHi David,\n\nOn the conference call, Nishant said that he expects to be able to give us a test FW in a week, not a month.\n\nBased on the latest results can I ask for the following?\n\n1. Can we get a test FW in a few days/a week that will prototype the fix. It doesn't have to be a fully qualified FW, just a test FW is fine to show that the fix can work. What I am worried about is that Nishant's team fully implement a fix, qualify and release only to find that a month later that it doesn't actually fix the problem. Especially in this case where Nishant's team is having difficulty reproducing the problem, hence actually testing it. I am ok with the final tested/release FW in a month, but I we need to have a test FW in a few days or a week tops.\n\n2. Since the work around provided doesn't seem to be working, can we arrange a call with Nishant to go brainstorm some other possible work arounds? That last call was very productive and I think both team walked away with something good.\n\n\nThanks.\n\nAdrian", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 08-May-2015  1:45PM PST\n---------------------------------------------\nThe remote fault is successfully received by remote device with the new microcode provided. And there is no link issue when link is recovered. \n\nSteps:\n1. Read microcode Version:\n0xf417:  0xe011\n\n2. Then set 0xF427 to 0x0004 before testing.\n\n3. Disable link from remote device to CFP4, verify remote device receives remote fault.\n4. Re-enable link, verify both devices link up.\n5. Repeat 3-4 50 times\n\nThanks", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-Mar-2015  2:56PM PST\n---------------------------------------------\nConfirmed the problem can be reproduced with 0x000D. Must be introduced in 0x000C or 0x000D", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 08-Apr-2015  1:55PM PST\n---------------------------------------------\nWe have found that disabling FIFO-reset feature is not enough in some situations.\n\nWe have to disable both FIFO-reset and CDR-LOSS-reset feature to get a remote fault on remote device, when disconnect the switch between gearbox and IXIA.\n\nHowever, if both features are disabled, there is about 40% change the link does not recover after connection is restored. NPU gets stuck, constantly sending remote fault to IXIA,", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 07-Apr-2015  5:16AM PST\n---------------------------------------------\nI have received more information back form PHY engineering about what is probably going on.  It is related to REV F.  Try this and let us know if this solves your issue.\n\n=======================================================================================================\n\nThere was a link flapping issue which got resolved with 000F firmware. So there is no reason for Sandvine to revert back to any previous generation Firmware\u2019s.\n\nAs part of Firmware 000F, we have a general purpose register 0xF427 bit 0 and 0xF427 bit 1.\n\nF427[0] is used to control the behavior of the code in the event that Line side VSR CDR hardware detects a loss of lock. \nAt such an event, when F427[0] is set to 0 (default), the uCode resets system side data path. When it is set to 1, the reset is bypassed.\n\nI would like you to set F427.0   to 1 and rerun your RF tests.\n\n \nAnother condition of resetting system side data path is in case of fifo collision. The checking of collisions and resetting can be disabled by set f427[1] to 1.\nI would advise not to touch F427[1] as it might be necessary when they will test fiber push and pull mechanism.\n\nBoth of these bits and functionality of resetting data path did not exist in earlier Firmware 00B\n\n====================================================================================================\n\nDavid", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Mohammad Mohsenzadeh[Sandvine Incorporated]\nUpdate date: 24-Apr-2015  7:55AM PST\n---------------------------------------------\nHi David,\n\nWe explored your suggested workaround... but there are a couple of issues that arises:\n\nThe primary issue is that when we initially detect LF and set those bits to 1 as per your suggestion, then there are cases where the condition causing LF is restored, but the NPU device continues to receive LF from the BCM84794. Therefore, we don't really have a good way to know when to revert those bits to 0 as you suggested.\n\nThe second issue is that the response time of the software to link OK/LF transitions __is not_ very quick. This causes a large number of PCS alignment errors on remote devices before the software has the chance to adjust those bits as necessary.\n\nPlease let us know how you'd like us to proceed from here.\n\nThanks,\n\nMohammad", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 15-May-2015  6:19AM PST\n---------------------------------------------\nWhen can we expect a released version of the prototype firmware that fixed the issue?", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-May-2015  5:25AM PST\n---------------------------------------------\nThe test firmware will be available in a month so we will wait and see how that does.  In the meantime you have the workaround to turn off transmitter if you lose link.\n\nDavid", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Adrian Fung[Sandvine Incorporated]\nUpdate date: 06-May-2015  6:50AM PST\n---------------------------------------------\nHi David,\n\nWe have tried the work around and it doesn\u2019t work and we certainly can't wait a month for new FW. I thought we were going to get a test FW to see if the fix works in a week? We still need that thx.\n\nAdrian", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 07-May-2015  3:20PM PST\n---------------------------------------------\nOK a month is a little shorter time frame than it used to be. :-) \n\nNishant has the new firmware file ready for you but we do not know if you need it in .bin or .c format.\n\nLet us know\n\nThanks\n\nDavid", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 18-Mar-2015 10:45AM PST\n---------------------------------------------\nMohammad,\n\nWhat is the remote end?  Is it the same type of unit or something else.  If something else, can you try 2 of this same design back to back.  \n\nThe 84794 should be issuing a local fault to the NPU and NPU should then be transmitting a remote fault to the other end.  The PHY just passes the RF MAC level packet as any packet would be transmitted.  It is a virtual wire and not blocking any packets.  Everything that comes in on the CAUI end will go out the VSR28 end.\n\nDavid", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 27-Mar-2015  5:34AM PST\n---------------------------------------------\nI have reported your observations of the differnt micorcodes.  I have asked if and when a change might be available.  I wil report back once I find out that info.\n\nDavid", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 14-Apr-2015  8:13AM PST\n---------------------------------------------\nIs there any update on this issue? Any other suggestions that we can try?\n\nRegards,\nSteve", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 07-Apr-2015  9:55AM PST\n---------------------------------------------\nRetested F427[0] and F427[1] with the remote fault.\n\nset F427[0]  to 1 same problem as before (FAIL)\nset F427[1] to 1 remote device receives fault correctly (PASS)\n\nIt does make sense F427[1]  makes the difference as we believe the problem is introduced in 0x000C.\n\nFrom my understanding, when fifo collision reach a certain threshold, it will cause a system side data path reset. Is this correct?\n\nWhy would this cause gearbox to corrupt the remote fault? Is reset constantly performed when line side CDR is done?\n\nWhat is impact if we always set F427[1] to 1? You've mentioned that you advice not to touch the bit. Could you give us more information on that, maybe some examples?\n\nRegards,\nSteve", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 27-Apr-2015 11:54AM PST\n---------------------------------------------\nSummarize:\n\n#1#.        How to reproduce the problem:\n\nOur setup is as follow:\n[ NPU Device ] <-----(10x10G CAUI)-----> [ BCM84794 ] <----(4x25G VSR28)-----> [ CFP4 ]   <---------- single mode fiber --------------> [ Remove Device ]\n\n1. We enable the link between NPU and the Remote device, and verified that both device report link up.\n2. We disconnect half of the fiber from tx of remote device to rx of our CFP4.\n\nExpectation:\nAfter step #2 above, we expect the remote device to be receiving remote fault signal from the NPU.\n\nObservations:\n1. Although the link is down at the remote device,  but remote device is not receiving remote fault but in local fault instead.\n2. The remote device reports PCS Lane marker errors on one or more of the PCS lanes.\n3. We confirmed that we have loss of signal on line side of BCM84794.\n4. We confirmed that NPU device is reporting a local fault, and thus \"should\" be generating an outgoing remote fault signal.\n5. If we restore the disconnect between the remote device and the CFP4, the link recovers successfully.\n6. If we manually power down RX on line side of BCM84794, then the remote device DOES detect the remote fault signal.\n7. If we manually power down TX on system side of BCM84794, then the remote device DOES detect the remote fault signal.\n8. If we Hard Reset the BCM84794 either through 0xF402 bit 0, or through RESET signal into BCM84794, then the remote device DOES detect the remote fault signal.\n9. If the BCM84794 is configured in 10x10G async mode, then the remote device DOES detect the remote fault signal.\n\nAdditional information:\n1. Reset Gearbox Rx/Tx Data path, SPI clock DOES NOT recover the failure (0xF402 bit 4 to 9)\n2. Reset Gearbox Microcontroller DOES NOT recover the failure (0xF402 bit 3)\n\n#2#.        Why we believe it is a ucode problem\na)        Use the procedure above, the same behavior is observed with microcode version 0x000C to 0x000F.\nb)        Use the procedure above, the remote device successfully receives remote fault with microcode version 0x000B.\nc)        Use the procedure above, the remote device successfully receives remote fault with microcode version 0x000F, if  F427.0 and F427.1 are both set to 1 (when both reset features are disabled)\n\nHowever, in b) and c), the link has a chance that it won\u2019t recover after link is restored\n\n#3#.        Why the current work around suggested by Broadcom won\u2019t work for our application\na) The primary issue is that when we initially detect LF and set those bits to 1 as per your suggestion, then there are cases chances where the condition causing LF is restored, but the NPU device continues to receive LF from the BCM84794 without a reset. Therefore, we don't really have a good way to know when to revert those bits to 0 as you suggested.\nb) The second issue is that the response time of the software to link OK/LF transitions __is not_ very quick. This causes a large number of PCS alignment errors on remote devices before the software has the chance to adjust those bits as necessary.", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 06-May-2015  6:45AM PST\n---------------------------------------------\nA mistake in the update in 04-May-2015 02:58:11 PM, I meant 0xF427 set to 3.\n\nRe-summarize:\n1. Use 0x000F microcode with 0xF427 set to 3 (disable both feature so expecting link failure)\n2. Link up\n3. Disable TX from remote device\n4. Set F402 bit 7 to 0 (0x37f)\n5. Wait for 1 second\n6. Set F402 bit 7 to 1 (0x3ff)\n7. Enable TX from remote device and check link, and link some times DOES NOT recover\n\nAnother test we have tried:\nSteps:\n1. Use 0x000F microcode with 0xF427 set to 0 (expecting no remote fault on remote device)\n2. Link up\n3. Disable TX from remote device\n4. Set F402 bit 7 to 0 (0x37f)\n5. Wait for 1 second. While in reset, Remote device CANNOT receive remote fault.\n6. Set F402 bit 7 to 1 (0x3ff)\n7. Remote device still CANNOT receive remote fault. \n\nWe also tried bit 8, and bit7+8 in both cases. We haven't seen one situation that both problems are resolved.\n\nQuestion to David:\nWhich transmitter are you referring to? We have to leave the line side transmitter on so fault goes out through gearbox to the remote device.", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-May-2015  7:15AM PST\n---------------------------------------------\nThe time frame of 1 month was mentioned on the conference call by Nishant.\n\nDavid", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 08-May-2015  6:18AM PST\n---------------------------------------------\nWe prefer the .bin format.\n\nThanks.", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 26-May-2015 11:05AM PST\n---------------------------------------------\nNishant was OoO but will have ir released today\n\nDavid\n\n Sent from my iPhone\n\n> On May 26, 2015, at 1:24 PM, BRCM Support - Michael Marchetti <support@broadcom.com> wrote:\n> \n>", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 15-May-2015  2:30PM PST\n---------------------------------------------\nWe expect this code to be released by Wednesday, 5/20, evening\n\nDavid", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Mohammad Mohsenzadeh[Sandvine Incorporated]\nUpdate date: 18-Mar-2015 11:06AM PST\n---------------------------------------------\n> What is the remote end?  Is it the same type of unit or something else.  If something else, can you try 2 of this same design back to back.  \n\nWe have tried both an IXIA and another unit of the same type as the remove device. Both had the exact same behavior.\n\n> The 84794 should be issuing a local fault to the NPU and NPU should then be transmitting a remote fault to the other end. \n> The PHY just passes the RF MAC level packet as any packet would be transmitted.  It is a virtual wire and not blocking any packets. \n> Everything that comes in on the CAUI end will go out the VSR28 end.\n\nIn our observation, item #4, we did confirm that the NPU was receiving a local fault signal from BCM84794.\n\nWhat is the significance of the PCS Lane Marker Errors that we are seeing at the remote device? Is it possible that BCM84794 screws up the lane mapping such that the remote fault signal is not recognizable at the remote end of the connection?\n\nWhat is the significance of the powering down line side rx or powering down system side tx of the BCM84794? Is it possible that BCM84794's internal state machine is misbehaving if there's no signal present at its line side receiver?", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 27-Mar-2015 11:59AM PST\n---------------------------------------------\nThanks David.\n\nWe have found the problem DID happen with 0x000C too. And same as 0x000F, in the failure state (gearbox not receiving CDR), if gearbox line side rx power is disabled (0xf450 to 0xf and 0xf451 to 0xf), remote device gets remote fault correctly.\n\nAnd confirmed again the problem cannot be reproduced with 0x000B.", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 14-Apr-2015  9:20AM PST\n---------------------------------------------\nI am waiting on an answer from the factory\n\nDavid", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 28-Apr-2015  8:30AM PST\n---------------------------------------------\nProposed Solution 1:\nWhen system data path gets reset, either because FIFO collision hits threshold or loss of CDR lock, is it possible to only reset ingress FIFO but leave egress path on? Resetting only the ingress fifo will be sufficient to deal with the link issues and leaving the egress FIFO alone will allow the remote partner to maintain PCS, thereby understanding our remote fault signal.\n\nSee ProposedSolution1.png\n\nProposed Solution 2:\nOur theory is the system data path constantly resets causing remote fault mangled. Is it possible to only reset once, which allows the remote fault signal to get transmitted afterwards?", "CreatedOn": "2017-04-09 21:06:11", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 20-Mar-2015  8:30AM PST\n---------------------------------------------\nMohammad,\n\nI have verified that  we cannot monitor the packets , 84794 does not have any PCS block inside it.   Therefore, we don't think this is a valid expectation for the PHY.\n\n\nIf you are sending RF faults in\n1. in 100GGearbox mode, 84794 will try to mux it and as reported you do see invalid pcs errors on remote partner .\n2. in straight through mode 10x10, there is no mux'ing, so whatever comes in from NPU gets transferred to Remote partner.\n\nWe don't that there is a problem if:\n1. Link goes down on 84794\n2. NPU sees LF\n3. NPU generates RF\n4. 84794 tries to mux the fault\n5. Remote link cannot understand the mux'ed bits. \n6.You can disable transmitter of 84794 and report RF on remote partner.\n\nthere is nothing we can do on our part to MUX faults differently in order for Link partner to understand it as a valid fault. The link partner is reporting the invalid alignment should be sufficient.\n\nDavid", "CreatedOn": "2017-04-09 21:06:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-May-2015 10:23AM PST\n---------------------------------------------\nIs there any update about the new microcode release? We were told it would be released May 20 but haven't seen any update in docsafe.\n\nThanks.", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-May-2015  7:15AM PST\n---------------------------------------------\nWe thought you said on the call yesterday that on the side that loses link, you could shut down the TX and force the other side to see a LF.  If RF are not getting through, why do you need to keep link?\n\nDavid", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 08-May-2015 10:08AM PST\n---------------------------------------------\nAs per their request, we have added the feature in the Firmware where Egress path would not be affected by link changes on the Line side receive.\n\nWe Added an option to bypass few system side resets when line Rx CDR or FIFO status change.\nThis feature must be enabled by setting FW_enable register (0xF427) bit 2 to 1.\n\n\nWe are adding an option button in this test firmware because not all of our customers have requested for this feature.  \n\n\nHence the procedure to test would be:\n\n1. Download Firmware\n2. Set F427.2 0x1\n3. Perform RX fiber pull out\n4. Observe local faults on Mac and undisrupted Remote faults on Link partner.\n5. No other F427 bit needs to be touched and should be left as default which are zero.", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 22-Jul-2015 12:20PM PST\n---------------------------------------------\nMarking Resolved", "CreatedOn": "2017-04-09 21:06:12", "CreatedBy": "admin"}]}, {"Number": "CS1642171", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 09-Sep-2015  4:35PM PST\n---------------------------------------------\nHi Erik,\nPlease see attached XL sheet.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:37:07", "CreatedBy": "admin"}, {"Notes": "Updated by: Brian Stroud[Broadcom Corporation]\nUpdate date: 09-Sep-2015  5:21PM PST\n---------------------------------------------\nThank you", "CreatedOn": "2017-04-06 08:37:07", "CreatedBy": "admin"}]}, {"Number": "CS4508863", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "New external attachment had been added to case CS4508863:\nsetup_Gearbox_84794.png", "CreatedOn": "2018-02-03 01:20:32", "CreatedBy": "meijun.zhao@coriant.com"}, {"Notes": "Please use latest and greatest firmware 0011 \r\n\r\nE0CA40A1FFFF4790_0011.zip is located on docsafe and then set F427.2 to 0x1 \r\n\r\nif you or any of your customer is not able to view the firmware, then do let me know thier email ids and I will update the permission on docsafe. \r\n\r\nI am sure this will resolve the issue. ", "CreatedOn": "2018-02-09 18:27:34", "CreatedBy": "N6022215"}, {"Notes": "Regarding the access to the \r\nE0CA40A1FFFF4790_0011.zip is located on docsafe \r\n\r\nI have  requested access to the firmware on docsafe. \r\nMathew, Anoop J. Anoop.Mathew@coriant.com\r\nmeijun.zhao@coriant.com\r\nand ME\r\n\r\nBr Anders\r\n", "CreatedOn": "2018-02-09 18:36:18", "CreatedBy": "N6022215"}, {"Notes": "Hi Laurel,\nThe reference clock of Gearbox is provided by the OTN/100GE framer, it will not affected when Gearbox RX side signal LOS toggle.\nIn addition, we did a test as show in attached debug_hgtms.png, the lookback performed either at the OTN framer or at Gearbox system side, that purpose to isolate the RX signal to Gearbox\u2019s line RX side. In this case, still could observe the Gearbox\u2019s TX traffic get affected when RX get LOS/invalid signal. Please support us to further check if any coupling inside Gearbox?\n\nThanks", "CreatedOn": "2018-02-08 09:50:34", "CreatedBy": "meijun.zhao@coriant.com"}, {"Notes": "HI All \r\n\r\nI will set this as resolved \r\nThe application engineer for BCM84794 product. \r\nSaid that for the problem statement you have presented \r\nThe 0x4 setting should be suffice.\r\n\r\nThanks Anders \r\n", "CreatedOn": "2018-02-13 09:57:06", "CreatedBy": "N6022215"}, {"Notes": "If your reference clock is recovered from RX side and use this clock for reference clock of 84794. It's possible that the dis-continues clock may cause TX side get problem.\r\n\r\n\r\nThanks,\r\nLaurel", "CreatedOn": "2018-02-07 05:55:57", "CreatedBy": "00939652"}, {"Notes": "Hi Laurel,\nYes, that's also our understanding that Rx and TX is indepndent. however according what we observed looks there are some link between them.\ncould you please suggest us if any configuration/FW/Setting that we can check?", "CreatedOn": "2018-02-06 14:10:24", "CreatedBy": "meijun.zhao@coriant.com"}, {"Notes": "System automatically closed this priority 1 case after 2 weeks in the Resolved state.", "CreatedOn": "2018-02-27 16:00:07", "CreatedBy": "system"}, {"Notes": "Hello Anders,\ndoes F427 bit [1] still need be set to \"1\" as below comments from FW rev \"000C\"?\nDate: 2013-11-22\nRelease Version: 000C \n2. Performance enhancement upon short optical LOS on RX\n   (1) F427[1] is used to control whether FIFO collision latched status register\n    gb_rx_collide_lh@F52A is used to trigger system side data path reset.\n    With the default value of 0, this status register is read regularly\n    and if any of the bit is set, the data path reset is performed. The latched\n    status register is also mapped to GPReg14@F425.\n    When F427[1] is set to 1, the collision latched status register is not\n    checked, nor is GPReg14@F425 updated.\n\n   (2) The FIFO collision latached status register gb_rx_collide_lh@F52A is mapped to\n    GPReg14@F425 when F427[1] is set to 0. Each time the status register\n    is read, the value is ORed to the existing value of GPReg14@F425. The user\n    is responsible for clearing GPReg14 after it is read.", "CreatedOn": "2018-02-13 15:47:09", "CreatedBy": "meijun.zhao@coriant.com"}, {"Notes": "New external attachment had been added to case CS4508863:\ndebug_hgtms.png", "CreatedOn": "2018-02-08 09:50:26", "CreatedBy": "meijun.zhao@coriant.com"}, {"Notes": "RX and TX is independent and the behavior of RX side will not take effect on TX side directly.\r\n\r\n\r\nThanks,\r\nLaurel", "CreatedOn": "2018-02-06 05:49:52", "CreatedBy": "00939652"}, {"Notes": "Hi \r\nSetting bit 2 would mean to write a value 0x4 into the register.\r\nPlease let me know if you still see the problem. \r\n\r\nThanks Anders \r\n", "CreatedOn": "2018-02-12 15:28:28", "CreatedBy": "N6022215"}]}, {"Number": "CS2442617", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 11/16/2015 9:50:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nBased on your test results it looks like the errors are due to the optics modules you are using and has nothing to do with your system or the BCM84794.\n\nAs you will see from the datasheet the BCM84794 doesn't even have a PCS layer so the responsibility for the FEC functionality would be needed in NP5.  The BCM84794 is just passing the data is receives through the device. \n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:18", "CreatedBy": "admin"}, {"Notes": "Case automatically closed priority 2 cases after 3 Weeks in the Resolved state.", "CreatedOn": "2017-05-20 14:44:58", "CreatedBy": "system"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 11/16/2015 9:55:00 AM PST\n---------------------------------------------\nIf you are looking for a device that has FEC included you should look at a device like the BCM82792.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 11/16/2015 6:30:00 PM PST\n---------------------------------------------\nWe do have concern on that. In our application, the GB\u00a0\u00a0convert 10x10 serdes signals to 4 x 25G serdes signals, so if the 100G optical module(4X25G) need support FEC, then we think it should be in the GB 4x25G serdes side since we are not sure if\u00a0\u00a0the convert process will miss any FEC information.\nAnd the NP5 side is 10X10 not 4X25G", "CreatedOn": "2017-03-31 01:42:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Andy Lengyel[Quest-Rep Inc]\nUpdate date: 11/16/2015 8:33:00 AM PST\n---------------------------------------------\nAdding block diagram .jpg attachment to help clarify the system architecture for this Radisys NPX ATCA blade.", "CreatedOn": "2017-03-31 01:42:18", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 11/17/2015 8:40:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nThe 8479x devices do not have support for FEC.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:18", "CreatedBy": "admin"}]}, {"Number": "CS2281005", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 22-Sep-2015  8:46AM PST\n---------------------------------------------\nThat's unfortunate. Thanks for your help.", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 18-Sep-2015 11:24AM PST\n---------------------------------------------\nIt's when I do things in the order you outlined. It doesn't help when I apply the equalization before the clock divider update/PLL reset.", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 11-Sep-2015  1:07PM PST\n---------------------------------------------\nWe were told in case 961133 that writing to 0x8250.6 as instructed in the datasheet was not needed.", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 21-Sep-2015  6:27AM PST\n---------------------------------------------\nBased on Sandvine feedback that when used in the correct order all is well, this is being marked resolved\n\nDavid", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 11-Sep-2015 11:35AM PST\n---------------------------------------------\nHi Alexiey, would you please add some cross-references to older work on this topic (csp cases, emails, etc).  Thanks.", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 15-Sep-2015  7:45AM PST\n---------------------------------------------\nIt looks like there was an issue with updating the clock divider in case 740841, but I don't believe it's related. Do you need any more information?", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 21-Sep-2015 11:50AM PST\n---------------------------------------------\nWhat does the PLLReset actually reset? Is it just the rx equalization, or can it affect tx things as well? We also set amplitude, mainemphasis, preemphasis and postemphasis before the PLL reset. Can they be affected by the reset as well? I'm not aware of any issues with them at the moment, so I'd rather not take the risk of moving them later unless they could be affected.", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 16-Sep-2015  5:45AM PST\n---------------------------------------------\nAlexey,\n\nThere are no known errata on manually setting the system side equalization or they would be listed in the errata for the part.\n\nIf the reset values of the PLL control are not what you need for proper operation then the proper code sequence would be to set those values up in the PLL control registers and then give it a PLL reset because you don't know if it is completely out of whack due to setting the control registers.\n\nAfter the PLL is stabilized then you could set the values of the equalization and then enable the channel.\n\nWhy doing things out of that order don't work is probably due to the requirements in the hardware design of the ouput buffer and the control registers you are accessing actually ave some shadow register or preset a shift register and doing the PLL reset eliminates those values.\n\nI have pointed out to the factory you need to set this 1.8250.6 bit to make things work.  But is that when you do things in the order that I outlined or in your other order?  When I hear back I will update this ticket.\n\nDavid", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 21-Sep-2015 12:30PM PST\n---------------------------------------------\nFrom page 62, bit 1.F439.2 resets the CAUI PLL and resets the TX and RX data paths.  That would also effect all of the TX and RX high speed sections because of the discontinuity on the clocking domain.  Thereby creating the need to be re-initialized.\n\nDavid", "CreatedOn": "2017-04-10 01:26:10", "CreatedBy": "admin"}]}, {"Number": "CS1642098", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 08-Aug-2014  3:48AM PST\n---------------------------------------------\nNishant-san,\n\nThank you for update. As I wrote, the customer places ext 0.1uF cap on REFCLK. But it is not needed since it is AC coupled internally. Correct ?\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 04:31:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Nov-2014 12:45PM PST\n---------------------------------------------\ncorrect.\nChanging case to resolved.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 04:31:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 26-Jul-2014 12:29AM PST\n---------------------------------------------\nNishant-san,\n\nHere is my review result. Please double check on your side then please let me know if there is other attention.\n\n- TX_MCLK : Ext 0.1uF cap is required if the customer wants to use this to monitor the clock\n- REF_CLK : Ext 0.1uF cap is not required since AC coupled internally. (The customer referred BCM84793 EVB schematics (BCM984793_CFP2_CXP_bw.pdf)  and it has ext caps...so they placed the caps.)\n\nAnd I have two questions.\nQ1.\nThe customer wll connect the BCM84794 with CFP4. In short, lane 4-9 on the line side will not be used. Since the operation mode is 1 or 5, power will not be supplied to unused I/O. In this case, can they be left NC (even though there are some analog inputs) ?\n\nQ2.\nBCM84790 has VDDIOSYS to define the system I/O interface voltage. But BCM84794 doesn't have VDDIOSYS and it has 1.0V and 2.5V only. Even in this case, can the BCM84794 MDIO communicate with 1.2V I/F ? I believe the datasheet is correct but this is first BCM84793/4 design for me, so please let me confirm just in case.\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 04:31:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Makoto Mizoguchi[TecStar Company]\nUpdate date: 04-Aug-2014  5:20PM PST\n---------------------------------------------\nHi Nishant-san,\n\nPlease update this case.\n\nThanks,\nMizoguchi", "CreatedOn": "2017-04-06 04:31:24", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 04-Aug-2014  8:44PM PST\n---------------------------------------------\nHello Mizo-san\nI have reviewed the schematic, everything looks good to me except power filter values.  I am not able to assess just by looking at part no what exactly the values are.\nIf you can cross-check with HWUM the filter values then we are good. I am sure , you must have crosschecked it closely.\n\nAs far as your questions are concerned\nQ1. yes you can leave them as NCs\nQ2. yes 84794 MDIO can communicate with 1.2V I/F\n\nThanks\nNishant", "CreatedOn": "2017-04-06 04:31:24", "CreatedBy": "admin"}]}, {"Number": "CS1642106", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 11-Aug-2015  5:35AM PST\n---------------------------------------------\nYes this is the shallow loopback of the line side RX right back around to the line side TX.  The issue is that Cisco is believing that that the REFCLK is used in this configuration rather than the recovered clock being passed over to the TX CMU.  If the REFCLK was being used we would still have errors because at some point the loopback FIFOs would burp.  In the 84790 SWUM page 23 that MUX is actually shown.  This diagram is what they are asking for done for the 84794.\n\nDavid", "CreatedOn": "2017-04-06 08:17:17", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 11-Aug-2015  4:31PM PST\n---------------------------------------------\nHi David,\nPlease guide them clocking diagram we have in place under 84793 SWUM.\n\nIF cisco is still not clear and would like to schedule a conference call, please arrange a meeting based on my availability on the calendar and I can discuss the scenario with them.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:17:17", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 10-Aug-2015  9:26AM PST\n---------------------------------------------\nSee my previuos follow-up question", "CreatedOn": "2017-04-06 08:17:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 10-Aug-2015  4:40PM PST\n---------------------------------------------\nDavid, \nPlease draw a diagram and help me understand how you are interpreting LINE SIDE Loopback.\n\n\nI hope you are not thinking LINE SIDE loopback as deep loopbacks \n\nSystem side in ---> Line side loopback --> System side out\n\n\nLine loopback is shallow loopback on the line side\n\nLine side in --> shallow loopback --> line side out.\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:17:16", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Aug-2015  4:09PM PST\n---------------------------------------------\nHi David,\n\nI am sorry but I dont see the confusion. The solution is solid if the clocks between switch and phy are synchronous.\n\nIn ingress path\nLIne side to system side\nData is transmitted using the recovered clock with complete PI transfer from Line side recieve to system side transmit.\n\nIn Egress path\nSystem side to Line side\nData is not transmitted using the recovered clock but instead data is transmitted using the reference clock.\n\nHence the requirement to have common clock between PHy and switch/NLPU on system side.\n\nThe same is also true for Loopbacks\n1. System side loopbacks: you would need synchronous clock as there is no PI transfer from system receive to system side transmit.\n2. Line side loopbacks would work fine with asynchronous clock.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:17:16", "CreatedBy": "admin"}]}, {"Number": "CS1642114", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Aug-2015 11:48AM PST\n---------------------------------------------\nHi Yogish,\nBelow are my responses\n\n\n1) What is the exact difference between BCM84793 and BCM84794? I cannot find any differences in the datasheet.\nDuobinary encoder is not supported in 84794, other than that every thing is exactly same.\n\n\n2) Looks like the firmware is the same for BCM84793 and BCM84794. Cisco first generation Panini has software written for BCM84793. Will this work seamlessly with BCM84794?\n\nYes\n\n3) Is there eyescan available for both the 4x25 VSR lanes and 10x10G nPPI lanes? \n\nYes\n\n4) For the 10 nPPI lanes, eyescan works on lanes 0-3. But does not work for lanes 4-9. Just wanted to check if this a known issue.\n\neye scan works for lanes 4-9 as well.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:17:17", "CreatedBy": "admin"}]}, {"Number": "CS2224870", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 8/23/2013 6:26:00 AM PST\n---------------------------------------------\nOur engineer who is implementing the SI pieces for our Gearbox driver still has some unanswered questions related to this CSP case. He thinks he's figured out issues 1-3 above, but specifically, there seems to be conflicts between the documentation and the SDK as how eye monitoring is to be implemented. \n  a) the way indicated to be used for VSR, i.e. the method documented in the Software Users Manual, also in bcm84793_evalKit/scripts/enzo_codes/VSR_eye_2d_scan.vbs\n  b) The microcode way, implemented in the latest SDK, and also in the bcm84793_evalKit/scripts/eye_scan_all/eye_scan_all.vbs\n\nWhich method is correct? Does option b) support VSR lanes, and does it handle the steps shown in the manual such as \"bypass greycode\" automatically?\n\nAlso, how is eye monitoring on the CAUI lanes to be done? \n\nWe also still need an answer to question 4 above, regarding whether eye monitoring can be done with PRBS instead of the correlated error counting.", "CreatedOn": "2017-04-09 14:48:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 8/23/2013 10:01:00 AM PST\n---------------------------------------------\nIn addition to the above, we are also need to know if the PRBS errors are measured at the diagnostic slicer or one of the data slcers. If it is the latter, then which of the two data slicer do we change to do eye monitoring measurements with PRBS traffic?", "CreatedOn": "2017-04-09 14:48:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 10/21/2013 7:33:00 AM PST\n---------------------------------------------\nAnna, Michael\n\nThis is the first reply from the 100GbE Gearbox questions.\n\nCan you let me know if you have any questions or concerns\nabout these answers so I can send them to the Factory.\n\n\n1)\nthe 84794 does not support PHY_DIAG_CTRL_EYE_ENABLE_DEADLINK\nis there a reason this isn\u2019t integrated into the eye margin tool for this device?\n\nThis API is no used anymore, we don\u2019t support this feature. This is history \nwhen we did not utilize eye monitor slicer. \nDeadlink was used when we did not have dedicated diagnostic slicer. \nThe current implementation available on docsafe\n\n2)\nAs PRBS is not currently in the eye margin tool:\nThey also need to know if the PRBS errors are measured at the \ndiagnostic slicer or one of the data slcers. If it is the latter,\nthen which of the two data slicer do we change to do eye\nmonitoring measurements with PRBS traffic?\n\nThe eye monitor itself does not capture any error in the traffic, \nwhether it is PRBS or not. The user can measure BER of PRBS \nthrough the PRBS checker/BER monitor for the data slicer \nat its default location. The eye monitor feature can be used to \nmeasure the number of different decisions between the \ndata slicer and the diagnostic slicer.\n\nCurrent eye scan would work with both prbs and generel ethernet traffic.\n\n3) \nA related question is that if they need to move the data slicers to measure\nPRBS they understand that they can only move the thresholds +/- 35 milliVolts\nwhere as the Eye Monitor Slicer can be moved +/- 310 milliVolts.\nThey think the +/-35 mV is to small a range to have a significant impact\non PRBS measurements.\nDoes this question make sense, given the architecture.\n\nDead link is not used anymore, for wider range Follow eye \nmonitor slicer for prbs measurements\n\n\n4)\nThere seems to be conflicts between the documentation and the \nSDK as how eye monitoring is to be implemented. \na) \nthe way indicated to be used for VSR, i.e. the method\ndocumented in the Software Users Manual, \nalso in bcm84793_evalKit/scripts/enzo_codes/VSR_eye_2d_scan.vbs\n\nb) The microcode way, implemented in the latest SDK, and also in the          bcm84793_evalKit/scripts/eye_scan_all/eye_scan_all.vbs\n\nWhich method is correct? \nDoes option b) \nsupport VSR lanes, and does it handle the \nsteps shown in the manual such as \"\nbypass greycode\" automatically?\n\nOption b is rock solid for all cores, internal coding is taken care \nby microcode. Please follow the latest GUI available on Docsafe, \ndriver codes for SDK will be uploaded on docsafe soon.\n\n\nAlso, how is eye monitoring on the CAUI lanes to be done? \n\nbcm84793_evalKit/scripts/eye_scan_all/eye_scan_all.vbs is the \nlatest way to perform eye scanning. In the latest scripts available \non docsafe you can perform eye measurements on all cores including CAUI. \nBelow is the procedure to accomplish\n\nFor VSR core\n===========\n1  Externally connect 4 lanes on VSR side , loopback to itself\n2  Run scripts/mdiospi_download_84790_93.vbs  , this script would initialize the device and load micro code \u201cBCM94790_93_D00B.bin\u201d which I have added in the attached file.\n3.        Once micro is loaded, run scripts/prbs/ Line_25G_Mode1_Tx2RX_ext_prbs_lpbk_scrn.vbs , this script setup MODE 1 along with pattern generation and checking\n4.        Once traffic is running, run scripts/prbs/eye_scan_all.vbs , the current script is set for 4 lanes and will perform VSR side eye scan\n5.        Make sure you set the right core on line# 299 , set it to core=3 and specify lanes = 0,1,2,3 \n\n\nFor Hexacore \n============\n1.        Externally connect 6 lanes on hexacore side , loopback to itself\n2.        No need to download microcode again\n3.        run scripts/prbs/ Line_10G_Mode4_Tx2RX_ext_prbs_lpbk_scrn_dc_A1.vbs , this script setup for Hexacore along with pattern generation and checking\n4.        Once traffic is running, run scripts/prbs/eye_scan_all.vbs \n5.        Make sure you set the right core on line# 299 , set it to core=2 and specify lanes = 0,1,2,3,4,5    // note lanes numbers in script cannot be specified from 6 through 9 but 0 through 5.\n\nFor Deca Core \n============\n1         Externally connect 10 lanes on system side , loopback to itself\n2.        No need to download microcode again\n3.        run scripts/prbs/ system_10G_Mode1_Tx2RX_ext_prbs_lpbk_scrn.vbs , \n           this script setup for system side 10 lanes or Deca core along with pattern generation and checking\n4.        Once traffic is running, run scripts/prbs/eye_scan_all.vbs \n1.        Make sure you set the right core on line# 299 , set it to core=1 and specify lanes = 0,1,2,3,4,5,6,7,8,9   \n\nYou can also use GUI front panel tabs to achieve above steps, let me know if you would need a demo on the procedures\n\n\nsteve", "CreatedOn": "2017-04-09 14:48:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 5/27/2013 7:58:00 AM PST\n---------------------------------------------\nUpdated product from \"other\" to BCM84794\nsteve", "CreatedOn": "2017-04-09 14:48:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Taylor[Broadcom Corporation]\nUpdate date: 10/21/2013 11:28:00 AM PST\n---------------------------------------------\nMichael\n\nResolving this case and working on the last\nBCM84794 question in CSP 709896:\nEye Diagram on Gearbox 84794 not valid/useful\n\nsteve", "CreatedOn": "2017-04-09 14:48:12", "CreatedBy": "admin"}]}, {"Number": "CS2011644", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-Dec-2014  1:25PM PST\n---------------------------------------------\nCorrect!", "CreatedOn": "2017-04-06 05:54:28", "CreatedBy": "admin"}]}, {"Number": "CS1790829", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Jhyda Lin[Broadcom Corporation]\nUpdate date: 29-Oct-2015  6:21PM PST\n---------------------------------------------\nDear Chris,\n\nBoth issues are confirmed by RD. The first issue will be fixed at SDK 6.4.9, and the second one is already fixed at SDK 6.4.8. Many thanks for you to share such information with us.\n\nBest Regards,\nJhyda_Lin.", "CreatedOn": "2017-04-07 13:19:02", "CreatedBy": "admin"}, {"Notes": "Updated by: Jhyda Lin[Broadcom Corporation]\nUpdate date: 13-Oct-2015 12:10AM PST\n---------------------------------------------\nDear Chris,\n\nMany thanks for your information! A JIRA [SDK-84796] is submitted to address these two issues. Let us wait for the feedbacks from RD. Thanks!\n\nBest Regards,\nJhyda_Lin.", "CreatedOn": "2017-04-07 13:19:01", "CreatedBy": "admin"}]}, {"Number": "CS1906436", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 01-Apr-2014  3:37PM PST\n---------------------------------------------\nSchematic Reviewed", "CreatedOn": "2017-04-06 03:25:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 02-Apr-2014  5:41PM PST\n---------------------------------------------\nThansk a lot Nishant.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-06 03:25:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 02-Apr-2014  5:48PM PST\n---------------------------------------------\nHi Nishant,\nI cannot see any comments from your side in the file GEARBOX_preview_HSIP.pdf.\nIs there anything wrong?\n\nRegars,\nLaurel", "CreatedOn": "2017-04-06 03:25:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 31-Mar-2014 10:42PM PST\n---------------------------------------------\nNishant,\nAny update?\n\nRegards,\nLaurel", "CreatedOn": "2017-04-06 03:25:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 03-Apr-2014  1:50PM PST\n---------------------------------------------\nHi laurel,\nThere doesn't seem anything wrong, I am again uploading it for you.\nI would suggest you first save the document and then view the inline comments.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:25:25", "CreatedBy": "admin"}]}, {"Number": "CS1904408", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 10-Aug-2015  4:20PM PST\n---------------------------------------------\nHi Yogish,\nI ll send the registers through email. I thought I shared with you once, but will send it again.No worries.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:19:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 19-Nov-2015  4:36PM PST\n---------------------------------------------\nchanging it to resolved", "CreatedOn": "2017-04-06 08:19:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 07-Aug-2015 10:12AM PST\n---------------------------------------------\nHi Yogish,\nCan you try running eye scan on your eval board and scripts we have to deduce what you looking for.\n\nI hope you are in MOdE3 10x10 mode to get Hexacore lanes to work\n\nthanks\nNishant", "CreatedOn": "2017-04-06 08:19:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Yogish Kumar[Broadcom Corporation]\nUpdate date: 07-Aug-2015  6:16PM PST\n---------------------------------------------\nHi Nishnat,\n\nThanks. I have asked Cisco to confirm if they are in Mode3. I am also reviewing their C code. It would help if I can get the Enzo register descriptions. Do you have a document?\n\nRegards,\nYogish", "CreatedOn": "2017-04-06 08:19:01", "CreatedBy": "admin"}]}, {"Number": "CS2288804", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 30-Apr-2015  8:25AM PST\n---------------------------------------------\nMichael, there was a case 769769 about a year ago which was never really resolved.  Is this the same or a related problem?", "CreatedOn": "2017-04-10 00:39:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 11-May-2015  6:40AM PST\n---------------------------------------------\nSo when you look at the line side you see no link in the status register under this condition?\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 17-Jun-2015 11:58AM PST\n---------------------------------------------\nSorry, I didn't see this last update. Can we do the CC tomorrow or Friday?", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 19-May-2015  6:40AM PST\n---------------------------------------------\n1. How to use these interrupts? After initialization, i found value of 0xf483 is 0x00ff. I set 0x00ff to it, and 0xf483 gets cleared to 0. But afterwards, no matter what i do to the link (plugin module, pull fiber), the value of 0xf483 stays 0. I must be missing some step.\n\n2. Pulling the fiber with QSFP on DOES NOT reproduce the issue. We have to unplug the QSFP to see it.\n\n3. We use 4 lanes on each gearbox. For VSR 0-3, CPPI 4-5, we shut off line side RX power. Is there anything else we should shut off?\n\n4. Yes, we have originally tried shutting down line side RX power, and it DOES prevent the issue. However, we don't think this is a feasible solution: by the time we detect the module is removed and tries to shut down rx power, there might be \"garbage\" bytes already generated on the other end.", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 23-Jun-2015  6:57AM PST\n---------------------------------------------\n2PM today should be ok. Sorry for the late response.", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 11-Jun-2015  2:19PM PST\n---------------------------------------------\nDo you have any updates for us regarding this issue?", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 05-May-2015  6:51AM PST\n---------------------------------------------\nNo. We believe they are different. The fragments we see in 769769 happens at link bounce when there is idle traffic. Later we have observed that ixia<->ixia connection has similar issue. And it only applies to 100G.\n\nThis case is on 10G side, and our MAC device (NPU) is constantly receiving bytes.", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 12-May-2015  7:18AM PST\n---------------------------------------------\nAlso it seems that REV C to F have issues with passing remote fault.  We have provided a test firmware that resolves that issue, I wonder if you have tried that firmware in this configuration and does it address this also?\n\nAlso just to be clear that in the 4X10G to 4X10G mode you are in is that the garbage data on the system side is coming on 1 or all of these 4 10G lanes and not any of the other 10G lanes not in this configuration?\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 17-Jun-2015  1:00PM PST\n---------------------------------------------\nI will try to move to next Tuesday as I am booked in the afternoons till then and the AE is in California.\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 23-Jun-2015  7:10AM PST\n---------------------------------------------\n2 PM EDT\n\nWebEx Meeting Number: 925 100 283\nTo start: https://broadcom.webex.com/broadcom/j.php?J=925100283\nMeeting Password: This meeting does not require a password. \n\nIf you are not logged in, log in to your account.\n\nAUDIO CONFERENCE INFO\nTo receive a call back, provide your phone number when you join the meeting, or call the number below and enter the access code.\nCall-in Number(US Only) :+1-949-926-6000\nToll Free             (US Only) :+1-877-827-6232\nAccess code: 925 100 283\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 06-May-2015  4:35AM PST\n---------------------------------------------\nMichael,\n\nI checked into this and found that the 84794 itself creates no data in the stream.  So if you have link on the Receiver, then any data that comes in the RX goes out the TX.  We do not qualify the data in any way.  We only perform the action of a virtual wire and just retime the data.\n\nThat said then in whatever condition this is, you have to go back and look at the actual source this PHY is hooked up to.  Why are we in link state, etc\n\nI am marking this resolved as there is nothing we can do based on your data.  It is not an issue with the 84794 but a more general issue of the system\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 13-May-2015 12:15PM PST\n---------------------------------------------\nGearbox reports no CDR lock. \n\nWe have tried 0xE011 provided by the other CSP case. This problem still occurs. Well, it does make sense, because on this happens on the ingress path. The fix in 0xE011 is to disable egress path reset.\n\n\nFor 4x10 mode, gearbox is configured in 10x10 async mode, and we system side lane 4-7, NPPI lanes 0-3. \nIt has happened on all 4 lanes across different boards.  On the same board, it's always the same lanes sending garbage out of system side.  Usually only 1~2 lanes per gearbox having this issue.\n\nIt's constantly generate garbage, but  rate is not very high, like one some ports one or two fragment of 12 bytes received by NPU in a few seconds,  on some other ports a few fragments received by NPU in a minute;", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 19-Jun-2015  8:44AM PST\n---------------------------------------------\nDavid, is there any more data to collect or questions you would like us answer before the CC on Tuesday? I don't think we have any new info besides what is listed previously.", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 12-Jun-2015  5:30AM PST\n---------------------------------------------\nMichael,\n\nNo I don't have any update.  I had received a response from the factory AE but he didn't account for you initial submittal information.  I pointed that out to him last Friday and asked some follow-up questions.  He has not responded so I have pinged him again.  I will let you know what I find out as soon as I find it out.\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 09-Jul-2015  5:15AM PST\n---------------------------------------------\nI am marking this resolved as there seems to be no questions or feedback from our conference call so assume you have solved your issue\n\nDavid", "CreatedOn": "2017-04-10 00:39:36", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 29-Apr-2015  4:20AM PST\n---------------------------------------------\nMichael,\n\nDo you have the MODABS pin hooked up between the cage and the 84794?\n\nDavid", "CreatedOn": "2017-04-10 00:39:34", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 12-Jun-2015 11:00AM PST\n---------------------------------------------\nCan we have a CC over this issue, next Wed at 2 PM EDT?  If so I will set up a WebEx for  it\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 30-Apr-2015  7:19AM PST\n---------------------------------------------\nHi David,\n\nWe did not connect MODABS nor MODPRSL from the CFP4/QSFP+ cage to BCM84794. Our hw team indicated that there isn't a pin we can connect to on BCM84794.", "CreatedOn": "2017-04-10 00:39:34", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 08-May-2015  1:22PM PST\n---------------------------------------------\nWe have hooked up a scope at the path from QSFP to gearbox RX. The scope detects no signal when the garbage bytes happening.\n\nWe have also tried various resets, different fifo settings provided in the data sheet and nothing fixes the failure. Only thing that fixes the failure is downgrading to microcode 0x000B.\n\nIs there anything you would like us to try? Is there any registers say state machine value that can help us debugging the problem?\n\nWe cannot close the case as it is a real issue for us. We would like get as much professional help from you as possible.\n\nThanks.", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 15-May-2015  5:45AM PST\n---------------------------------------------\nMichael,\n\nYou definitely have the factory scratching their heads on this issue.  Suggestions\n\n1. Can they check the CDR latch status on each lane , may be when they think CDR is not in lock by checking live link statuses, there might be a brief moment when CDR achieves lock with NOISE being amplified by CTLE and getting through.\n\nFor Line side latch Status register\nRead 0xF483   // found and lost Pll lock, sigdet and CDR, read regmap for details.\nIf you want to clear the latch statuses, simply write into register F483 with the value to read back from the register and expect 0 if everything is locked and not flickering.\n\n\nFor System side latch Status register\nRead 0xF480   // found and lost Pll lock, sigdet and CDR, read regmap for details.\nIf you want to clear the latch statuses, simply write into register F480 with the value to read back from the register and expect 0 if everything is locked and not flickering.\n\n\n2. Do you remove the Fiber or the entire module to see this issue?  If only the fiber I would say to completely disconnect the module\n\n3. since you use 8 channels for two 40G ports, did they try to shut off the unused channel and see that makes any difference.\n\n4. if nothing works, then can try powering power down BCM84794 line side Rx if module is not present.  Does that fix the issue?\n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 22-Jun-2015 11:10AM PST\n---------------------------------------------\nHow does 2 PM EDT work?  If it is good, I will set up a WebEx \n\nDavid", "CreatedOn": "2017-04-10 00:39:35", "CreatedBy": "admin"}]}, {"Number": "CS2235159", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Jason Mills[Sandvine Incorporated]\nUpdate date: 1/22/2014 12:11:00 PM PST\n---------------------------------------------\nOops.  I sent this email to support@broadcom.com by mistake.  Please close the case and disregard.", "CreatedOn": "2017-04-09 17:17:33", "CreatedBy": "admin"}]}, {"Number": "CS1703952", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 04-Feb-2014 10:42AM PST\n---------------------------------------------\nCisco has an one more qn on the syncE recovered clock.\n\n1.BCM87974 has only one recovered clock.They want to have one PRI and SEC clock for Synce for my system. Let us take one example. I have either SR10 or LR4 connected with this gearbox and all the lanes are connected to different nodes (my satellite application with multiple line cards). System is up and running and SyncE locked with one of the reference clock. Now if that line has LOS then System SW has to get the indication and has to switch the reference. Because of this delay there will be phase jump for the same. But if the clock is recovered from the Trident2 then you do not have this problem. In that case Gearbox has to transmit the data toward Trident2 without retiming w.r.t. local clock. How it is possible?\n\nAneesh>> Please confirm whether similar to 84793, 84794 can have the following.\n\n1. At Ingress path, GB have clock pass-through mode. So, CAUI output is locked to Line Input.\n2. At Egress path,  Line output is NOT locked to CAUI input. it should be locked externally by giving syncE clock to REFCLK.", "CreatedOn": "2017-04-06 01:47:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 05-Feb-2014  3:22AM PST\n---------------------------------------------\nHi Nishant,\nCould you please update on this. Cisco needs the information urgently.\nFor Qn 4. We have clarified that the AMI model for 84793 can be used for 84794.\n\nPlease clarify 1,2,3 and the syncE qn.\nThanks\nAneesh", "CreatedOn": "2017-04-06 01:47:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Feb-2014 11:47AM PST\n---------------------------------------------\nHello Aneesh, \nPlease see my response below\n\n1.\tAccording to 84793, 84794 datasheet I see the transmitter output swing matching to IEEE802.3ba spec whereas the AMI model , TX swing is min is 0.6V (vs 0.4V PP), Can you clarify if the model is correct and actual transmitter swing is higher than the datasheet value?\nNishant: The AMI model is correct, in datasheet we are indicating that we meet the spec.\n\n2.\tDoes it have CTLE & DFE? can you share the DFE tap details\nNishant: We have CTLE no DFE. the table in the attached doc is giving you the tap values for all peaking filter settings.\n\n3.\tCould you share details on how the CDR acquires lock. I mean what are the horizontal & vertical min threshold of inner eye to declare lock, averaging the eye before declare the lock basically longer wait times possibilities? \n\nNishant: This is a broad and vague question. CDR locking mechanism does not look for inner horrizontal vertical eye, it tracks phase error and adapts to it. \nHow we declare CDR lock is we monitor CDR loop indicator and accumulate the result. If the accumulator over time saturates we declare CDR loss of lock\n\nIf this questions is pertaining our eye monitor feature and what are the vertical and horizontal limits are then please refer to our SWUM eye scan section.\n\n\n4.\tCan I use this model \u201cBRCM_AMI_Enzo_VSR28_v3p2.zip\u201d for 84794?\n\nAneesh>>As per docsafe BRCM_AMI_Enzo_VSR28_v3p2.zip is applicable to 84793/84790 only. There is no additional documentation for 84794. Need a confirmation.", "CreatedOn": "2017-04-06 01:47:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Feb-2014  2:57PM PST\n---------------------------------------------\nAneesh,\nThe AMI model snapshot you sent me is for the VSR28 interface (25G/28G) which has same Tx swing as specified in the datasheet 600mvp_p differential, see table 327 of DS.\nThe 0.4V spec is for the CAUI/XLAUI interface there are separate models avialble for Caui and XLAUI. please take a look at that.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 01:47:50", "CreatedBy": "admin"}]}, {"Number": "CS2290324", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 4/9/2014 6:59:00 PM PST\n---------------------------------------------\nSet to resolved. You can re-open this case if have any problem.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:44:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 3/25/2014 10:00:00 AM PST\n---------------------------------------------\nProcessing. In general, It will take more than 1 week.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:44:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 4/3/2014 6:46:00 PM PST\n---------------------------------------------\nXinrong,\nPls refer to the attached to find review comments.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:44:01", "CreatedBy": "admin"}]}, {"Number": "CS1904420", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 21-Mar-2014  3:27PM PST\n---------------------------------------------\nHi Laurel,\nPlease find attached power break-up. Yes your connections looks fine. We can discuss more during schematic review phase.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:22:40", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 23-Mar-2014  7:05PM PST\n---------------------------------------------\nThanks a lot Nishant.", "CreatedOn": "2017-04-06 03:22:41", "CreatedBy": "admin"}]}, {"Number": "CS2008774", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Dec-2015  5:15PM PST\n---------------------------------------------\nHi Steve,\n\nCan XENA 100G port do 100% line rate with loopback module to itself, with no PHY or Switch involved.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 14-Dec-2015 10:05AM PST\n---------------------------------------------\nGood point.  Let me have them check this register when there isn't an error.  I believe this was taken when they were seeing errors.\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 14-Dec-2015 10:10AM PST\n---------------------------------------------\nHi Nishant,\n\nThey see this same value in this register when they don't see errors as well.\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 17-Dec-2015  9:05AM PST\n---------------------------------------------\nHi Nishant,\n\nAny feedback on how to clear the PLL lock status bit in 0x980a?  It looks like this bit is getting latched low for the good and failing cases.  Is it something I should look into further?\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 09-Dec-2015  8:40AM PST\n---------------------------------------------\nHi Nishant,\n\nThanks for the pointers and help.  Yes if they connect the tester ports back to back without a switch or PHY it works just fine.\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 04-Dec-2015  9:58AM PST\n---------------------------------------------\nHi Nishant,\n\nSome more information:\n\nThey are connecting the BCM84794 to a QSFP28 interface instead of a CFP.  Do you see any problems with doing this?\n\nI confirmed that if they used two different boards with 100G ports interconnected by Sourcephotonics fiber modules, run 64 bytes, 99% line rate, no issue was found.\n\nThis performance issue only was found when one of their 100G ports connected to XENA 100G port with Sourphotonics firber module and the packet length was below 256bytes.\n        \nAny ideas?\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 14-Dec-2015  9:41AM PST\n---------------------------------------------\nHi Nishant,\n\nAll the registers you had us check looked good except register 0x980a.  Even after reading this register multiple times we would always get a value of 0x07fa.   This is showing bit[0] as '0' indicating the PLL has lost lock at some point in time.  Is this bit clear on read or is there a different way to clear this bit?\n\nHere are the value of the rest of the registers:\n\nRead 0Xf483 for line side    0x00FF\nRead 0xF480 for system side    0x003F\nRead 0x9800   0x00FF\nRead 0x980A   0x07FA\n\n\nIndirect Write 0x80b1.2:0 0x0\nIndirect Read 0x80b0.12  ( one means locked)   0xBC00\n\n\nIndirect Write 0x80b1.2:0 0x1\nIndirect Read 0x80b0.5  ( one means signal present)  0x0063\n\n\nIndirect Write 0x80b1.2:0 0x0\nIndirect Read 0x8050.15   ( one means locked)  0xF80A\n\n0xF529: collision live status   0x0000\n0xF642: collision live status    0x0000\n\n\nThanks,\nSteve", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 18-Feb-2016  3:34PM PST\n---------------------------------------------\nHi Steve,\nChanging the status to resolved,please update the case if you anything else to share on this issue.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 09:45:20", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Dec-2015  5:10PM PST\n---------------------------------------------\nHi Steve,\nSounds like a MAC receive issue with external tester, in the topology you explained PHY is simply a wire in the middle and does not care or I should say should not care about packet sizes.\nOne suggestion could be to increase IPG from the tester and see if errors with smaller packet sizes are brought down.\n\nThe fact that smaller packet sizes work fine between two ports and not with ixia , indicates an interaction issue between switch and ixia MACs.\n\n\nTo answer your questions:\n\nIs there any difference when GB process 64bytes/128bytes  and 256+bytes packets?\n\nNo, I don\u2019t expect it to be any different for different packet sizes\n\nDid we test the 84794 with QSFP28 optical LR4 module? if yes, Module PN? Do we have any customer that verified the 84794 with QSFP28 optical LR4 module?\n\nNo, we only tested with passive CFP loopback modules for LR4 and SR10 modes in our labs. There doesn\u2019t exist any BCM84794 eval board with qsfp28 on the line side.\n\nCan we provide the detail process how 4x25G traffic is converted to 10x10G traffic?  Per which spec? Maybe we can find some clue from that since line side loopback is ok.\n\nThere is no spec for gearboxing, line side is VSR compliant and system side is CAUI complaint. Is there a MAC shallow loopback which can be tried, I am not sure if that exists and takes FCS reported by mac counter out of the picture.\n\n\nAlso below are some diagnostics for PHY at register level, not sure if this is going to help in your case but is useful information:\n\nFor a common register check for any lane but won\u2019t indicate which exact lane is faulty.\nRead 0Xf483 for line side\nRead 0xF480 for system side \n \nIf you want to dig deep , For individual lanes , read \n \n1.       Line side receive CDR lock\nFor lanes 0-3 \nRead 0x9800\n \nFor lanes 4-9 (Line side indirect register access, procedure mentioned in the DS)\nIndirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)\n \n2.       Line side Los status\nFor lanes 0-3\nRead 0x980A\n \nFor lane 4-9\nIndirect Write 0x80b1.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)\n \n \n System side CDR lock status (system side indirect register access, procedure mentioned in the DS)\n\nFor each lane \nIndirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)\n \n4.       System side LOS status (indirect register access)\nFor each lane \nIndirect Write 0x80b0.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)\n \n5.       To check system side PLL lock\nFor each lane \nIndirect Write 0x80b0.2:0 0x0\n                Indirect Read 0x8050.15   ( one means locked)\n \n \n\nRX Ingress path: 0xF52A, collision latch high, Bits 9:0 correspond to line side lanes 9:0\n        0xF529: collision live status\n\nTX Egress path: 0xF643: collision latch high; Bits 9:0 correspond to system side lanes 9:0, Bits 13:10 correspond line side lanes 3:0\n       0xF642: collision live status\n\n\n\nAll of the above register details are available in the Datasheet along with procedure to perform indirect register access.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 14-Dec-2015  9:58AM PST\n---------------------------------------------\nHi Steve,\nquick question, is the value you reported same for all packet sizes or only during error case?\n\nThanks\nNishant", "CreatedOn": "2017-04-06 09:45:19", "CreatedBy": "admin"}]}, {"Number": "CS1847249", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 20-Mar-2015 10:36AM PST\n---------------------------------------------\nHi Vivek,\nit's not really a question about what type of connector the chip is capable of supporting, more whether the IL and RL specs match what you are trying to do. Attached are the spec details for a typical QSFP MCB, HCB, and system. In it specs the RL and IL of what the channel needs to be at 5.5GHz. \n\nThe question you need to ask is whether the proposed channel meets the mask described here. Keep in mind that there is NO EDC or DFE on the 84794 front end. Thus, you have no margin and you must verify that the channel is of decent enough quality.\nThanks,\nKK", "CreatedOn": "2017-04-06 06:56:53", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 15-Apr-2015 10:33AM PST\n---------------------------------------------\nSpec Posted and advised that VSR over DAC is a very risky proposition.\n\nNo additional request for about some time now. Please re-open if further inquiries occur.\nThanks,\nKK", "CreatedOn": "2017-04-06 06:56:53", "CreatedBy": "admin"}]}, {"Number": "CS2235112", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 1/22/2014 9:34:00 AM PST\n---------------------------------------------\nFrom internal review of your diagram and description, it is fine to use QSFP and CFP4 to the same gearbox, and use one of those ports at a time.  We suggest this be made very clear again at the time of schematic/design review.  If there is a software support plan at that time it should also be reviewed for proper steps.  Thank you.", "CreatedOn": "2017-04-09 17:16:25", "CreatedBy": "admin"}]}, {"Number": "CS1963796", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 23-Sep-2015  7:07AM PST\n---------------------------------------------\nHi David,\n\nAfter check today.\nThe 0x8067 default value is 0x17f8.\nThe main tap in MAX. value.\nThe eye same as attached file \"eye.png\"\nAnd we can reduce the main tap but cannot increase it.\nCould you kindly help to double check?\n\nBRs\nKaiMing.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Yung Chen[Broadcom Corporation]\nUpdate date: 24-Sep-2015  6:57PM PST\n---------------------------------------------\nDavid,\n\nYes, you answered my question.\nKaiming will give you a diagram showing the setup and where the eye is captured after he co-works with customer. Thanks.\n\nWith best regards,\n\nYung.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 23-Sep-2015 10:32AM PST\n---------------------------------------------\nHi KaiMing,\n\nMain tap is max, so you cannot increase this further.\nwhy do you need to increase main tap though?\neye capture shows that amplitude is large enough. if pre-emphasis is optimized, eye should open up more to clear the eye mask.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 30-Sep-2015  5:20AM PST\n---------------------------------------------\nHi David,\n\nAttached file\"3815D Test environment\" from MSI SI LAB.\nWe focus on HCB board for test.\nWe'll trying differential probe tomorrow.\n\nIf we using differential probe, do we need provided 100R load between TX+ and TX- or DC blocking CAP in TX+/TX-?\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Yung Chen[Broadcom Corporation]\nUpdate date: 17-Sep-2015  2:42PM PST\n---------------------------------------------\nDavid,\n\nI re-assigned this case to you, could you please help on this case? Thanks.\n\nWith best regards,\n\nYung.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Yung Chen[Broadcom Corporation]\nUpdate date: 23-Sep-2015 10:55PM PST\n---------------------------------------------\nDavid,\n\nCould we request customer to use RX eye mask to measure the waveform because this is the fiber transceiver rx waveform? Thanks.\n\nWith best regards,\n\nYung.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 04-Oct-2015  8:01PM PST\n---------------------------------------------\nHi David,\n\nLet's close this case.\nWe using torque wrench to locking all screw and pass the test.\nI enable another new case for SR10.\n\nBRs\nKaiMing.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 18-Sep-2015  2:30PM PST\n---------------------------------------------\nHi KaiMing & Yung,\n\ni'm not sure what the question is.\nregister sequence shown is to access indirectly addressed register 1.8066. user should use bits [13:11] to modify post2 tap settings. 1.8066.[15:14] bits are used in conjunction w/ 1.8067.[2:0] bits to modify post1 tap setting.\nmaintap are controlled by 1.8067.[8:3] bits. refer to pg 148 of 84793-DS06-R on docSAFE.\n\nTable 7 can be misleading since it's difficult to quantify pre & post tap in terms of amplitude. I recommend that customer sweep through combination of control settings. usually 10G link only needs Main & Post adjustments. please keep in mind sum of Main+Post+Post2+Pre should be less or equal to 63 (decimal value).\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 24-Sep-2015  9:29AM PST\n---------------------------------------------\nHi Yung,\n\ni'm not sure i understand your question.\neye is considered to be Near-end (or TX) when you observe it coming off from transmission source board.\neye is considered to be Far-end (or RX) when you observe it after the link channel.\nwhere is the eye capture taken from?\nif you provide a diagram showing the setup and where the eye is captured from then we can discuss which mask is applicable.\n\nregards,\nDave", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}, {"Notes": "Updated by: David Chung[Broadcom Corporation]\nUpdate date: 15-Oct-2015  5:02PM PST\n---------------------------------------------\nmoving to closed per last response.", "CreatedOn": "2017-04-06 08:41:22", "CreatedBy": "admin"}]}, {"Number": "CS1747520", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 29-May-2015 10:26AM PST\n---------------------------------------------\nHi Yogish,\nBelow are my responses to your queries\n\n\n1. Do they really have to update to the latest firmware or can they continue using 000F?\n\nNishant:  I would always recommend to upgrade to latest firmware if possible.\n\n2. They want to know any potential system impacts (positive and negative) of these two changes. Are these to fix a known issue that they may encounter?\n\n\nNishant: \nAs they are inquiring about the two updates mentioned in the release notes , I'll answer it separately:\n\n(1) Add an option to bypass sys Tx reset when line Rx CDR or FIFO status change. This feature must be enabled by setting FW_enable register (0xF427) bit 2 to 1.\n\nWe found a limitation with the 000F firmware \nwhere in an event when line side receives fiber is unplugged, the switch on the System side would receive local fault and in return would generate remote faults.\nIt was observed with Firmware 000F, remote faults generated from the Switch side after propagating through the Gearbox in Egress direction would not be received correctly on the Link partner .\nThis was happening because the moment CDR loses lock on Line side, we would reset egress transmit fifos and mangle remote faults . Hence , We added an optional feature which would allow user to isolate resets of Egress vs Ingress data paths.\n\n\n(2) The line-side peaking filter tuning routines (one time and continuous) no longer run when the line side CDR is out of lock.\n\nThere is no potential issue with this addition, it is more of an optimization than fixing any limitation.\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 07:38:07", "CreatedBy": "admin"}]}, {"Number": "CS1956723", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 21-May-2014  1:26PM PST\n---------------------------------------------\nHi Peter,\nMode4 power rating can be re-used for MODE3 as well \n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:56:14", "CreatedBy": "admin"}]}, {"Number": "CS1744430", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 11-Dec-2014 10:36AM PST\n---------------------------------------------\nHi Ronen,\nAre they using BRCM SDK or their own or someone's else ?\nI would have to check with Switch AE if they can provide the eye scan code which resides in our switch SDK.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:45:49", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 16-Dec-2014 10:50AM PST\n---------------------------------------------\nHi Joe,\n\nCould you please help me with the followup question?\n\n1. Can you give us a sequence how to call these APIs?\n2. Do you have a method to test and get the Eyescan results and then display on serial console automatically?\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 05:45:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Ronen Joseph[Broadcom Corporation]\nUpdate date: 11-Dec-2014 10:58AM PST\n---------------------------------------------\nHi Nishant,\n\nThanks for the prompt response.\n\nTheir board has TD2, but it's connected to non Broadcom NPU, which is connected to the Gearboxes and then to QSFP28.\nSo most likely they use SDK on the TD2 side, but the rest is probably stand alone drivers or whatever.\n\nThey are smart guys, and have used lots of Broadcoms products for years. They will take whatever we give them and make the best use of it.\n\nPlease check with the SW AE and see what you can get.\n\nThanks,\nRonen", "CreatedOn": "2017-04-06 05:45:49", "CreatedBy": "admin"}, {"Notes": "Updated by: Joe Uemura[Broadcom Corporation]\nUpdate date: 17-Dec-2014  3:13PM PST\n---------------------------------------------\nRonen:\n\nIf the customer is using the SDK, the customer should be able to use the diag shell command\n  phy diag <port> eyescan ...\n\n\nFor example:\n\nBCM.0> phy diag xe2 eyescan vertical_min=-30 vertical_max=30 horizontal_min=-30 horizontal_max=30 sample_resolution=2 sample_time=1 u=1 if=line\nEye\\Cross-section Results For Port 3 (with rate 10000):\n\n[VERTICAL]-------------------------------------------------------\n 30-+XXXXXXXXXXXXXXXXWBPBWXXXXXXXXXX|   Description:\n    |XXXXXXXXXXXXXXMD    DMWWXXXXXXX|   =============\n    |XXXXXXXXXXXXXWB     bBMWXXXXXXX|   '+'  Latch\n    |XXXXXXXXXXXWBb        DMWXXXXXX|   '?'  No data\n    |XXXXXXXXXXWMD         PBWWXXXXX|   ' ' BER <10-9\n 20-+XXXXXXXXXWMD           PBWXXXXX|   '.' BER ~10-9\n    |XXXXXXXXXWMP           PBMWXXXX|   'o' BER ~10-8\n    |XXXXXXXXWMD             DBWXXXX|   'b' BER ~10-7\n    |XXXXXXXXWMP             PBMWXXX|   'P' BER ~10-6\n    |XXXXXXXWMD               DMBXXX|   'D' BER ~10-5\n 10-+XXXXXXXWMP               PBWXXX|   'B' BER ~10-4\n    |XXXXXXWMD                 DMWXX|   'M' BER ~10-3\n    |XXXXXXWMP                 DBMXX|   'W' BER ~10-2\n    |XXXXXWMD                   DMWX|   'X' BER >10-2\n    |XXXXXXMB                   DMWX|\n  0-+XXXXXMBb                    DMW|\n    |XXXXXWMD                   PMWX|\n    |XXXXXWMDb                  DMWX|\n    |XXXXXXWMD                 BBWXX|\n    |XXXXXXWMD                 DMWXX|\n-10-+XXXXXXXWMD               PBMXXX|\n    |XXXXXXXWMD               DMWXXX|\n    |XXXXXXXXWMD             bBWXXXX|\n    |XXXXXXXXWMD             PBMXXXX|\n    |XXXXXXXXXWMD           bBMWXXXX|\n-20-+XXXXXXXXXXMDb          PBWXXXXX|\n    |XXXXXXXXXXXWB         PBWXXXXXX|\n    |XXXXXXXXXXXWMP        DMWXXXXXX|\n    |XXXXXXXXXXXXXWBb     BMWXXXXXXX|\n    |XXXXXXXXXXXXXXWD    DMWXXXXXXXX|\n-30-+XXXXXXXXXXXXXXXXWBPBWXXXXXXXXXX|\n    -+----+----+----+----+[HORIZONTAL]\n     |    |    |    |    |    |    |\n     -30  -20  -10   0   10   20   30\nBCM.0> \n\nTo understand how the APIs are being called, please follow the code in the SDK that handles \nphy diag ...eyescan...\n\nThe starting point is the function _phy_diag_eyescan() in src/appl/diag/port.c.\n\nJoe", "CreatedOn": "2017-04-06 05:45:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 11-Dec-2014 11:39AM PST\n---------------------------------------------\nHi Joe,\nCan you please point Ronen with relevant C based eye scan codes for BCM84793. I am asking you because I know we have implemented it in the SDK.\n\nI myself dont have any Stand alone eye scan .c  and only provided vbs scripts in the past.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:45:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Joe Uemura[Broadcom Corporation]\nUpdate date: 12-Dec-2014  1:23PM PST\n---------------------------------------------\nHi Ronen:\n\nThe PHY driver for the 84793 in the SDK has an implementation of 'eyescan'. The file is\nSDK/src/soc/phy/phy84793.c and the functions are   _phy_84793_diag_eyescan_xxx(), e.g.\n\n *  _phy_84793_diag_eyescan_livelink_en    \n *      _phy_84793_diag_eyescan_livelink_clear    \n *  _phy_84793_diag_eyescan_livelink_start    \n *      _phy_84793_diag_eyescan_livelink_stop    \n *      _phy_84793_diag_eyescan_livelink_read \n *      _phy_84793_diag_eyescan_init_voffset_get \n *      _phy_84793_diag_eyescan_hoffset_set \n *     _phy_84793_diag_eyescan_voffset_set \n *     _phy_84793_diag_eyescan_max_left_hoffset_get \n *     _phy_84793_diag_eyescan_max_right_hoffset_get \n *     _phy_84793_diag_eyescan_min_voffset_get \n *     _phy_84793_diag_eyescan_max_voffset_get \n\nThanks!\n\nJoe", "CreatedOn": "2017-04-06 05:45:50", "CreatedBy": "admin"}]}, {"Number": "CS2290338", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 3/25/2014 9:59:00 AM PST\n---------------------------------------------\nXinrong,\nThis part is described in DS. Refer to the loopback section in mode1. \nLoopback is supported on both line andsystem side.\nPls refer to the attached doc for detailed settings.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:44:12", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 4/2/2014 8:30:00 PM PST\n---------------------------------------------\nSet to resolved. You can re-open this case if have any problem\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:44:12", "CreatedBy": "admin"}]}, {"Number": "CS1948608", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 27-May-2015 10:46AM PST\n---------------------------------------------\nHi Aneesh,\nkeep in mind that the PHY has no framer. The Framer exists in the ASIC and thus the PHY is just an extension of the system. If the PHY had a framer, I would agree with you, but this is currently not the case.\n\nThis being a pass-thru Gearbox, the requirement is such that the ASIC and the PHY remain on the same clock. The PHY egress transmitter is referenced off the REFCLK and none other just as has been stated many times in CSP.\nThanks,\nKK", "CreatedOn": "2017-04-06 07:35:47", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 26-May-2015 10:43AM PST\n---------------------------------------------\nHi Anesh,\nhope this answers some of your queries...\nQ 1-A: You can use Mode 4 where the Enzo's 10 lanes are fully indepdent and may be powered down individually. \nQ 1-B: NO, by Cisco Spec the ASIC and the PHY MUST be on the same reference. There is no Recovered Clock Mode for the Egress path.\nQ 2: Please clarify what you mean? We simply test that the mode works in terms of frequency (input reference clock). That is, the data's baud rate and subsequent PLL's. If you are asking for higher level testing, that responsibility lies on the switch team. \nQ 3: 20PPM shouldn't be an issue. Errors if any however, should show up on 1.F409.0/1.\nQ 4: Can only give 3 Dec digits, in your case it's 167.332MHz. But you can easily find the number by taking the base bandwidth and dividing by 64 or 66.\nQ 5: Unfortunately, there is no Loopback at the AFE boundary of the Line Side or System Side.\nQ 6: Shall check w/ Nishant.\n\nThanks,\nKK", "CreatedOn": "2017-04-06 07:35:47", "CreatedBy": "admin"}]}, {"Number": "CS1704059", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 23-Feb-2015  4:33PM PST\n---------------------------------------------\nthese are Outputs", "CreatedOn": "2017-04-06 04:54:51", "CreatedBy": "admin"}]}, {"Number": "CS2272277", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Tom Crugnale[Sandvine Incorporated]\nUpdate date: 15-Sep-2015 10:00AM PST\n---------------------------------------------\nCan I be granted access to the stand alone API you have mentioned?\n\nThanks\nTom", "CreatedOn": "2017-04-10 01:27:23", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 05-Oct-2015  6:32AM PST\n---------------------------------------------\nI have requested the 82790 API 2.8.2 be added to your Docsafe account.  \n\nI am closing this request.  If you have additional questions on the 82790 API please open a new CSP case for these questions\n\nDavid", "CreatedOn": "2017-04-10 01:27:23", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 15-Sep-2015  9:26AM PST\n---------------------------------------------\nHi.  The switching SDK doesn't support this part yet.  Full SDK would only be applicable if used with a Broadcom switch.  Is that your application?  If this is a standalone application, such as with an NPU, the part is supported by its own standalone API package (which eventually is integrated into the SDK).\n\nWe can check on schedule for that package.  A representative package is Stand_Alone_APIs_2_8_2.zip which can be requested for you via docSafe.", "CreatedOn": "2017-04-10 01:27:23", "CreatedBy": "admin"}]}, {"Number": "CS2299206", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 10/24/2014 6:35:00 AM PST\n---------------------------------------------\nHi Xinrong,\nThe maximum junction temperature is 110 degree.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 06:25:02", "CreatedBy": "admin"}, {"Notes": "Updated by: Xinrong Lu[Coriant GmbH]\nUpdate date: 10/26/2014 6:39:00 PM PST\n---------------------------------------------\nHi Laurel,\nIs 110c for commercial or industrial version?\nor both?\nThanks.", "CreatedOn": "2017-04-10 06:25:02", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 12/15/2014 10:49:00 PM PST\n---------------------------------------------\nJunction temp is the same.", "CreatedOn": "2017-04-10 06:25:02", "CreatedBy": "admin"}]}, {"Number": "CS1760510", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 17-Nov-2014 12:28PM PST\n---------------------------------------------\nHi peter,\nis this still open ? This completely slid under the radar,re-open the case if you are still looking for a resolution.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 04:18:22", "CreatedBy": "admin"}]}, {"Number": "CS2279800", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 22-May-2014  1:02PM PST\n---------------------------------------------\nJust more FYI, it sounds like NP5 as currently implemented doesn't provide true RMON counters as you would typically find in the MAC of a switch.  There is usually enough data in raw counters to distinguish the good counts from the bad counts.  Assuming you don't have any flexibility in the NP5 (do you?) you basically need to be able to disable the transmitter and/or receiver during idle time between packets, and guarantee the operation completes within the idle time.  It would have to be a controlled and graceful disable function.\n\nIf you are not transmitting or receiving packets (that is, the line-side is idle) and you disable the transmitter or receiver, do you see the garbage bytes?  Does this occur only if there are packets in-flight at the time?\n\nA possible system-level solution, without actually knowing your system, might be to disable the MAC Tx and/or Rx before you disable the phy.  That way you would not be counting on the receiver and you'd have control of what was going out on the transmitter.", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 20-May-2014  1:40PM PST\n---------------------------------------------\nWe are re-opening this CSP case as we have tested this with NP5 phase 2 chip.\n\nReproduce Step (toggling Rx line side power):\n   Set f450 to 0x000f\n   Toggle f451 between 0x0000 and 0x000f\n\nAfter the toggling, np5 will report 0~10 undersize bad frames when np5 tries to identify the garbage bytes.\n\nWe re-open this CSP to discuss the issue.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 17-Jun-2014 11:24AM PST\n---------------------------------------------\nCustomer added the following notes via out-of-band email:\n---\n\nWe have a question that\u2019s with the theme of this ticket that we put in and we\u2019d like to discuss this during the meeting today. \n\nJust a refresher on our setup:\n\nNPU <---> BCM84794 <----> CFP2\n\nCFP2 is looped back to itself externally, so NPU is just linked to itself here. \n\nNPU has a serdes auto-tune feature for picking optimal RX parameters like DFE coefficients and phase alignment. We\u2019re finding that when we run auto-tune we see the byte counters go up at NPU RX. We realize that this is probably something specific to the NPU device, just want to get your opinion on this. Would you expect to see the counters go up at NP5 RX when running something like auto-tune? Would KR CL73 result in something like this? So far we\u2019ve been seeing the byte counters go up when the link is toggled, is it expected that the link could flap when running this sort of auto-tuning?", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 13-Mar-2014  1:48PM PST\n---------------------------------------------\nThis is not a known issue on BCM84794.\n\nCan you identify the actual bytes that are received by the NPU?\nAs I interpret your divide-and-conquer debug steps, the conclusion is that the 84794 line-side transmitter connection to the CFP2 is the source of the extra data.  Is that also your conclusion?\nDo you get any different results if you use the global disable (bit 0) in IEEE_PMD_TRANSMIT_DISABLE register rather than 10 individual lane disable bits?\nHow, if at all, is this related to case 740841?  There it is mentioned what is expected on return of data, but there is no mention of what is actually being received.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 26-May-2014  7:46AM PST\n---------------------------------------------\n1. The bytes are counted as bad undersized frames. So  it cannot distinguish between these bytes and real bad frames.\n\n2. We do these bytes while the link is idle. Actually we haven't tried this with traffic.\n\n3. We cannot disable tx/rx at mac level on npu. Is there any other suggestion?", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 22-May-2014  6:35AM PST\n---------------------------------------------\nThe \"reproduce step\" wasn't mentioned before.  Is this consistent with the way test was run previously?\nWhat was the prior NP5 (NP5 phase 1?), just to get the names straight?\nYou were previously treating the extra garbage bytes as error frames.  Isn't that the same as is being done here?  Unclear what is different about these results than previously.  Please elaborate.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 22-May-2014  8:56AM PST\n---------------------------------------------\n1. NP5 Phase1 Chip does not have CRC checking. The bytes received by NP5 Phase 1 can be get re-transmitted. NP5 Phase 2 Chip DOES have CRC checking. So we have hoped NP5 Phase 2 Chip will solve our problem as it drops the bytes. And as a result NP5 Phase 2 Chip does drop the bytes, but they are counted as undersized bad frames, and they are counted in received bytes, which is a problem to us.\n\n2. The testing with NP5 phase 2 Chip was done with both Finisar CFP2 (a 4x25 module), and Multilane (10x10  passive copper loopback module). The problem occurs with both types of module.\n\n3. The \"reproduce step\" is not the same with the test was run previously. We used to disable/enable line side Tx. Currently we disable/enable line side Rx power. We were expecting disabling/enabling Rx power would stop gearbox receiving these bytes, but it is not.\n\nOur requirements are:\n1. We should not transmit unknown bytes out of the CFP2/CFP4 to customer\n2. We should not count these \"unknown\" bytes (we kinda know they are from gearbox) in our NP5 counters.\n\nWhat is the recommended sequence to disable/enable the gearbox line side link? Controls available are: gearbox line side tx transmit, tx power, rx power, IO(CFP2/CFP4) TX. Are we doing the wrong procedure that causing the unknown bytes?", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 10-Jun-2014 11:38AM PST\n---------------------------------------------\nNPU<---> BCM84794 <---> CFP2 <---> IXIA\n\nWe performed the following test to capture the bytes:\n1. Turn down gearbox line side rx power\n2. Turn up gearbox line side rx power\n3. Send one packet (same packet) from npu, receive by ixia\n4. Do 1-3 1300 times.\n\nWe observe that:\n1. All the packets sent out from npu are received by IXIA (no truncated)\n2. The largest garbage bytes found is 73 in bytes\n3. 17 of the garbage bytes contain valid ethernet header, they are truncated from the normal packet npu sent.\n4. Rest of the garbage bytes are fairly random, they don't seem duplicate part of the normal packet.\nWe are trying to locate the source of the bytes:\n1. How big is the buffer/fifo in Gearbox? Is it capable of sending garbage of a size like 73 bytes?\n2. How to clear the buffer in Gearbox (instead of flushing everything out)? We want to try this to rule out Gearbox is the source", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Jun-2014  9:28AM PST\n---------------------------------------------\nI believe we discussed this case on the more recent weekly call, and there was going to be one more update before marking resolved.  Please confirm.", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 12-Jun-2014  6:44AM PST\n---------------------------------------------\nWhile I look at the two questions, please clarify some points for me.  This test as described sends in one direction from NPU to Ixia, yet there are bytes (garbage) being received at the NPU.  Is that correct?  Do you have visibility as to when these are received?  That is are the bytes received randomly within the time that 1300 packets are sent?  Are they at the beginning (possibly seen before transmitting packets, or seen when transmitting only a small number of packets?)  From the description there should not be any packets received at the NPU (transmit only), so a reasonable assumption is there are bytes received only as a result of having powered down/up the receiver.  Hence your suggestion to look at manually flushing the receiver.  Do I have this correctly interpreted?", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 01-Apr-2014 11:11AM PST\n---------------------------------------------\nCustomer is testing workaround based on understanding of the behavior from last week's call.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 27-May-2014 10:42AM PST\n---------------------------------------------\nAgain, just thinking of how to solve the general system problem, since you know these counts are incrementing as a result of the specific transmitter/receiver programming, can you clear the counts in software?  It doesn't seem there is a way to avoid the spurious bytes.  The behavior of the phy hasn't changed, but the way the MAC is interpreting them seems to have changed slightly from one version to the next.", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 18-Mar-2014 11:36AM PST\n---------------------------------------------\nWe tested just use the global bit, the bytes still happen.\n\nWe use a new setup today to capture the bytes. Ixia has counters and captures\n\nNPU<---> BCM84794 <---> CFP2 <---> IXIA\n\n\n\nToggle global 0x1->0x0\nRun 1: 3 fragments\n17Bytes 6F 03 4E 7C 19 D7 0B 00 1C FF 50 5A BB F0 B4 E3 6D\n1Byte E4\n1Byte E4\n\nRun 2: 6 fragments\n1Byte 37\n1Byte 18\n1Byte 18\n1Byte 37\n9Bytes 6F F6 9E 33 F6 6F FA 98 99\n8Bytes 6F F6 9E 33 F6 6F FA 98\n\nToggle 0x7fe->0x0\nRun 1: 3 Fragments\n1Byte A1\n8Byte E3 4A 7C BF 0C 56 C4 97\n1Byte 2B\n\nRun 2: 1 fragments\n1Byte 1E", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 22-May-2014  6:40AM PST\n---------------------------------------------\nDoes the CFP module have a retimer inside?  If so, do you have a module that is completely passive?  To collect more information, does the test behave any differently with that combination?", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 11-Dec-2014  7:12AM PST\n---------------------------------------------\nInactive for five months.  Resolving.", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 08-Apr-2014 11:10AM PST\n---------------------------------------------\nCustomer is now treating these packets as error frames, and appropriately dropping them at their MAC/NPU.  Based on today's status call we are resolving this one.  Thank you for the update.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 20-Mar-2014  9:38AM PST\n---------------------------------------------\nSince these extra bytes are just fragments, is this really a problem?  If you were using a simple RJ45 ethernet connection, and you removed a cable, or powered-down a transmitter, you could easily observe something similar as the signal degraded.  Before looking for a source of the data, please let us know if this causes actual problems for any link partners.  A fragment should normally be discarded by a receiving device.", "CreatedOn": "2017-04-09 18:04:36", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 12-Jun-2014  6:57AM PST\n---------------------------------------------\nDuring the test described, is there any programming of the I/O module itself?  What if anything are you able to control to isolate/eliminate the module as the source of superfluous bytes?", "CreatedOn": "2017-04-09 18:04:37", "CreatedBy": "admin"}]}, {"Number": "CS2250299", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Shawn Collier[Broadcom Corporation]\nUpdate date: 11-Jan-2016  7:48AM PST\n---------------------------------------------\nClosing stale case.", "CreatedOn": "2017-04-10 01:27:23", "CreatedBy": "admin"}]}, {"Number": "CS1852223", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 01-Jun-2015  3:13PM PST\n---------------------------------------------\nHi KaiMing,\nOverall looks good - I'm assuming the symbol has been checked since you've already done a precursory review.\n\nIn any case, my only comments are as follows:\n1. Since there is no PHY address, I'm assuming MDIO_A/B/C/D are totally separate busses?\n2. All analog supplies are to have an INDUCTOR. Using Ferrites even at 100MHz shall NOT do. \n3. Is the Oscillator and Clock Buffer up to standard? < 50kHz -> 0.25ps RMS, otherwise 1ps RMS.\nThanks,\nKK", "CreatedOn": "2017-04-06 07:36:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Kaiming Chen[Avnet Asia Pte Ltd]\nUpdate date: 03-Jun-2015  1:29AM PST\n---------------------------------------------\nHi KK,\n\nThanks for your help.\nSet to closed.\n\nBRs\nKaiMing", "CreatedOn": "2017-04-06 07:36:53", "CreatedBy": "admin"}]}, {"Number": "CS2442721", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 1/26/2016 6:32:00 PM PST\n---------------------------------------------\nHi Steve,\n     We still didn't fix the issue, we considered it is a compatible issue between Ezchip NP5, SP 00G LR4 module and XENA tester, we are working with Ezchip.\n\nThanks \nKyle", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/10/2015 9:55:00 AM PST\n---------------------------------------------\nHi Kyle,\n\n\nSee below for answers to your questions....\n\n\n\nNeed you confirm ,about item 4&5, Indirect write should be 0x80b1, not 0x80b0, right?\n\n[STEVE]  Yes you should write to 0x80b1 instead of 0x80b0.  Sorry for the confusion.\n\n\n   we also check BCM84794 gearbox status registers, please help check. we can't confirm 0x980A PLL status.\n\n\n[STEVE]  Please read register 0x980a multiple times.  In a working case bits[1:0] should be '11' as these are active low if there is an error.  Bit[0] is a latched low signal.\n\n\nAll other registers looked correct.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/1/2015 12:25:00 PM PST\n---------------------------------------------\nHi Kyle,\n\nOk thanks for the answers.   When you say the clock for the NP5 and BCM84794 is the same do you mean they are synchronized from the exact same source?\n\nThanks,\nSteve\u00a0", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/3/2015 7:44:00 PM PST\n---------------------------------------------\nHi Steve,\n     There have 4 100G QSFP28 ports on NPX board, two qsfp28 ports connected to NP5A by gearbox BCM84794, and another two 100G ports connected to NP5B, NP5A and NP5B connect to fabric switch BCM56850.  I attached NPX 100G connection diagram for you.\n     I also attached the traffic test setup.  \n    1.NPX  two 100G ports connected directly by Sourcephotonics fiber modules\n    2. NPX two 100G ports connected to XENA tester. \n     please see attached file for the connection.\n     Test result as followed:\n     1. If Sourcephotonics module connected to XENA test directly, run 64bytes 99% line rate, 16 hours, no FCS and package drop was found.\n     2. If Sourcephotonics module connected NPX any two 100G ports (we have 4 100G ports on NPX board, 1/1, 1/3, 1/5, 1/7) directly, through RTM port run traffic, 64 bytes, 99% line rate, no issue was found.\n\t 3. NPX board one 100G port connected to XENA tester one 100G port, did Gearbox line side loopback, run 64bytes, 99% line rate, no issue was found.\n\t 4. Used two NPX boards, 100G ports interconnected by Sourcephotonics fiber modules, run 64 bytes, 99% line rate, no issue was found.\n\t 5. This performance issue only was found when NPX 100G ports connected to XENA 100G port, package length below 256bytes.\n\t \n\t I also attached test setup picture for you.\n\t Could you help to advise BCM84794 related registers check?", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 1/27/2016 8:15:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nI also agree with your assessment as well.  I'll resolve this case for now.\n\nThanks,\nSteve\n\u00a0\u00a0\u00a0", "CreatedOn": "2017-03-31 01:42:30", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/3/2015 9:37:00 PM PST\n---------------------------------------------\nHi Steve,\n    When NPX 100G port conected to XENA tester 100G port, run 64 bytes packages, 99% line rate, we met many FCS and package drop(about 1000)  in a short time( about 10 seconds).\n    We check the latest BCM84794 datasheet ver. 04,  can't found it support 100G QSFP28 interface description. only found 100G CFP module,could you confirm this?\n    We also checked reference clock frequency and ppm, no exceed BCM84794 requirment.", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/13/2015 10:40:00 PM PST\n---------------------------------------------\nHi,Steve,\n   We reflashed and read register 0x980a mutiple times, still got 0x07FA value, we also checked 40G mode and 100G mode(good performance condition) register vaules, they are same.", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/1/2015 10:53:00 PM PST\n---------------------------------------------\nHi Steve,\n     NPX NP5 and BCM84794 clock comes from one clock buffer LMK00308, I attached the clock distribution schematic.", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/9/2015 9:15:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nAt this point there really is no evidence that this issue is caused by the PHY.  It really seems to indicate an interoperability issue between the MAC receive side and the external tester.   They PHY is simply a wire in the middle and isn't even aware of packets, so it's functionality should be impacted by packet size.\n\nOne suggestion could be to increase IPG from the tester and see if errors with smaller packet sizes are brought down.\n\nThe fact that smaller packet sizes work fine between two ports and not with ixia , indicates an interaction issue between switch and ixia MACs.\n\n\nTo answer your questions:\n\nIs there any difference when GB process 64bytes/128bytes  and 256+bytes packets?\n\n[BRCM] No, I don\u2019t expect it to be any different for different packet sizes\n\n\nDid we test the 84794 with QSFP28 optical LR4 module? if yes, Module PN? Do we have any customer that verified the 84794 with QSFP28 optical LR4 module?\n\n[BRCM] No, we only tested with passive CFP loopback modules for LR4 and SR10 modes in our labs. There doesn\u2019t exist any BCM84794 eval board with qsfp28 on the line side.\n\n\nCan we provide the detail process how 4x25G traffic is converted to 10x10G traffic?  Per which spec? Maybe we can find some clue from that since line side loopback is ok.\n\n[BRCM]  There is no spec for gearboxing, line side is VSR compliant and system side is CAUI complaint. Is there a shallow loopback on the NP5 which can be tried?  I am not sure if that exists and can take FCS reported by mac counter out of the picture.\n\n\n\nAlso below are some diagnostics for PHY at register level, not sure if this is going to help in your case but is useful information to confirm the PHY is operating properly without any errors:\n\nFor a common register check for any lane but won\u2019t indicate which exact lane is faulty.\nRead 0Xf483 for line side\nRead 0xF480 for system side \n \nIf you want to dig deep , For individual lanes , read \n \n1.       Line side receive CDR lock\nFor lanes 0-3\nRead 0x9800\n \nFor lanes 4-9 (Line side indirect register access, procedure mentioned in the DS) Indirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)\n \n2.       Line side Los status\nFor lanes 0-3\nRead 0x980A\n \nFor lane 4-9\nIndirect Write 0x80b1.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)\n \n \n System side CDR lock status (system side indirect register access, procedure mentioned in the DS)\n\nFor each lane\nIndirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)\n \n4.       System side LOS status (indirect register access)\nFor each lane\nIndirect Write 0x80b0.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)\n \n5.       To check system side PLL lock\nFor each lane\nIndirect Write 0x80b0.2:0 0x0\n                Indirect Read 0x8050.15   ( one means locked)\n \n \n\nRX Ingress path: 0xF52A, collision latch high, Bits 9:0 correspond to line side lanes 9:0\n        0xF529: collision live status\n\nTX Egress path: 0xF643: collision latch high; Bits 9:0 correspond to system side lanes 9:0, Bits 13:10 correspond line side lanes 3:0\n       0xF642: collision live status\n\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 11/30/2015 3:55:00 PM PST\n---------------------------------------------\nHi Kyle,\n\n\n\nIf this issue only exists with Sourcephotonics module, and doesn't exist with Finisar why do you think there is something wrong with the BCM84794?   Have you contacted Sourcephotonics to see why they module doesn't perform the same as the Finisar module?\n\n\n\n\n\nIs the reference clock used by the NP5 and the BCM84794 coming from the exact same source?  This is a requirements for the BCM84794.  Here\u2019s the documentation that show\u2019s this requirement found in 84793-HWUM101-R:\n\n[cid:image003.png@01D11229.CDBD9D50]\n\n\n\n\n\nIf the issue only occurs with packets smaller than 256 bytes I don't believe this has anything to do with tuning the interfaces.  This sounds more like a logical problem to me.\n\n\n\n\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 11/26/2015 1:09:00 AM PST\n---------------------------------------------\nHi,\n    Do you have any update for this issue?\n\nThanks", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Andy Lengyel[Quest-Rep Inc]\nUpdate date: 12/3/2015 10:27:00 AM PST\n---------------------------------------------\nHi Steve,\n\nCan you please help provide some additional feedback ASAP? Here are some additional questions from Radisys that might help work towards a resolution:\n\nIs there any difference when GB process 64bytes/128bytes  and 256+bytes package?\n\nDoes BCM test this GB with QSFP28 optical LR4 module? if yes, Module PN? Any BCM customer verified this GB with QSFP28 optical LR4 module?\n\nCan BCM provide the detail process how 4x25G package convert to 10x10G package?  Per which spec? Maybe we can find some clue from that since line side loopback is ok.\n\nThanks!\nAndy", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 12/10/2015 12:46:00 AM PST\n---------------------------------------------\nHi Steve,\n   We added 100G tester IPG from 20bytes to 776 bytes when run 64bytes traffic, the test result seems that more worse. we got more FCS and package drop when addded IPG.\n   we also check BCM84794 gearbox status registers, please help check. we can't confirm 0x980A PLL status.\n   Need you confirm ,about item 4&5, Indirect write should be 0x80b1, not 0x80b0, right?\n   \n   For a common register check for any lane but won\u2019t indicate which exact lane is faulty.\nRead 0Xf483 for line side    0x00FF\nRead 0xF480 for system side    0x003F\n\nIf you want to dig deep , For individual lanes , read \n\n1.       Line side receive CDR lock\nFor lanes 0-3\nRead 0x9800   0x00FF\n\nFor lanes 4-9 (Line side indirect register access, procedure mentioned in the DS) Indirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)\n\n2.       Line side Los status\nFor lanes 0-3\nRead 0x980A   0x07FA\n\nFor lane 4-9\nIndirect Write 0x80b1.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)\n\n\n System side CDR lock status (system side indirect register access, procedure mentioned in the DS)\n\nFor each lane\nIndirect Write 0x80b1.2:0 0x0\n                Indirect Read 0x80b0.12  ( one means locked)   0xBC00\n\n4.       System side LOS status (indirect register access)\nFor each lane\nIndirect Write 0x80b0.2:0 0x1\n                Indirect Read 0x80b0.5  ( one means signal present)  0x0063\n\n5.       To check system side PLL lock\nFor each lane\nIndirect Write 0x80b0.2:0 0x0\n                Indirect Read 0x8050.15   ( one means locked)  0xF80A\n\n\n\nRX Ingress path: 0xF52A, collision latch high, Bits 9:0 correspond to line side lanes 9:0\n        0xF529: collision live status   0x0000\n\nTX Egress path: 0xF643: collision latch high; Bits 9:0 correspond to system side lanes 9:0, Bits 13:10 correspond line side lanes 3:0\n       0xF642: collision live status    0x0000\n\t   \n\t   Anyway, thanks for help, we also will check the issue with XENA tester vendor.", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 1/26/2016 9:23:00 AM PST\n---------------------------------------------\nHi Kyle,\n\nWhat is the status on this issue?\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Kyle Fu[Radisys Corporation]\nUpdate date: 11/30/2015 9:57:00 PM PST\n---------------------------------------------\nHi Steve,\n     We have not Finisar 100G-LR4 module, only have Finisar 100G-SR4 fiber module. So they are different 100G interface options.\n     About the clock, They are same for NP5 and BCM84794.\n     Anyway, thanks for your feedback.", "CreatedOn": "2017-03-31 01:42:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Steve Smith[Broadcom Corporation]\nUpdate date: 12/3/2015 4:40:00 PM PST\n---------------------------------------------\nHi Kyle,\n\nI'm checking into these additional questions Andy posted in the case.\n\nFrom reviewing the history of this case you mentioned that you connected two NPX ports with the Sourcephotonics modules, and you could reproduce the issue correct?  Were these two ports on the same NPX system using the same reference clock?  What happens if you connect two NPX ports from two different systems that are using different reference clocks?  Can you reproduce the issue then?  \n\n\nI'm trying to understand why you are able to reproduce the issue when using a tester, but not if you connect two NPX systems together.\n\nThanks,\nSteve", "CreatedOn": "2017-03-31 01:42:29", "CreatedBy": "admin"}, {"Notes": "Case automatically closed priority 2 cases after 3 Weeks in the Resolved state.", "CreatedOn": "2017-05-20 14:44:59", "CreatedBy": "system"}]}, {"Number": "CS1791083", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Mar-2014  6:44PM PST\n---------------------------------------------\nYes Peter,\nplease use 000D from docsafe . It is the latest version.\nDo you how and why customers/You are specifically requesting for 00A ?\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:13:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 05-Mar-2014  6:56PM PST\n---------------------------------------------\nCustomer was apparently never setup to receive microcode.  They were only made aware of 000A by reading 8479X-TI100, which is apparently now out-of-date relative to new releases 000B, 000C, and 000D.  I've asked the Sales Rep to get them the newer released versions through docSafe and to request they be setup to receive future versions.\n\nThank you for helping me get to the bottom of this one.  We can resolve this case.", "CreatedOn": "2017-04-06 03:13:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 06-Mar-2014  1:08PM PST\n---------------------------------------------\nAppropriate dosSafe requests have been submitted.", "CreatedOn": "2017-04-06 03:13:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 05-Mar-2014  3:03PM PST\n---------------------------------------------\nHello Peter,\nAny uCode labeled \u201cD\u201d is considered \u201cdevelopment code\u201d and thus not advised for release unless under special circumstances.\nI can email you the 00A microcode for you to try, but the reason why it is not available is because our latest microcode is version 00D and is available on Docsafe under BCM84793.\n\nPlease request customers to use 000D published on docsafe. I will open a ticket with SDK team on why the latest ucode did not make to the sdk 6.3.5 \n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:13:57", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 05-Mar-2014  6:15PM PST\n---------------------------------------------\nI have no way to \"try\" this microcode.  It is for delivery directly to customer for them to try, so must be via docSafe.  Apparently I don't understand the numbering scheme.  Released documentation in 8479X-TI100 states that production microcode is 000A.  Is it that we have gone past 000A, to 000B, to 000C, and now we are on 000D?  The SDK still contains D00X code, so I assume that is simply way out of date.  Is that correct?  If so, then I will instruct customer to use 000D from docSafe as the latest released.  Does that make sense?  Thanks.\n\nThe docSafe file appears to be E0CA40A1FFFF4790_000D.zip.  Is this correct?", "CreatedOn": "2017-04-06 03:13:57", "CreatedBy": "admin"}]}, {"Number": "CS2259369", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 07-Nov-2014 12:28PM PST\n---------------------------------------------\nCan you get the release notes from D to E as well?", "CreatedOn": "2017-04-09 20:13:27", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 07-Nov-2014 12:29PM PST\n---------------------------------------------\nCan we get the release notes from D to E as well? \n\nWe would like to get the 000E.bin too if possible.\n\nThanks", "CreatedOn": "2017-04-09 20:13:27", "CreatedBy": "admin"}, {"Notes": "Updated by: Michael Marchetti[Sandvine Incorporated]\nUpdate date: 07-Nov-2014 12:30PM PST\n---------------------------------------------\nNever mind. I see the change is from D to F. Sorry I was reading carefully enough. I'll close the CSP", "CreatedOn": "2017-04-09 20:13:27", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 07-Nov-2014 10:11AM PST\n---------------------------------------------\nThe release notes are inside the E0CA40A1FFFF4790_000F.zip file on docSafe (along with the bin file).  Note that releases skipped from 000D to 000F.", "CreatedOn": "2017-04-09 20:13:27", "CreatedBy": "admin"}]}, {"Number": "CS2449970", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Resolving unless there is something new to this case....", "CreatedOn": "2017-10-30 17:47:19", "CreatedBy": "00936368"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 9/19/2016 1:54:00 PM PST\n---------------------------------------------\nHi Chris,\nquite honestly, if your mode is set correctly and you don't see signal detect, it's really difficult to blame the PHY. No matter what mode it's in, if the lanes are enabled, it should see a signal greater than 50mV or there abouts. Thus, if the bit is NOT set, there is clearly NOTHING on the line. \n\nYou can also try \"Mode 4\" on Table 8 to see if the same issue persists. If it does, then you may want to look at the transmitter into this port. Is it really sending something?\nPerhaps try PRBS?\nThanks,\nKK", "CreatedOn": "2017-03-30 13:57:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Kai Yang[Broadcom Corporation]\nUpdate date: 9/7/2016 10:13:00 AM PST\n---------------------------------------------\nHi Chris,\nwhat you are looking for is in Table 8 on the current datasheet. What you have here is actually pretty correct. \n\nCall write(1, &HF404, &H0005&)\nCall write(1, &HF403, &H000A&)\n\nBut please trigger a reset after setting the mode:\nCall write(1, &HF439, &H001D&)\nCall write(1, &HF439, &H0019&)\nCall write(1, &HF439, &H001D&).\n\nKeep in mind however, that you cannot run ASYNC on this chip. The Trident and the PHY MUST be on the same clock to work correctly.\nThanks,\nKK", "CreatedOn": "2017-03-30 13:57:28", "CreatedBy": "admin"}, {"Notes": "System automatically closed this priority 2 case after 3 weeks in the Resolved state.", "CreatedOn": "2017-10-29 15:37:15", "CreatedBy": "system"}, {"Notes": "Updated by: Chris Zhu[Comtech Broadband Corporation Limited]\nUpdate date: 9/8/2016 7:35:00 PM PST\n---------------------------------------------\nHi Kai,\n     Customer's issue aslo exists,so I reopren this case.\n    We checked  your answers and SDK API setting are alsmost the same.\n\n    We used  two methods to debug\n    (1)SDK API+ config in manual to set registers\n    (2)Only config in manual to set registers\n\n     The resluts are the same  and not expected:lane4~9 TX(RX )signals are also not detected?ere\n    Are thres soremething missed or incorrect?\n\n    More TX  lanes connection and  swapping,pls see attached:BCM56850---84794---CFP2  TX lanes.docx.\n\n   Also need your kindly advise on this issue.\n\nThanks,\nChris", "CreatedOn": "2017-03-30 13:57:28", "CreatedBy": "admin"}, {"Notes": "System automatically closed this priority 2 case after 3 weeks in the Resolved state.", "CreatedOn": "2017-11-21 16:00:24", "CreatedBy": "system"}, {"Notes": "Updated by: Bao Lenguyen[Broadcom Corporation]\nUpdate date: 9/7/2016 9:23:00 AM PST\n---------------------------------------------\nHi Chris,\n\nI am reassigning to BCM84794 support team.  They will help you.\n\nBao..", "CreatedOn": "2017-03-30 13:57:28", "CreatedBy": "admin"}, {"Notes": "Updated by: Chris Zhu[Comtech Broadband Corporation Limited]\nUpdate date: 9/17/2016 8:13:00 PM PST\n---------------------------------------------\nHi Kai,\n    Aslo  need your help on this issue.\n   Any update for  it?\n    \n\nThanks,\nChris", "CreatedOn": "2017-03-30 13:57:28", "CreatedBy": "admin"}]}, {"Number": "CS1705768", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Rick Muse[Broadcom Corporation]\nUpdate date: 31-Mar-2016  9:26AM PST\n---------------------------------------------\nHi Nishant,\n\nThe customer is asking for an update on this.  Do you have input?\n\nThanks,\nRick", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Gang Qiu[Broadcom Corporation]\nUpdate date: 07-Apr-2016  3:12PM PST\n---------------------------------------------\nHi Rick,\n\nI think your answer to Q1A is correct. This is really the AMR for the DC level limit.\nfor Q1B. my previous answer of Q1 is more for this.  The key point is customer shown AC output signal, but compared to DC level specification.This is not a valid comparison, i believe.\n\nThanks\nGang", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Rick Muse[Broadcom Corporation]\nUpdate date: 11-Apr-2016  6:39AM PST\n---------------------------------------------\nHi Gang,\n\nSome followup questions from Cisco:\n\nFor 1b, the customer had external AC caps on this net as well.  The datasheet says that it these nets are  \"AC coupled internally\" and \"Internal differential 100-ohm termination\".   They will remove the AC coupling caps and verify the voltage levels.\n\nFor #2), Are you recommending that we buy/rent the Kesight E5052V SSA Signal Source Analyzer to confirm the jitter on our clock input? The clock vendor indicates that we will meet this requirement, but for design verification we would like to confirm this in the lab. We have a lecroy labmaster that I can measure down to the 0.26ps with a PLL setting. How do your other customers typically verify the input jitter if they don't have the Kesight E5052V SSA Signal Source Analyzer?\n\nThanks,\nRick", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Rick Muse[Broadcom Corporation]\nUpdate date: 06-Apr-2016 10:48AM PST\n---------------------------------------------\nHi Gang,\n\nDo you have an update on this question?  The customer has pinged me again on it.\n\nThanks,\nRick", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Gang Qiu[Broadcom Corporation]\nUpdate date: 07-Apr-2016  1:59PM PST\n---------------------------------------------\nHi Rick,\n\nBelow please see the responses.\n\nQ1: The test result (the figure) that customer shared and you attached is AC coupling output signal, and this result is not relevant to DC voltage level definition. The Table 324 in page159 is DC voltage level  AMR.\n\nQ2: The equipment we recommend to characterize reference clock phase jitter is Kesight E5052B SSA Signal Source Analyzer. The phase jitter can be measured using this equipment with different frequency band. please let us know if customer need more details on this.\n\nThanks\nGang", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Gang Qiu[Broadcom Corporation]\nUpdate date: 11-Apr-2016  2:08PM PST\n---------------------------------------------\nHi Rick,\n\nFor 1b.  Can customer provide a setup diagram, so we know exactly what their setup is? \n\nFor 2. The signal source analyzer is the correct equipment for measuring phase noise(jitter) of reference clock. Kesight E5052B SSA is the recommended model. \n\nThanks\nGang", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Rick Muse[Broadcom Corporation]\nUpdate date: 18-Jul-2016  7:53AM PST\n---------------------------------------------\nCustomer case has been closed. Closing this case too.\n\nRick", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}, {"Notes": "Updated by: Rick Muse[Broadcom Corporation]\nUpdate date: 07-Apr-2016  2:14PM PST\n---------------------------------------------\nHi Gang,  \n\nIt isn't clear to me if my answers given for 1A and 1B were correct.  Can you confirm?\n\nThanks,\nRick", "CreatedOn": "2017-04-06 10:44:29", "CreatedBy": "admin"}]}, {"Number": "CS2254036", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 17-Jun-2016  8:24AM PST\n---------------------------------------------\nThe Eye-Scan illustrates what the internal circuits are doing. Thus, what is tracked on the Eye-Scan is functionally tracked on the Data Slicer itself.\n\nNoticed from another case that you are not running current microcode.  I've no idea if any of this is pertinent, but the latest release is in E0CA40A1FFFF4790_0011.zip which you do have in your account.", "CreatedOn": "2017-04-10 02:35:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 16-Jun-2016  2:01PM PST\n---------------------------------------------\nSimple answer is these controls are not available to the application.\n\nRX phase interpolator cannot be controlled on a manual basis. In the VSR case, this access was there during the part's infancy when the Silcer Phase was manually controlled and no Eye-Scan was available. Subsequently, microcode has automated this parameter.", "CreatedOn": "2017-04-10 02:35:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 27-Jun-2016  6:08AM PST\n---------------------------------------------\nSorry, it looks like the uCode version was reported incorrectly. We are using the latest version. \n\nI am ok to close this ticket. The original question is answered, if we have a specific issue concerning the Gearbox I will submit a ticket for that issue.", "CreatedOn": "2017-04-10 02:35:11", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 17-Jun-2016  7:49AM PST\n---------------------------------------------\nThe reason I brought this up is because we had a case with the VSR lanes where we could see that the microcode was not selecting the optimal sampling point. For the VSR lanes, we see that the phase adjustment is always selected as 32, which is 1/2 of a unit interval. We have had cases where there are consistent FCS errors that go away when we change the phase offset to a higher value. By manually scanning the phase adjustment while running traffic and monitoring for FCS errors, we would find that the effective opening is from 30 to 46 (just one specific example). So the optimal sampling point should be around 38 in this case, yet the sample was chosen close to the edge of the eye opening and this resulted in intermittent FCS errors. We are investigating an issue right now on the 10G lanes and this is why I was interested in checking the slicers to ensure that the sampling was actually occuring in what looks like the center of the eye opening. \n\nWe don't fully understand how the microcode is controlling the slicers to optimize for sampling in the middle of the eye. Is there any documentation about this? Some questions that I have concerning this:\n\nAre the slicers continuously being updated? Or is this something that is optimized once at some point during initialization by the microcode. If this happens once then I'm assuming that link/traffic is required to set the slicers. Is this something that is handled automatically by the microcode where the microcode waits for signal detect and CDR lock before optimizing the slicers?\n\nThanks,\nAlexey", "CreatedOn": "2017-04-10 02:35:11", "CreatedBy": "admin"}]}, {"Number": "CS2283775", "ProductName": "BCM84794", "TicketNotes": []}, {"Number": "CS2280409", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 04-Aug-2015  1:10PM PST\n---------------------------------------------\nAlexey,\n\nYes this uses the Falcon core for the 25G interfaces.  I have no experience testing the 25G 40 nm interfaces so I cannot comment.  The testing that I have supported  on 82381 have shown the 25G interfaces work very well.  This core does use a DFE on appropriate modes like CR4\n\nThe main/post maybe a misnomer.  If you look at figure 10 page 19 of the data sheet the post has really turned into pre compensation of the next bit time.\n\nDavid", "CreatedOn": "2017-04-10 01:14:25", "CreatedBy": "admin"}, {"Notes": "Updated by: Alexey Fridman[Sandvine Incorporated]\nUpdate date: 05-Aug-2015  5:26AM PST\n---------------------------------------------\nIs there a document available specifically for Falcon Core that we can reference for details? Or will there be an update to BCM82793 datasheet at some point to add details for the DFE? \n\nWe would be interested in knowing which modes would enable DFE at the receiver. We would also be interested in seeing the tuned tap coefficients.\n\nThanks,\nAlexey", "CreatedOn": "2017-04-10 01:14:25", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 17-Sep-2015 11:45AM PST\n---------------------------------------------\nclosing", "CreatedOn": "2017-04-10 01:14:26", "CreatedBy": "admin"}, {"Notes": "Updated by: David Stoenner[Broadcom Corporation]\nUpdate date: 05-Aug-2015  1:45PM PST\n---------------------------------------------\nAlexey,\n\nI am sure the data sheet is going to be updated as time goes on.  This was to get something out . We do not have any customer data for the Falcon core specifically.  Exactly how much of the falcon core is going to be in this version I do not know.  That is why the data sheet is going to have to be expanded.\n\nDFE is automatically enabled for these interface modes, 100GE CR4/KR4, 40G CR4 and 10G KR\n\nDavid", "CreatedOn": "2017-04-10 01:14:25", "CreatedBy": "admin"}]}, {"Number": "CS2328647", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 4/5/2015 7:31:00 PM PST\n---------------------------------------------\nHi Subha,\nIn SR10 mode, VSR lanes and HEXA core from the GB will be used. Please refer Document \"84793-SWUM102-R\" section \"Line-Side PRBS Generators and Checkers\" for VSR Core.\nHexa core uses indirect register access. Refer section \"Indirectly Addressable Registers\" of the same document for detailed procedure.\n\nHere is an example of a Write and a Read for a Hexacore lane:\nmsg \"set TX PRBS on Hexacore Lane\"\nCall write(1, &HF453, &H0800&)\nCall write(1, &HF454, &H8069&)\nCall write(1, &HF455, &H006C&)\nCall write(1, &HF452, &H000C&)\nCall write(1, &HF452, &H0002&)\nmsg \"set RX PRBS on Hexacore Lane\"\nCall write(1, &HF453, &H0800&)\nCall write(1, &HF454, &H80B6&)\nCall write(1, &HF455, &H006C&)\nCall write(1, &HF452, &H000A&)\nCall write(1, &HF452, &H0002&)\n\nmsg \"Read CDR lock on Hexacore Lane\"\nCall write(1, &HF453, &H0800&)\nCall write(1, &HF454, &H80B1&)\nCall write(1, &HF455, &H0000&)\nCall write(1, &HF452, &H000A&)\nCall write(1, &HF452, &H0002&)\nCall write(1, &HF453, &H0800&)\nCall write(1, &HF454, &H80B0&)\nCall write(1, &HF452, &H12&)\nCall write(1, &HF452, &H0002&)\n\nPlease let us know if you have difficulty in running PRBS test on Line side interface.\n\nThanks\nAneesh", "CreatedOn": "2017-04-10 12:43:51", "CreatedBy": "admin"}, {"Notes": "Updated by: Subha Sekar[Cisco Systems Inc]\nUpdate date: 4/10/2015 1:53:00 AM PST\n---------------------------------------------\nThanks for the data pointers. I am closing the case.", "CreatedOn": "2017-04-10 12:43:51", "CreatedBy": "admin"}]}, {"Number": "CS1852161", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 13-Oct-2015  4:38PM PST\n---------------------------------------------\nPlease see attached xl sheet for BCM84794.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:51:37", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 12-Oct-2015  2:18PM PST\n---------------------------------------------\nHi Brian,\nI am looking into this with packaging team. Will get back to you by EOD oct-13-2015.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 08:51:37", "CreatedBy": "admin"}]}, {"Number": "CS1844132", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Aneesh Dhananjayan[Broadcom Corporation]\nUpdate date: 16-Mar-2014  9:22PM PST\n---------------------------------------------\nResolving as there it is a duplicate case of CSP# 768129", "CreatedOn": "2017-04-06 03:16:06", "CreatedBy": "admin"}]}, {"Number": "CS2290506", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 3/31/2014 10:37:00 PM PST\n---------------------------------------------\nSet to resolved.\nYou can re-open this case if have any question.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:46:56", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 3/30/2014 9:29:00 PM PST\n---------------------------------------------\nXinrong,\nYou can swap the lanes to optimize the routing. Due to the Gearbox is transparent to the signals. So if you applying lane swapping. Make sure configure the MAC side to meet the specific lane ording. For detailed information, Pls refer to the 802.3 CL83.5 to see detailed bit level mux rules.\nSo, Pls check with your MAC vendor to see if this is supported. In general, MAC support this feature.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 03:46:56", "CreatedBy": "admin"}]}, {"Number": "CS2301227", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 12/24/2014 8:06:00 AM PST\n---------------------------------------------\nMeijun,\nPls refer to the attached. This is not B version firmware but newer than D version.\n\nRegards,\nLaurel", "CreatedOn": "2017-04-10 06:52:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 1/11/2015 10:13:00 PM PST\n---------------------------------------------\nSet to resolved.", "CreatedOn": "2017-04-10 06:52:52", "CreatedBy": "admin"}, {"Notes": "Updated by: Laurel Zhu[Broadcom Corporation]\nUpdate date: 12/22/2014 9:14:00 AM PST\n---------------------------------------------\nMeijun & Xinrong,\nWhich firmware are you using? If you are using version D firmware, Can you try version B firmware to see whether this issue can be found?\n\nThanks,\nLaurel", "CreatedOn": "2017-04-10 06:52:51", "CreatedBy": "admin"}, {"Notes": "Updated by: Xinrong Lu[Coriant GmbH]\nUpdate date: 12/22/2014 4:39:00 PM PST\n---------------------------------------------\nHi Laurel,\nwe are using rev D, Can you share with us the rev B firmware in dosafe?\nwe will try.\nThanks.", "CreatedOn": "2017-04-10 06:52:51", "CreatedBy": "admin"}, {"Notes": "Updated by: Meijun Zhao[Coriant GmbH]\nUpdate date: 12/24/2014 1:24:00 AM PST\n---------------------------------------------\nHi Laurel,\nWe did not get your update regarding the rev B firmware yet.\nCan you help to release rev B firmware for our test?\n\nThanks.\n\n\n\nBest Regards\n\nMeijun Zhao (Mager)\nOffice: +86-21-3326 8186", "CreatedOn": "2017-04-10 06:52:51", "CreatedBy": "admin"}]}, {"Number": "CS1702320", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 14-Oct-2014  4:27PM PST\n---------------------------------------------\nhi Yogish,\nCan you view csp [CASE#767795]\n\nit has all the information you need not just for 84794 but for 84790 and 84793 as well.\n\nthanks\nNishant", "CreatedOn": "2017-04-06 05:09:55", "CreatedBy": "admin"}, {"Notes": "Updated by: Yogish Kumar[Broadcom Corporation]\nUpdate date: 14-Oct-2014  4:53PM PST\n---------------------------------------------\nOk, Thanks Nishant. But you should update the datasheet TBD portions with this info.\n\nRegards,\nYogish", "CreatedOn": "2017-04-06 05:09:55", "CreatedBy": "admin"}]}, {"Number": "CS1959335", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 09-May-2014 10:08AM PST\n---------------------------------------------\nPeter,\nBCm84793/94 REFCLK input had discrete AC coupling caps inside the package. Hence it should be able to handle large range of DC levels.\n\nspecification of this cap is .1uf , 10% tolerance , voltage=6.3V\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 05-May-2014  8:24AM PST\n---------------------------------------------\nAttaching the IDT data sheet from customer's board design.  Table 4D on page 4 shows similar Voh levels as the part used in our reference design.", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-May-2014  3:47PM PST\n---------------------------------------------\nHello Peter,\nrange of reference clock input swing is specified in DS it is 300mv to 1200mv pk_pk differential. \nThe refclock is based out of 3,3 v and it goes through a clock buffer . The maximum voltage swing out of the buffer is around 1.6v\n\n\nThanks\nNishant", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 09-May-2014  7:46AM PST\n---------------------------------------------\nI was probably not clear (either in my explanation or the meaning of the max rating.  The clock buffer has the following:\nVoh,min = 3.3 - 1.145 = 2.155\nVoh,max = 3.3 - 0.895 = 2.405\nVol,min = 3.3 -1.945 = 1.355\nVol.max = 3.3 - 1.695 = 1.605\n\nHowever, as I read Table 324 again I realize this max rating is for the voltage supply controlling those I/O, not the actual input signal.  Is that correct?  I believe the customer interpreted the spec wrong, and I didn't catch it when I reviewed the data sheet.", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 13-May-2014  7:15PM PST\n---------------------------------------------\nQuery answered", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}, {"Notes": "Updated by: Peter Beaulieu[Broadcom Corporation]\nUpdate date: 09-May-2014  8:39AM PST\n---------------------------------------------\nCustomer persists on this question.  What really should have been asked is the following:\nWhat are the min/max allowavle DC levels at the reference clock inputs?  From the prior post we know the possible range on our reference design based on the output specs of the clock buffer.\nI will also do some general searching for this information, as it may have been asked in the context of any number of devices.", "CreatedOn": "2017-04-06 03:46:50", "CreatedBy": "admin"}]}, {"Number": "CS1799944", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 27-Apr-2016  1:21PM PST\n---------------------------------------------\nHi Yogish,\nQuestion 3. Continued ..\nis the 1.2v for MDIO ?\n\nquestion 4.\nCould you clarify the sequence of power up and if they hold external resetB when performing these tests ?\n\nThanks\nNishant", "CreatedOn": "2017-04-06 11:04:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 08-Jun-2016  2:26PM PST\n---------------------------------------------\nresolving this case due to activity and update.", "CreatedOn": "2017-04-06 11:04:01", "CreatedBy": "admin"}, {"Notes": "Updated by: Nishant Chadha[Broadcom Corporation]\nUpdate date: 27-Apr-2016 12:01PM PST\n---------------------------------------------\nHi Yogish,\n\nThere is no such power on sequence requirement apart from POR explained in the DS. \n\n\nThree questions for you\n1. Why is all the supplies not powered up at the same time ?\n2. 2.5 v is only for DVDDIO , can you confirm if the power rails Vp2p5_phyyxtx_AVDD is ineeded DVDDIO for pins F9 and G8, From the label it doesn't seem like DVDDIO\n3. What is 1.2v used for ? from the DS it seems only dual supply 1v for analog and 2.5v for IO is supported.\n\nThanks\nNishant", "CreatedOn": "2017-04-06 11:04:01", "CreatedBy": "admin"}]}, {"Number": "CS4578977", "ProductName": "BCM84794", "TicketNotes": [{"Notes": "Hi Kevin,\r\n\r\nI have submitted request to have both the 84794 and 84793 docs added to both users accounts.\r\n\r\n  1.  I-temp --> I can see 84794 has an I-temp option in datasheet ordering information.\r\n\r\n  2.  Pin compatibility --> I see the following\r\n      - 84793 pin list is used in both 84793 & 84794 folders.\r\n      - Scan/compare 84793/84794 pinout between two datasheet and they match\r\n      - There is a pin-pin compatibility app note for  84793/82793 in 84793 folder --> 82793_84793-AN100-R\r\n      - Hence, why I requested all docs for 84793 - that way they can see the pin differences.\r\n\r\n  3.  SyncE --> 84794/3 are repeaters and therefore not designed for SyncE application.  However, I do see discussions about potential implementations.  The customer should review docs/below and provide block diagram/proposal and we can analyze.\r\n\r\nBasically, use the RX_MCLK output (restricted to 1st four line side lanes), pass through external PLL and feed to both NPU & 84794.  Or, have NPU recover the clock from CAUI input and recovered clock to both NPU and 84794.  Below is some additional detail I copied from a case.\r\n\r\n=======================================\r\n84794 is pure repeater chip and it is not designed for syncE applications. But syncE operation can be achieved in the following way.\r\nIn Ingress path:\r\n1. At Ingress path, GB have clock pass-through mode. So, CAUI output is locked to Line Input. Clock recovery is possible at TD2.\r\n2. If there is NO data coming from the incoming line side, there is NO data exiting on the CAUI.\r\nIn Egress Path:\r\n1. Line output is NOT locked to CAUI input . All data is timed off the Reference clock.\r\n2. Reference clock should be always present for the Gearbox to work properly.\r\n3. syncE operation can be achieved by providing syncE clock to REFCLK externally, Provided the reference clock requirements given in \"Table 324: Recommended Operating Conditions (Cont.)\" is met.\r\n=======================================\r\n\r\nThanks,\r\n\r\nErik", "CreatedOn": "2018-02-15 03:20:33", "CreatedBy": "N6020892"}]}]}}